!function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):t(jQuery)}(function(l){var a=-1,i=-1,h=function(t){return parseFloat(t)||0},c=function(t){var e=l(t),a=null,i=[];return e.each(function(){var t=l(this),e=t.offset().top-h(t.css("margin-top")),o=0<i.length?i[i.length-1]:null;null===o?i.push(t):Math.floor(Math.abs(a-e))<=1?i[i.length-1]=o.add(t):i.push(t),a=e}),i},p=function(t){var e={byRow:!0,property:"height",target:null,remove:!1};return"object"==typeof t?l.extend(e,t):("boolean"==typeof t?e.byRow=t:"remove"===t&&(e.remove=!0),e)},d=l.fn.matchHeight=function(t){var e=p(t);if(e.remove){var o=this;return this.css(e.property,""),l.each(d._groups,function(t,e){e.elements=e.elements.not(o)}),this}return this.length<=1&&!e.target||(d._groups.push({elements:this,options:e}),d._apply(this,e)),this};d.version="0.7.0",d._groups=[],d._throttle=80,d._maintainScroll=!1,d._beforeUpdate=null,d._afterUpdate=null,d._rows=c,d._parse=h,d._parseOptions=p,d._apply=function(t,e){var n=p(e),o=l(t),a=[o],i=l(window).scrollTop(),r=l("html").outerHeight(!0),s=o.parents().filter(":hidden");return s.each(function(){var t=l(this);t.data("style-cache",t.attr("style"))}),s.css("display","block"),n.byRow&&!n.target&&(o.each(function(){var t=l(this),e=t.css("display");"inline-block"!==e&&"flex"!==e&&"inline-flex"!==e&&(e="block"),t.data("style-cache",t.attr("style")),t.css({display:e,"padding-top":"0","padding-bottom":"0","margin-top":"0","margin-bottom":"0","border-top-width":"0","border-bottom-width":"0",height:"100px",overflow:"hidden"})}),a=c(o),o.each(function(){var t=l(this);t.attr("style",t.data("style-cache")||"")})),l.each(a,function(t,e){var o=l(e),i=0;if(n.target)i=n.target.outerHeight(!1);else{if(n.byRow&&o.length<=1)return void o.css(n.property,"");o.each(function(){var t=l(this),e=t.attr("style"),o=t.css("display");"inline-block"!==o&&"flex"!==o&&"inline-flex"!==o&&(o="block");var a={display:o};a[n.property]="",t.css(a),t.outerHeight(!1)>i&&(i=t.outerHeight(!1)),e?t.attr("style",e):t.css("display","")})}o.each(function(){var t=l(this),e=0;n.target&&t.is(n.target)||("border-box"!==t.css("box-sizing")&&(e+=h(t.css("border-top-width"))+h(t.css("border-bottom-width")),e+=h(t.css("padding-top"))+h(t.css("padding-bottom"))),t.css(n.property,i-e+"px"))})}),s.each(function(){var t=l(this);t.attr("style",t.data("style-cache")||null)}),d._maintainScroll&&l(window).scrollTop(i/r*l("html").outerHeight(!0)),this},d._applyDataApi=function(){var o={};l("[data-match-height], [data-mh]").each(function(){var t=l(this),e=t.attr("data-mh")||t.attr("data-match-height");o[e]=e in o?o[e].add(t):t}),l.each(o,function(){this.matchHeight(!0)})};var n=function(t){d._beforeUpdate&&d._beforeUpdate(t,d._groups),l.each(d._groups,function(){d._apply(this.elements,this.options)}),d._afterUpdate&&d._afterUpdate(t,d._groups)};d._update=function(t,e){if(e&&"resize"===e.type){var o=l(window).width();if(o===a)return;a=o}t?-1===i&&(i=setTimeout(function(){n(e),i=-1},d._throttle)):n(e)},l(d._applyDataApi),l(window).bind("load",function(t){d._update(!1,t)}),l(window).bind("resize orientationchange",function(t){d._update(!0,t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci9qcXVlcnkubWF0Y2hIZWlnaHQuanMiXSwibmFtZXMiOlsiZmFjdG9yeSIsImRlZmluZSIsImFtZCIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXF1aXJlIiwialF1ZXJ5IiwiJCIsIl9wcmV2aW91c1Jlc2l6ZVdpZHRoIiwiX3VwZGF0ZVRpbWVvdXQiLCJfcGFyc2UiLCJ2YWx1ZSIsInBhcnNlRmxvYXQiLCJfcm93cyIsImVsZW1lbnRzIiwiJGVsZW1lbnRzIiwibGFzdFRvcCIsInJvd3MiLCJlYWNoIiwiJHRoYXQiLCJ0aGlzIiwidG9wIiwib2Zmc2V0IiwiY3NzIiwibGFzdFJvdyIsImxlbmd0aCIsInB1c2giLCJNYXRoIiwiZmxvb3IiLCJhYnMiLCJhZGQiLCJfcGFyc2VPcHRpb25zIiwib3B0aW9ucyIsIm9wdHMiLCJieVJvdyIsInByb3BlcnR5IiwidGFyZ2V0IiwicmVtb3ZlIiwiZXh0ZW5kIiwibWF0Y2hIZWlnaHQiLCJmbiIsInRoYXQiLCJfZ3JvdXBzIiwia2V5IiwiZ3JvdXAiLCJub3QiLCJfYXBwbHkiLCJ2ZXJzaW9uIiwiX3Rocm90dGxlIiwiX21haW50YWluU2Nyb2xsIiwiX2JlZm9yZVVwZGF0ZSIsIl9hZnRlclVwZGF0ZSIsInNjcm9sbFRvcCIsIndpbmRvdyIsImh0bWxIZWlnaHQiLCJvdXRlckhlaWdodCIsIiRoaWRkZW5QYXJlbnRzIiwicGFyZW50cyIsImZpbHRlciIsImRhdGEiLCJhdHRyIiwiZGlzcGxheSIsInBhZGRpbmctdG9wIiwicGFkZGluZy1ib3R0b20iLCJtYXJnaW4tdG9wIiwibWFyZ2luLWJvdHRvbSIsImJvcmRlci10b3Atd2lkdGgiLCJib3JkZXItYm90dG9tLXdpZHRoIiwiaGVpZ2h0Iiwib3ZlcmZsb3ciLCJyb3ciLCIkcm93IiwidGFyZ2V0SGVpZ2h0Iiwic3R5bGUiLCJ2ZXJ0aWNhbFBhZGRpbmciLCJpcyIsIl9hcHBseURhdGFBcGkiLCJncm91cHMiLCIkdGhpcyIsImdyb3VwSWQiLCJfdXBkYXRlIiwiZXZlbnQiLCJ0aHJvdHRsZSIsInR5cGUiLCJ3aW5kb3dXaWR0aCIsIndpZHRoIiwic2V0VGltZW91dCIsImJpbmQiXSwibWFwcGluZ3MiOiJDQU1DLFNBQVVBLEdBQ1YsYUFDc0IsbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUUxQ0QsT0FBTyxDQUFDLFVBQVdELEdBQ1Msb0JBQVhHLFFBQTBCQSxPQUFPQyxRQUVsREQsT0FBT0MsUUFBVUosRUFBUUssUUFBUSxXQUdqQ0wsRUFBUU0sUUFWVCxDQVlFLFNBQVNDLEdBS1gsSUFBSUMsR0FBd0IsRUFDM0JDLEdBQWtCLEVBT2ZDLEVBQVMsU0FBU0MsR0FFckIsT0FBT0MsV0FBV0QsSUFBVSxHQVN6QkUsRUFBUSxTQUFTQyxHQUNwQixJQUNDQyxFQUFZUixFQUFFTyxHQUNkRSxFQUFVLEtBQ1ZDLEVBQU8sR0F5QlIsT0F0QkFGLEVBQVVHLEtBQUssV0FDZCxJQUFJQyxFQUFRWixFQUFFYSxNQUNiQyxFQUFNRixFQUFNRyxTQUFTRCxJQUFNWCxFQUFPUyxFQUFNSSxJQUFJLGVBQzVDQyxFQUF3QixFQUFkUCxFQUFLUSxPQUFhUixFQUFLQSxFQUFLUSxPQUFTLEdBQUssS0FFckMsT0FBWkQsRUFFSFAsRUFBS1MsS0FBS1AsR0FHTlEsS0FBS0MsTUFBTUQsS0FBS0UsSUFBSWIsRUFBVUssS0FoQnBCLEVBaUJiSixFQUFLQSxFQUFLUSxPQUFTLEdBQUtELEVBQVFNLElBQUlYLEdBR3BDRixFQUFLUyxLQUFLUCxHQUtaSCxFQUFVSyxJQUdKSixHQVFKYyxFQUFnQixTQUFTQyxHQUM1QixJQUFJQyxFQUFPLENBQ1ZDLE9BQU8sRUFDUEMsU0FBVSxTQUNWQyxPQUFRLEtBQ1JDLFFBQVEsR0FHVCxNQUF1QixpQkFBWkwsRUFDSHpCLEVBQUUrQixPQUFPTCxFQUFNRCxJQUdBLGtCQUFaQSxFQUNWQyxFQUFLQyxNQUFRRixFQUNTLFdBQVpBLElBQ1ZDLEVBQUtJLFFBQVMsR0FHUkosSUFRSk0sRUFBY2hDLEVBQUVpQyxHQUFHRCxZQUFjLFNBQVNQLEdBQzdDLElBQUlD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RCxJQUFnQjVFLEVBQ25CLE9BRURBLEVBQXVCNEUsRUFJbkJGLEdBRTBCLElBQXBCekUsSUFDVkEsRUFBaUI2RSxXQUFXLFdBQzNCTixFQUFRQyxHQUNSeEUsR0FBa0IsR0FDaEI4QixFQUFZUyxZQUxmZ0MsRUFBUUMsSUFjVjFFLEVBQUVnQyxFQUFZcUMsZUFHZHJFLEVBQUU4QyxRQUFRa0MsS0FBSyxPQUFRLFNBQVNOLEdBQy9CMUMsRUFBWXlDLFNBQVEsRUFBT0MsS0FJNUIxRSxFQUFFOEMsUUFBUWtDLEtBQUssMkJBQTRCLFNBQVNOLEdBQ25EMUMsRUFBWXlDLFNBQVEsRUFBTUMiLCJmaWxlIjoidmVuZG9yL2pxdWVyeS5tYXRjaEhlaWdodC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbioganF1ZXJ5LW1hdGNoLWhlaWdodCAwLjcuMCBieSBAbGlhYnJ1XG4qIGh0dHA6Ly9icm0uaW8vanF1ZXJ5LW1hdGNoLWhlaWdodC9cbiogTGljZW5zZTogTUlUXG4qL1xuXG47KGZ1bmN0aW9uKGZhY3RvcnkpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1leHRyYS1zZW1pXG5cdCd1c2Ugc3RyaWN0Jztcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRFxuXHRcdGRlZmluZShbJ2pxdWVyeSddLCBmYWN0b3J5KTtcblx0fSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdC8vIENvbW1vbkpTXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcblx0fSBlbHNlIHtcblx0XHQvLyBHbG9iYWxcblx0XHRmYWN0b3J5KGpRdWVyeSk7XG5cdH1cbn0pKGZ1bmN0aW9uKCQpIHtcblx0Lypcblx0KiAgaW50ZXJuYWxcblx0Ki9cblxuXHR2YXIgX3ByZXZpb3VzUmVzaXplV2lkdGggPSAtMSxcblx0XHRfdXBkYXRlVGltZW91dCA9IC0xO1xuXG5cdC8qXG5cdCogIF9wYXJzZVxuXHQqICB2YWx1ZSBwYXJzZSB1dGlsaXR5IGZ1bmN0aW9uXG5cdCovXG5cblx0dmFyIF9wYXJzZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0Ly8gcGFyc2UgdmFsdWUgYW5kIGNvbnZlcnQgTmFOIHRvIDBcblx0XHRyZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSkgfHwgMDtcblx0fTtcblxuXHQvKlxuXHQqICBfcm93c1xuXHQqICB1dGlsaXR5IGZ1bmN0aW9uIHJldHVybnMgYXJyYXkgb2YgalF1ZXJ5IHNlbGVjdGlvbnMgcmVwcmVzZW50aW5nIGVhY2ggcm93XG5cdCogIChhcyBkaXNwbGF5ZWQgYWZ0ZXIgZmxvYXQgd3JhcHBpbmcgYXBwbGllZCBieSBicm93c2VyKVxuXHQqL1xuXG5cdHZhciBfcm93cyA9IGZ1bmN0aW9uKGVsZW1lbnRzKSB7XG5cdFx0dmFyIHRvbGVyYW5jZSA9IDEsXG5cdFx0XHQkZWxlbWVudHMgPSAkKGVsZW1lbnRzKSxcblx0XHRcdGxhc3RUb3AgPSBudWxsLFxuXHRcdFx0cm93cyA9IFtdO1xuXG5cdFx0Ly8gZ3JvdXAgZWxlbWVudHMgYnkgdGhlaXIgdG9wIHBvc2l0aW9uXG5cdFx0JGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKXtcblx0XHRcdHZhciAkdGhhdCA9ICQodGhpcyksXG5cdFx0XHRcdHRvcCA9ICR0aGF0Lm9mZnNldCgpLnRvcCAtIF9wYXJzZSgkdGhhdC5jc3MoJ21hcmdpbi10b3AnKSksXG5cdFx0XHRcdGxhc3RSb3cgPSByb3dzLmxlbmd0aCA+IDAgPyByb3dzW3Jvd3MubGVuZ3RoIC0gMV0gOiBudWxsO1xuXG5cdFx0XHRpZiAobGFzdFJvdyA9PT0gbnVsbCkge1xuXHRcdFx0XHQvLyBmaXJzdCBpdGVtIG9uIHRoZSByb3csIHNvIGp1c3QgcHVzaCBpdFxuXHRcdFx0XHRyb3dzLnB1c2goJHRoYXQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gaWYgdGhlIHJvdyB0b3AgaXMgdGhlIHNhbWUsIGFkZCB0byB0aGUgcm93IGdyb3VwXG5cdFx0XHRcdGlmIChNYXRoLmZsb29yKE1hdGguYWJzKGxhc3RUb3AgLSB0b3ApKSA8PSB0b2xlcmFuY2UpIHtcblx0XHRcdFx0XHRyb3dzW3Jvd3MubGVuZ3RoIC0gMV0gPSBsYXN0Um93LmFkZCgkdGhhdCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHN0YXJ0IGEgbmV3IHJvdyBncm91cFxuXHRcdFx0XHRcdHJvd3MucHVzaCgkdGhhdCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8ga2VlcCB0cmFjayBvZiB0aGUgbGFzdCByb3cgdG9wXG5cdFx0XHRsYXN0VG9wID0gdG9wO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJvd3M7XG5cdH07XG5cblx0Lypcblx0KiAgX3BhcnNlT3B0aW9uc1xuXHQqICBoYW5kbGUgcGx1Z2luIG9wdGlvbnNcblx0Ki9cblxuXHR2YXIgX3BhcnNlT3B0aW9ucyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblx0XHR2YXIgb3B0cyA9IHtcblx0XHRcdGJ5Um93OiB0cnVlLFxuXHRcdFx0cHJvcGVydHk6ICdoZWlnaHQnLFxuXHRcdFx0dGFyZ2V0OiBudWxsLFxuXHRcdFx0cmVtb3ZlOiBmYWxzZVxuXHRcdH07XG5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRyZXR1cm4gJC5leHRlbmQob3B0cywgb3B0aW9ucyk7XG5cdFx0fVxuXG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zID09PSAnYm9vbGVhbicpIHtcblx0XHRcdG9wdHMuYnlSb3cgPSBvcHRpb25zO1xuXHRcdH0gZWxzZSBpZiAob3B0aW9ucyA9PT0gJ3JlbW92ZScpIHtcblx0XHRcdG9wdHMucmVtb3ZlID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3B0cztcblx0fTtcblxuXHQvKlxuXHQqICBtYXRjaEhlaWdodFxuXHQqICBwbHVnaW4gZGVmaW5pdGlvblxuXHQqL1xuXG5cdHZhciBtYXRjaEhlaWdodCA9ICQuZm4ubWF0Y2hIZWlnaHQgPSBmdW5jdGlvbihvcHRpb25zKSB7XG5cdFx0dmFyIG9wdHMgPSBfcGFyc2VPcHRpb25zKG9wdGlvbnMpO1xuXG5cdFx0Ly8gaGFuZGxlIHJlbW92ZVxuXHRcdGlmIChvcHRzLnJlbW92ZSkge1xuXHRcdFx0dmFyIHRoYXQgPSB0aGlzO1xuXG5cdFx0XHQvLyByZW1vdmUgZml4ZWQgaGVpZ2h0IGZyb20gYWxsIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHR0aGlzLmNzcyhvcHRzLnByb3BlcnR5LCAnJyk7XG5cblx0XHRcdC8vIHJlbW92ZSBzZWxlY3RlZCBlbGVtZW50cyBmcm9tIGFsbCBncm91cHNcblx0XHRcdCQuZWFjaChtYXRjaEhlaWdodC5fZ3JvdXBzLCBmdW5jdGlvbihrZXksIGdyb3VwKSB7XG5cdFx0XHRcdGdyb3VwLmVsZW1lbnRzID0gZ3JvdXAuZWxlbWVudHMubm90KHRoYXQpO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFRPRE86IGNsZWFudXAgZW1wdHkgZ3JvdXBzXG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLmxlbmd0aCA8PSAxICYmICFvcHRzLnRhcmdldCkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8ga2VlcCB0cmFjayBvZiB0aGlzIGdyb3VwIHNvIHdlIGNhbiByZS1hcHBseSBsYXRlciBvbiBsb2FkIGFuZCByZXNpemUgZXZlbnRzXG5cdFx0bWF0Y2hIZWlnaHQuX2dyb3Vwcy5wdXNoKHtcblx0XHRcdGVsZW1lbnRzOiB0aGlzLFxuXHRcdFx0b3B0aW9uczogb3B0c1xuXHRcdH0pO1xuXG5cdFx0Ly8gbWF0Y2ggZWFjaCBlbGVtZW50J3MgaGVpZ2h0IHRvIHRoZSB0YWxsZXN0IGVsZW1lbnQgaW4gdGhlIHNlbGVjdGlvblxuXHRcdG1hdGNoSGVpZ2h0Ll9hcHBseSh0aGlzLCBvcHRzKTtcblxuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdC8qXG5cdCogIHBsdWdpbiBnbG9iYWwgb3B0aW9uc1xuXHQqL1xuXG5cdG1hdGNoSGVpZ2h0LnZlcnNpb24gPSAnMC43LjAnO1xuXHRtYXRjaEhlaWdodC5fZ3JvdXBzID0gW107XG5cdG1hdGNoSGVpZ2h0Ll90aHJvdHRsZSA9IDgwO1xuXHRtYXRjaEhlaWdodC5fbWFpbnRhaW5TY3JvbGwgPSBmYWxzZTtcblx0bWF0Y2hIZWlnaHQuX2JlZm9yZVVwZGF0ZSA9IG51bGw7XG5cdG1hdGNoSGVpZ2h0Ll9hZnRlclVwZGF0ZSA9IG51bGw7XG5cdG1hdGNoSGVpZ2h0Ll9yb3dzID0gX3Jvd3M7XG5cdG1hdGNoSGVpZ2h0Ll9wYXJzZSA9IF9wYXJzZTtcblx0bWF0Y2hIZWlnaHQuX3BhcnNlT3B0aW9ucyA9IF9wYXJzZU9wdGlvbnM7XG5cblx0Lypcblx0KiAgbWF0Y2hIZWlnaHQuX2FwcGx5XG5cdCogIGFwcGx5IG1hdGNoSGVpZ2h0IHRvIGdpdmVuIGVsZW1lbnRzXG5cdCovXG5cblx0bWF0Y2hIZWlnaHQuX2FwcGx5ID0gZnVuY3Rpb24oZWxlbWVudHMsIG9wdGlvbnMpIHtcblx0XHR2YXIgb3B0cyA9IF9wYXJzZU9wdGlvbnMob3B0aW9ucyksXG5cdFx0XHQkZWxlbWVudHMgPSAkKGVsZW1lbnRzKSxcblx0XHRcdHJvd3MgPSBbJGVsZW1lbnRzXTtcblxuXHRcdC8vIHRha2Ugbm90ZSBvZiBzY3JvbGwgcG9zaXRpb25cblx0XHR2YXIgc2Nyb2xsVG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpLFxuXHRcdFx0aHRtbEhlaWdodCA9ICQoJ2h0bWwnKS5vdXRlckhlaWdodCh0cnVlKTtcblxuXHRcdC8vIGdldCBoaWRkZW4gcGFyZW50c1xuXHRcdHZhciAkaGlkZGVuUGFyZW50cyA9ICRlbGVtZW50cy5wYXJlbnRzKCkuZmlsdGVyKCc6aGlkZGVuJyk7XG5cblx0XHQvLyBjYWNoZSB0aGUgb3JpZ2luYWwgaW5saW5lIHN0eWxlXG5cdFx0JGhpZGRlblBhcmVudHMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkdGhhdCA9ICQodGhpcyk7XG5cdFx0XHQkdGhhdC5kYXRhKCdzdHlsZS1jYWNoZScsICR0aGF0LmF0dHIoJ3N0eWxlJykpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gdGVtcG9yYXJpbHkgbXVzdCBmb3JjZSBoaWRkZW4gcGFyZW50cyB2aXNpYmxlXG5cdFx0JGhpZGRlblBhcmVudHMuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG5cblx0XHQvLyBnZXQgcm93cyBpZiB1c2luZyBieVJvdywgb3RoZXJ3aXNlIGFzc3VtZSBvbmUgcm93XG5cdFx0aWYgKG9wdHMuYnlSb3cgJiYgIW9wdHMudGFyZ2V0KSB7XG5cblx0XHRcdC8vIG11c3QgZmlyc3QgZm9yY2UgYW4gYXJiaXRyYXJ5IGVxdWFsIGhlaWdodCBzbyBmbG9hdGluZyBlbGVtZW50cyBicmVhayBldmVubHlcblx0XHRcdCRlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgJHRoYXQgPSAkKHRoaXMpLFxuXHRcdFx0XHRcdGRpc3BsYXkgPSAkdGhhdC5jc3MoJ2Rpc3BsYXknKTtcblxuXHRcdFx0XHQvLyB0ZW1wb3JhcmlseSBmb3JjZSBhIHVzYWJsZSBkaXNwbGF5IHZhbHVlXG5cdFx0XHRcdGlmIChkaXNwbGF5ICE9PSAnaW5saW5lLWJsb2NrJyAmJiBkaXNwbGF5ICE9PSAnZmxleCcgJiYgZGlzcGxheSAhPT0gJ2lubGluZS1mbGV4Jykge1xuXHRcdFx0XHRcdGRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gY2FjaGUgdGhlIG9yaWdpbmFsIGlubGluZSBzdHlsZVxuXHRcdFx0XHQkdGhhdC5kYXRhKCdzdHlsZS1jYWNoZScsICR0aGF0LmF0dHIoJ3N0eWxlJykpO1xuXG5cdFx0XHRcdCR0aGF0LmNzcyh7XG5cdFx0XHRcdFx0J2Rpc3BsYXknOiBkaXNwbGF5LFxuXHRcdFx0XHRcdCdwYWRkaW5nLXRvcCc6ICcwJyxcblx0XHRcdFx0XHQncGFkZGluZy1ib3R0b20nOiAnMCcsXG5cdFx0XHRcdFx0J21hcmdpbi10b3AnOiAnMCcsXG5cdFx0XHRcdFx0J21hcmdpbi1ib3R0b20nOiAnMCcsXG5cdFx0XHRcdFx0J2JvcmRlci10b3Atd2lkdGgnOiAnMCcsXG5cdFx0XHRcdFx0J2JvcmRlci1ib3R0b20td2lkdGgnOiAnMCcsXG5cdFx0XHRcdFx0J2hlaWdodCc6ICcxMDBweCcsXG5cdFx0XHRcdFx0J292ZXJmbG93JzogJ2hpZGRlbidcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gZ2V0IHRoZSBhcnJheSBvZiByb3dzIChiYXNlZCBvbiBlbGVtZW50IHRvcCBwb3NpdGlvbilcblx0XHRcdHJvd3MgPSBfcm93cygkZWxlbWVudHMpO1xuXG5cdFx0XHQvLyByZXZlcnQgb3JpZ2luYWwgaW5saW5lIHN0eWxlc1xuXHRcdFx0JGVsZW1lbnRzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciAkdGhhdCA9ICQodGhpcyk7XG5cdFx0XHRcdCR0aGF0LmF0dHIoJ3N0eWxlJywgJHRoYXQuZGF0YSgnc3R5bGUtY2FjaGUnKSB8fCAnJyk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHQkLmVhY2gocm93cywgZnVuY3Rpb24oa2V5LCByb3cpIHtcblx0XHRcdHZhciAkcm93ID0gJChyb3cpLFxuXHRcdFx0XHR0YXJnZXRIZWlnaHQgPSAwO1xuXG5cdFx0XHRpZiAoIW9wdHMudGFyZ2V0KSB7XG5cdFx0XHRcdC8vIHNraXAgYXBwbHkgdG8gcm93cyB3aXRoIG9ubHkgb25lIGl0ZW1cblx0XHRcdFx0aWYgKG9wdHMuYnlSb3cgJiYgJHJvdy5sZW5ndGggPD0gMSkge1xuXHRcdFx0XHRcdCRyb3cuY3NzKG9wdHMucHJvcGVydHksICcnKTtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpdGVyYXRlIHRoZSByb3cgYW5kIGZpbmQgdGhlIG1heCBoZWlnaHRcblx0XHRcdFx0JHJvdy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdFx0dmFyICR0aGF0ID0gJCh0aGlzKSxcblx0XHRcdFx0XHRcdHN0eWxlID0gJHRoYXQuYXR0cignc3R5bGUnKSxcblx0XHRcdFx0XHRcdGRpc3BsYXkgPSAkdGhhdC5jc3MoJ2Rpc3BsYXknKTtcblxuXHRcdFx0XHRcdC8vIHRlbXBvcmFyaWx5IGZvcmNlIGEgdXNhYmxlIGRpc3BsYXkgdmFsdWVcblx0XHRcdFx0XHRpZiAoZGlzcGxheSAhPT0gJ2lubGluZS1ibG9jaycgJiYgZGlzcGxheSAhPT0gJ2ZsZXgnICYmIGRpc3BsYXkgIT09ICdpbmxpbmUtZmxleCcpIHtcblx0XHRcdFx0XHRcdGRpc3BsYXkgPSAnYmxvY2snO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIGVuc3VyZSB3ZSBnZXQgdGhlIGNvcnJlY3QgYWN0dWFsIGhlaWdodCAoYW5kIG5vdCBhIHByZXZpb3VzbHkgc2V0IGhlaWdodCB2YWx1ZSlcblx0XHRcdFx0XHR2YXIgY3NzID0geyAnZGlzcGxheSc6IGRpc3BsYXkgfTtcblx0XHRcdFx0XHRjc3Nbb3B0cy5wcm9wZXJ0eV0gPSAnJztcblx0XHRcdFx0XHQkdGhhdC5jc3MoY3NzKTtcblxuXHRcdFx0XHRcdC8vIGZpbmQgdGhlIG1heCBoZWlnaHQgKGluY2x1ZGluZyBwYWRkaW5nLCBidXQgbm90IG1hcmdpbilcblx0XHRcdFx0XHRpZiAoJHRoYXQub3V0ZXJIZWlnaHQoZmFsc2UpID4gdGFyZ2V0SGVpZ2h0KSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRIZWlnaHQgPSAkdGhhdC5vdXRlckhlaWdodChmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gcmV2ZXJ0IHN0eWxlc1xuXHRcdFx0XHRcdGlmIChzdHlsZSkge1xuXHRcdFx0XHRcdFx0JHRoYXQuYXR0cignc3R5bGUnLCBzdHlsZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdCR0aGF0LmNzcygnZGlzcGxheScsICcnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gaWYgdGFyZ2V0IHNldCwgdXNlIHRoZSBoZWlnaHQgb2YgdGhlIHRhcmdldCBlbGVtZW50XG5cdFx0XHRcdHRhcmdldEhlaWdodCA9IG9wdHMudGFyZ2V0Lm91dGVySGVpZ2h0KGZhbHNlKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaXRlcmF0ZSB0aGUgcm93IGFuZCBhcHBseSB0aGUgaGVpZ2h0IHRvIGFsbCBlbGVtZW50c1xuXHRcdFx0JHJvdy5lYWNoKGZ1bmN0aW9uKCl7XG5cdFx0XHRcdHZhciAkdGhhdCA9ICQodGhpcyksXG5cdFx0XHRcdFx0dmVydGljYWxQYWRkaW5nID0gMDtcblxuXHRcdFx0XHQvLyBkb24ndCBhcHBseSB0byBhIHRhcmdldFxuXHRcdFx0XHRpZiAob3B0cy50YXJnZXQgJiYgJHRoYXQuaXMob3B0cy50YXJnZXQpKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gaGFuZGxlIHBhZGRpbmcgYW5kIGJvcmRlciBjb3JyZWN0bHkgKHJlcXVpcmVkIHdoZW4gbm90IHVzaW5nIGJvcmRlci1ib3gpXG5cdFx0XHRcdGlmICgkdGhhdC5jc3MoJ2JveC1zaXppbmcnKSAhPT0gJ2JvcmRlci1ib3gnKSB7XG5cdFx0XHRcdFx0dmVydGljYWxQYWRkaW5nICs9IF9wYXJzZSgkdGhhdC5jc3MoJ2JvcmRlci10b3Atd2lkdGgnKSkgKyBfcGFyc2UoJHRoYXQuY3NzKCdib3JkZXItYm90dG9tLXdpZHRoJykpO1xuXHRcdFx0XHRcdHZlcnRpY2FsUGFkZGluZyArPSBfcGFyc2UoJHRoYXQuY3NzKCdwYWRkaW5nLXRvcCcpKSArIF9wYXJzZSgkdGhhdC5jc3MoJ3BhZGRpbmctYm90dG9tJykpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gc2V0IHRoZSBoZWlnaHQgKGFjY291bnRpbmcgZm9yIHBhZGRpbmcgYW5kIGJvcmRlcilcblx0XHRcdFx0JHRoYXQuY3NzKG9wdHMucHJvcGVydHksICh0YXJnZXRIZWlnaHQgLSB2ZXJ0aWNhbFBhZGRpbmcpICsgJ3B4Jyk7XG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIHJldmVydCBoaWRkZW4gcGFyZW50c1xuXHRcdCRoaWRkZW5QYXJlbnRzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgJHRoYXQgPSAkKHRoaXMpO1xuXHRcdFx0JHRoYXQuYXR0cignc3R5bGUnLCAkdGhhdC5kYXRhKCdzdHlsZS1jYWNoZScpIHx8IG51bGwpO1xuXHRcdH0pO1xuXG5cdFx0Ly8gcmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gaWYgZW5hYmxlZFxuXHRcdGlmIChtYXRjaEhlaWdodC5fbWFpbnRhaW5TY3JvbGwpIHtcblx0XHRcdCQod2luZG93KS5zY3JvbGxUb3AoKHNjcm9sbFRvcCAvIGh0bWxIZWlnaHQpICogJCgnaHRtbCcpLm91dGVySGVpZ2h0KHRydWUpKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fTtcblxuXHQvKlxuXHQqICBtYXRjaEhlaWdodC5fYXBwbHlEYXRhQXBpXG5cdCogIGFwcGxpZXMgbWF0Y2hIZWlnaHQgdG8gYWxsIGVsZW1lbnRzIHdpdGggYSBkYXRhLW1hdGNoLWhlaWdodCBhdHRyaWJ1dGVcblx0Ki9cblxuXHRtYXRjaEhlaWdodC5fYXBwbHlEYXRhQXBpID0gZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGdyb3VwcyA9IHt9O1xuXG5cdFx0Ly8gZ2VuZXJhdGUgZ3JvdXBzIGJ5IHRoZWlyIGdyb3VwSWQgc2V0IGJ5IGVsZW1lbnRzIHVzaW5nIGRhdGEtbWF0Y2gtaGVpZ2h0XG5cdFx0JCgnW2RhdGEtbWF0Y2gtaGVpZ2h0XSwgW2RhdGEtbWhdJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciAkdGhpcyA9ICQodGhpcyksXG5cdFx0XHRcdGdyb3VwSWQgPSAkdGhpcy5hdHRyKCdkYXRhLW1oJykgfHwgJHRoaXMuYXR0cignZGF0YS1tYXRjaC1oZWlnaHQnKTtcblxuXHRcdFx0aWYgKGdyb3VwSWQgaW4gZ3JvdXBzKSB7XG5cdFx0XHRcdGdyb3Vwc1tncm91cElkXSA9IGdyb3Vwc1tncm91cElkXS5hZGQoJHRoaXMpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Z3JvdXBzW2dyb3VwSWRdID0gJHRoaXM7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBhcHBseSBtYXRjaEhlaWdodCB0byBlYWNoIGdyb3VwXG5cdFx0JC5lYWNoKGdyb3VwcywgZnVuY3Rpb24oKSB7XG5cdFx0XHR0aGlzLm1hdGNoSGVpZ2h0KHRydWUpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdC8qXG5cdCogIG1hdGNoSGVpZ2h0Ll91cGRhdGVcblx0KiAgdXBkYXRlcyBtYXRjaEhlaWdodCBvbiBhbGwgY3VycmVudCBncm91cHMgd2l0aCB0aGVpciBjb3JyZWN0IG9wdGlvbnNcblx0Ki9cblxuXHR2YXIgX3VwZGF0ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0aWYgKG1hdGNoSGVpZ2h0Ll9iZWZvcmVVcGRhdGUpIHtcblx0XHRcdG1hdGNoSGVpZ2h0Ll9iZWZvcmVVcGRhdGUoZXZlbnQsIG1hdGNoSGVpZ2h0Ll9ncm91cHMpO1xuXHRcdH1cblxuXHRcdCQuZWFjaChtYXRjaEhlaWdodC5fZ3JvdXBzLCBmdW5jdGlvbigpIHtcblx0XHRcdG1hdGNoSGVpZ2h0Ll9hcHBseSh0aGlzLmVsZW1lbnRzLCB0aGlzLm9wdGlvbnMpO1xuXHRcdH0pO1xuXG5cdFx0aWYgKG1hdGNoSGVpZ2h0Ll9hZnRlclVwZGF0ZSkge1xuXHRcdFx0bWF0Y2hIZWlnaHQuX2FmdGVyVXBkYXRlKGV2ZW50LCBtYXRjaEhlaWdodC5fZ3JvdXBzKTtcblx0XHR9XG5cdH07XG5cblx0bWF0Y2hIZWlnaHQuX3VwZGF0ZSA9IGZ1bmN0aW9uKHRocm90dGxlLCBldmVudCkge1xuXHRcdC8vIHByZXZlbnQgdXBkYXRlIGlmIGZpcmVkIGZyb20gYSByZXNpemUgZXZlbnRcblx0XHQvLyB3aGVyZSB0aGUgdmlld3BvcnQgd2lkdGggaGFzbid0IGFjdHVhbGx5IGNoYW5nZWRcblx0XHQvLyBmaXhlcyBhbiBldmVudCBsb29waW5nIGJ1ZyBpbiBJRThcblx0XHRpZiAoZXZlbnQgJiYgZXZlbnQudHlwZSA9PT0gJ3Jlc2l6ZScpIHtcblx0XHRcdHZhciB3aW5kb3dXaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuXHRcdFx0aWYgKHdpbmRvd1dpZHRoID09PSBfcHJldmlvdXNSZXNpemVXaWR0aCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHRfcHJldmlvdXNSZXNpemVXaWR0aCA9IHdpbmRvd1dpZHRoO1xuXHRcdH1cblxuXHRcdC8vIHRocm90dGxlIHVwZGF0ZXNcblx0XHRpZiAoIXRocm90dGxlKSB7XG5cdFx0XHRfdXBkYXRlKGV2ZW50KTtcblx0XHR9IGVsc2UgaWYgKF91cGRhdGVUaW1lb3V0ID09PSAtMSkge1xuXHRcdFx0X3VwZGF0ZVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRfdXBkYXRlKGV2ZW50KTtcblx0XHRcdFx0X3VwZGF0ZVRpbWVvdXQgPSAtMTtcblx0XHRcdH0sIG1hdGNoSGVpZ2h0Ll90aHJvdHRsZSk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qXG5cdCogIGJpbmQgZXZlbnRzXG5cdCovXG5cblx0Ly8gYXBwbHkgb24gRE9NIHJlYWR5IGV2ZW50XG5cdCQobWF0Y2hIZWlnaHQuX2FwcGx5RGF0YUFwaSk7XG5cblx0Ly8gdXBkYXRlIGhlaWdodHMgb24gbG9hZCBhbmQgcmVzaXplIGV2ZW50c1xuXHQkKHdpbmRvdykuYmluZCgnbG9hZCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0bWF0Y2hIZWlnaHQuX3VwZGF0ZShmYWxzZSwgZXZlbnQpO1xuXHR9KTtcblxuXHQvLyB0aHJvdHRsZWQgdXBkYXRlIGhlaWdodHMgb24gcmVzaXplIGV2ZW50c1xuXHQkKHdpbmRvdykuYmluZCgncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRtYXRjaEhlaWdodC5fdXBkYXRlKHRydWUsIGV2ZW50KTtcblx0fSk7XG5cbn0pOyJdfQ==
