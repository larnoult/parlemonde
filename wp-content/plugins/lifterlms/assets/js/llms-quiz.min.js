!function(c){var t={$buttons:null,$container:null,$ui:null,attempt_key:null,current_question:0,total_questions:0,questions:{},validators:{},status:null,bind:function(){var e=this;c("#llms_start_quiz").on("click",function(t){t.preventDefault(),e.start_quiz()}),c(".llms-donut").each(function(){LLMS.Donut(c(this))}),c("#llms-quiz-attempt-select").on("change",function(){var t=c(this).val();t&&(window.location.href=t)}),c(window).on("beforeunload",function(){if(e.status)return LLMS.l10n.translate("Are you sure you wish to quit this quiz attempt?")}),c(window).on("unload",function(){e.status&&e.complete_quiz()}),c(document).on("llms-post-append-question",e.post_append_question),this.register_validator("content",this.validate),this.register_validator("choice",this.validate_choice),this.register_validator("picture_choice",this.validate_choice),this.register_validator("true_false",this.validate_choice)},add_error:function(t){this.$container.find(".llms-error").remove();var e=c('<p class="llms-error">'+t+'<a href="#"><i class="fa fa-times-circle" aria-hidden="true"></i></a></p>');e.on("click","a",function(t){t.preventDefault(),e.fadeOut("200"),setTimeout(function(){e.remove()},210)}),this.$container.append(e)},answer_question:function(e){var t,s=this,i=this.$container.find(".llms-question-wrapper"),n=i.attr("data-type");if(this.validators[n]){if(!(t=this.validators[n](i))||!0!==t.valid||!t.answer)return s.add_error(t.valid);LLMS.Ajax.call({data:{action:"quiz_answer_question",answer:t.answer,attempt_key:s.attempt_key,question_id:i.attr("data-id"),question_type:i.attr("data-type")},beforeSend:function(){var t=e.hasClass("llms-button-quiz-complete")?LLMS.l10n.translate("Grading Quiz..."):LLMS.l10n.translate("Loading Question...");s.toggle_loader("show",t),s.update_progress_bar("increment")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.question_id&&s.questions["q-"+t.data.question_id]?s.load_question(s.questions["q-"+t.data.question_id]):s.load_question(t.data.html);else if(t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})}else console.log("No validator registered for question type "+n)},complete_quiz:function(){var s=this;LLMS.Ajax.call({data:{action:"quiz_end",attempt_key:s.attempt_key},beforeSend:function(){s.toggle_loader("show","Grading Quiz...")},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.redirect)s.redirect(t.data.redirect);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}})},get_question_index:function(t){return Object.keys(this.questions).indexOf("q-"+t)},redirect:function(t){this.toggle_loader("show","Grading Quiz..."),this.status=null,window.location.href=t},previous_question:function(){var t=this;t.toggle_loader("show",LLMS.l10n.translate("Loading Question...")),t.update_progress_bar("decrement");var e=Object.keys(t.questions),s=e.indexOf("q-"+t.current_question),i=e[0];1<=s&&(i=e[s-1]),setTimeout(function(){t.toggle_loader("hide"),t.load_question(t.questions[i])},100)},register_validator:function(t,e){this.validators[t]=e},start_quiz:function(){var s=this;this.load_ui_elements(),this.$ui=c("#llms-quiz-ui"),this.$buttons=c("#llms-quiz-nav button"),this.$container=c("#llms-quiz-question-wrapper"),c("#llms-next-question, #llms-complete-quiz").on("click",function(t){t.preventDefault(),s.answer_question(c(this))}),c("#llms-prev-question").on("click",function(t){t.preventDefault(),s.previous_question()}),LLMS.Ajax.call({data:{action:"quiz_start",attempt_key:c("#llms-attempt-key").val(),lesson_id:c("#llms-lesson-id").val(),quiz_id:c("#llms-quiz-id").val()},beforeSend:function(){s.status=!0,c("#llms-quiz-wrapper, #quiz-start-button").remove(),c("html, body").stop().animate({scrollTop:0},500),s.toggle_loader("show",LLMS.l10n.translate("Loading Quiz..."))},error:function(t,e,s){console.log(t,e,s)},success:function(t){if(s.toggle_loader("hide"),t.data&&t.data.html)t.data.time_limit&&s.start_quiz_timer(t.data.time_limit),s.attempt_key=t.data.attempt_key,s.total_questions=t.data.total,s.load_question(t.data.html);else if(t.message)s.$container.append("<p>"+t.message+"</p>");else{var e=LLMS.l10n.translate("An unknown error occurred. Please try again.");s.$container.append("<p>"+e+"</p>")}}}),this.$ui.on("touchstart","li.llms-choice label",function(t){c(this).click()})},start_quiz_timer:function(t){var e=c('<div class="llms-quiz-timer" id="llms-quiz-timer" />'),s=LLMS.l10n.translate("Time Remaining");e.append('<i class="fa fa-clock-o" aria-hidden="true"></i><span class="screen-reader-text">'+s+"</span>"),e.append('<div id="llms-tiles" class="llms-tiles"></div>'),c("#llms-quiz-header").append(e);var i,n,a,l,o=this,r=(new Date).getTime()+60*t*1e3,u=60*t*1e3,d=document.getElementById("llms-tiles");setTimeout(function(){o.complete_quiz()},u+1e3),this.getCountdown(t,r,u,i,n,a,l,d),setInterval(function(){o.getCountdown(t,r,u,i,n,a,l,d)},1e3)},trigger:function(t){"answer_question"===t&&(this.get_question_index(this.current_question)===this.total_questions?c("#llms-complete-quiz").trigger("click"):c("#llms-next-question").trigger("click"))},load_question:function(t){var e=c(t),s=e.attr("data-id");this.questions["q-"+s]||(this.questions["q-"+s]=e),this.update_progress(s),this.current_question=s,c(document).trigger("llms-pre-append-question",e),this.$container.append(e),c(document).trigger("llms-post-append-question",e)},load_ui_elements:function(){var t=c('<div class="llms-quiz-ui" id="llms-quiz-ui" />'),e=c('<header class="llms-quiz-header" id="llms-quiz-header" />');$footer=c('<footer class="llms-quiz-nav" id="llms-quiz-nav" />'),$footer.append('<button class="button large llms-button-action" id="llms-next-question" name="llms_next_question" type="submit">'+LLMS.l10n.translate("Next Question")+"</button>"),$footer.append('<button class="button large llms-button-action llms-button-quiz-complete" id="llms-complete-quiz" name="llms_complete_quiz" type="submit" style="display:none;">'+LLMS.l10n.translate("Complete Quiz")+"</button>"),$footer.append('<button class="button llms-button-secondary" id="llms-prev-question" name="llms_prev_question" type="submit" style="display:none;">'+LLMS.l10n.translate("Previous Question")+"</button>"),e.append('<div class="llms-progress"><div class="progress-bar-complete"></div></div>'),$footer.append('<div class="llms-quiz-counter" id="llms-quiz-counter"><span class="llms-current"></span><span class="llms-sep">/</span><span class="llms-total"></span></div>'),t.append(e).append('<div class="llms-quiz-question-wrapper" id="llms-quiz-question-wrapper" />').append($footer),c("#llms-quiz-wrapper").after(t)},post_append_question:function(t,e){c(e).find("audio").length&&wp.mediaelement.initialize()},toggle_loader:function(t,e){"show"===t?(e=e||LLMS.l10n.translate("Loading..."),this.$buttons.attr("disabled","disabled"),this.$container.empty(),LLMS.Spinner.start(this.$container),this.$container.append('<div class="llms-quiz-loading">'+LLMS.l10n.translate(e)+"</div>")):(LLMS.Spinner.stop(this.$container),this.$buttons.removeAttr("disabled"),this.$container.find(".llms-quiz-loading").remove())},update_progress:function(t){var e=this.get_question_index(t);-1!==e&&(e++,c("#llms-quiz-counter .llms-current").text(e),1===e&&(c("#llms-quiz-counter .llms-total").text(this.total_questions),c("#llms-quiz-counter").show()),2<=e?c("#llms-prev-question").show():c("#llms-prev-question").hide(),e===this.total_questions?(c("#llms-next-question").hide(),c("#llms-complete-quiz").show()):(c("#llms-next-question").show(),c("#llms-complete-quiz").hide()))},update_progress_bar:function(t){var e=this.get_question_index(this.current_question);"increment"===t?e++:e--,progress=e/this.total_questions*100,this.$ui.find(".progress-bar-complete").css("width",progress+"%")},getCountdown:function(t,e,s,i,n,a,l,o){var r=(e-(new Date).getTime())/1e3;0<=r&&(1e3*r<s/2&&c("#llms-quiz-timer").addClass("color-half"),1e3*r<s/4&&(c("#llms-quiz-timer").removeClass("color-half"),c("#llms-quiz-timer").addClass("color-empty")),this.pad(parseInt(r/86400)),r%=86400,n=this.pad(parseInt(r/3600)),r%=3600,a=this.pad(parseInt(r/60)),l=this.pad(parseInt(r%60)),o.innerHTML='<span class="hours">'+n+'</span>:<span class="minutes">'+a+'</span>:<span class="seconds">'+l+"</span>")},pad:function(t){return(t<10?"0":"")+t},validate:function(t){return{answer:[],valid:!0}},validate_choice:function(t){var e=window.llms.quizzes.validate(t),s=t.find("input:checked");return s.length?s.each(function(){e.answer.push(c(this).val())}):e.valid=LLMS.l10n.translate("You must select an answer to continue."),e}};t.bind(),window.llms=window.llms||{},window.llms.quizzes=t}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxsbXMtcXVpei5qcyJdLCJuYW1lcyI6WyIkIiwicXVpeiIsIiRidXR0b25zIiwiJGNvbnRhaW5lciIsIiR1aSIsImF0dGVtcHRfa2V5IiwiY3VycmVudF9xdWVzdGlvbiIsInRvdGFsX3F1ZXN0aW9ucyIsInF1ZXN0aW9ucyIsInZhbGlkYXRvcnMiLCJzdGF0dXMiLCJiaW5kIiwic2VsZiIsInRoaXMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInN0YXJ0X3F1aXoiLCJlYWNoIiwiTExNUyIsIkRvbnV0IiwidmFsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibDEwbiIsInRyYW5zbGF0ZSIsImNvbXBsZXRlX3F1aXoiLCJkb2N1bWVudCIsInBvc3RfYXBwZW5kX3F1ZXN0aW9uIiwicmVnaXN0ZXJfdmFsaWRhdG9yIiwidmFsaWRhdGUiLCJ2YWxpZGF0ZV9jaG9pY2UiLCJhZGRfZXJyb3IiLCJtc2ciLCJmaW5kIiwicmVtb3ZlIiwiJGVyciIsImZhZGVPdXQiLCJzZXRUaW1lb3V0IiwiYXBwZW5kIiwiYW5zd2VyX3F1ZXN0aW9uIiwiJGJ0biIsInZhbGlkIiwiJHF1ZXN0aW9uIiwidHlwZSIsImF0dHIiLCJhbnN3ZXIiLCJBamF4IiwiY2FsbCIsImRhdGEiLCJhY3Rpb24iLCJxdWVzdGlvbl9pZCIsInF1ZXN0aW9uX3R5cGUiLCJiZWZvcmVTZW5kIiwiaGFzQ2xhc3MiLCJ0b2dnbGVfbG9hZGVyIiwidXBkYXRlX3Byb2dyZXNzX2JhciIsInN1Y2Nlc3MiLCJyIiwiaHRtbCIsImxvYWRfcXVlc3Rpb24iLCJyZWRpcmVjdCIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiZ2V0X3F1ZXN0aW9uX2luZGV4IiwicWlkIiwiT2JqZWN0Iiwia2V5cyIsImluZGV4T2YiLCJ1cmwiLCJwcmV2aW91c19xdWVzdGlvbiIsImlkcyIsImN1cnIiLCJwcmV2X2lkIiwiZnVuYyIsImxvYWRfdWlfZWxlbWVudHMiLCJsZXNzb25faWQiLCJxdWl6X2lkIiwic3RvcCIsImFuaW1hdGUiLCJzY3JvbGxUb3AiLCJlcnJvciIsInMiLCJ0IiwidGltZV9saW1pdCIsInN0YXJ0X3F1aXpfdGltZXIiLCJ0b3RhbCIsImV2ZW50IiwiY2xpY2siLCJ0b3RhbF9taW51dGVzIiwiJGVsIiwiZGF5cyIsImhvdXJzIiwibWludXRlcyIsInNlY29uZHMiLCJ0YXJnZXRfZGF0ZSIsIkRhdGUiLCJnZXRUaW1lIiwiY291bnRkb3duIiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb3VudGRvd24iLCJzZXRJbnRlcnZhbCIsInRyaWdnZXIiLCIkaHRtbCIsInVwZGF0ZV9wcm9ncmVzcyIsIiRoZWFkZXIiLCIkZm9vdGVyIiwiYWZ0ZXIiLCJsZW5ndGgiLCJ3cCIsIm1lZGlhZWxlbWVudCIsImluaXRpYWxpemUiLCJkaXNwbGF5IiwiZW1wdHkiLCJTcGlubmVyIiwic3RhcnQiLCJyZW1vdmVBdHRyIiwiaW5kZXgiLCJ0ZXh0Iiwic2hvdyIsImhpZGUiLCJkaXIiLCJwcm9ncmVzcyIsImNzcyIsInNlY29uZHNfbGVmdCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJwYWQiLCJwYXJzZUludCIsImlubmVySFRNTCIsIm4iLCJyZXQiLCJsbG1zIiwicXVpenplcyIsImNoZWNrZWQiLCJwdXNoIiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FTQyxTQUFZQSxHQUVaLElBQUlDLEVBQU8sQ0FNVkMsU0FBVSxLQU1WQyxXQUFZLEtBTVpDLElBQUssS0FNTEMsWUFBYSxLQU1iQyxpQkFBa0IsRUFNbEJDLGdCQUFpQixFQU1qQkMsVUFBVyxHQU9YQyxXQUFZLEdBU1pDLE9BQVEsS0FRUkMsS0FBTSxXQUVMLElBQUlDLEVBQU9DLEtBR1hiLEVBQUcsb0JBQXFCYyxHQUFJLFFBQVMsU0FBVUMsR0FDOUNBLEVBQUVDLGlCQUNGSixFQUFLSyxlQUlOakIsRUFBRyxlQUFnQmtCLEtBQU0sV0FDeEJDLEtBQUtDLE1BQU9wQixFQUFHYSxTQUloQmIsRUFBRyw2QkFBOEJjLEdBQUksU0FBVSxXQUM5QyxJQUFJTyxF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cUcsRUFBUTFCLE9BR2IwQixFQUFRdEgsS0FBTSxXQUNibUgsRUFBSXRGLE9BQU8wRixLQUFNekksRUFBR2EsTUFBT1EsU0FINUJnSCxFQUFJMUYsTUFBUXhCLEtBQUtNLEtBQUtDLFVBQVcsMENBTzNCMkcsSUFNVHBJLEVBQUtVLE9BRUxXLE9BQU9nSCxLQUFPaEgsT0FBT2dILE1BQVEsR0FDN0JoSCxPQUFPZ0gsS0FBS0MsUUFBVXRJLEVBM3dCdEIsQ0E2d0JJeUkiLCJmaWxlIjoibGxtcy1xdWl6Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBMTE1TLCAkICovXG4vKiBqc2hpbnQgc3RyaWN0OiB0cnVlICovXG5cbi8qKlxuICogRnJvbnQgRW5kIFF1aXogQ2xhc3NcbiAqIEB0eXBlICAgICB7T2JqZWN0fVxuICogQHNpbmNlICAgIDEuMC4wXG4gKiBAdmVyc2lvbiAgMy4xNi45XG4gKi9cbjsoIGZ1bmN0aW9uKCAkICkge1xuXG5cdHZhciBxdWl6ID0ge1xuXG5cdFx0LyoqXG5cdFx0ICogU2VsZWN0b3Igb2YgYWxsIHRoZSBhdmFpbGFibGUgYnV0dG9uIGVsZW1lbnNcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JGJ1dHRvbnM6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBNYWluIFF1ZXN0aW9uIENvbnRhaW5lciBFbGVtZW50XG5cdFx0ICogQHR5cGUgIG9ialxuXHRcdCAqL1xuXHRcdCRjb250YWluZXI6IG51bGwsXG5cblx0XHQvKipcblx0XHQgKiBNYWluIFF1aXogY29udGFpbmVyIFVJIGVsZW1lbnRcblx0XHQgKiBAdHlwZSAgb2JqXG5cdFx0ICovXG5cdFx0JHVpOiBudWxsLFxuXG5cdFx0LyoqXG5cdFx0ICogQXR0ZW1wdCBrZXkgZm9yIHRoZSBjdXJyZW50IHF1aXpcblx0XHQgKiBAdHlwZSAge1t0eXBlXX1cblx0XHQgKi9cblx0XHRhdHRlbXB0X2tleTogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIFF1ZXN0aW9uIElEIG9mIHRoZSBjdXJyZW50IHF1ZXN0aW9uXG5cdFx0ICogQHR5cGUgIHtOdW1iZXJ9XG5cdFx0ICovXG5cdFx0Y3VycmVudF9xdWVzdGlvbjogMCxcblxuXHRcdC8qKlxuXHRcdCAqIFRvdGFsIG51bWJlciBvZiBxdWVzdGlvbnMgaW4gdGhlIGN1cnJlbnQgcXVpelxuXHRcdCAqIEB0eXBlICB7TnVtYmVyfVxuXHRcdCAqL1xuXHRcdHRvdGFsX3F1ZXN0aW9uczogMCxcblxuXHRcdC8qKlxuXHRcdCAqIE9iamVjdCBvZiBxdWl6IHF1ZXN0aW9uIEhUTUxcblx0XHQgKiBAdHlwZSAge09iamVjdH1cblx0XHQgKi9cblx0XHRxdWVzdGlvbnM6IHt9LFxuXG5cdFx0LyoqXG5cdFx0ICogVmFsaWRhdG9yIGZ1bmN0aW9ucyBmb3IgcXVlc3Rpb24gdHlwZXNcblx0XHQgKiBUaGlyZCBwYXJ0eSBjdXN0b20gcXVlc3Rpb24gdHlwZXMgY2FuIHJlZ2lzdGVyIHZhbGlkYXRvcnMgZm9yIHVzZSB3aGVuIGFuc3dlcmluZyBxdWVzdGlvc25cblx0XHQgKiBAdHlwZSAge09iamVjdH1cblx0XHQgKi9cblx0XHR2YWxpZGF0b3JzOiB7fSxcblxuXHRcdC8qKlxuXHRcdCAqIFJlY29yZHMgY3VycmVudCBzdGF0dXMgb2YgYSBxdWl6IHNlc3Npb25cblx0XHQgKiBJZiBhIHVzZXIgYXR0ZW1wdHMgdG8gbmF2aWdhdGUgYXdheSBmcm9tIGEgcXVpelxuXHRcdCAqIHdoaWxlIHRha2luZyB0aGUgcXVpeiB0aGV5J2xsIGJlIHdhcm5lZCB0aGF0IHRoZWlyIHByb2dyZXNzXG5cdFx0ICogd2lsbCBub3QgYmUgc2F2ZWQgaWYgdGhpcyBzdGF0dXMgaXMgbm90IG51bGxcblx0XHQgKiBAdHlwZSAgYm9vbGVhblxuXHRcdCAqL1xuXHRcdHN0YXR1czogbnVsbCxcblxuXHRcdC8qKlxuXHRcdCAqIEJpbmQgRE9NIGV2ZW50c1xuXHRcdCAqIEByZXR1cm4gdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRiaW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvLyBzdGFydCBxdWl6XG5cdFx0XHQkKCAnI2xsbXNfc3RhcnRfcXVpeicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5zdGFydF9xdWl6KCk7XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIGRyYXcgcXVpeiBncmFkZSBjaXJjdWxhciBjaGFydFxuXHRcdFx0JCggJy5sbG1zLWRvbnV0JyApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRMTE1TLkRvbnV0KCAkKCB0aGlzICkgKTtcblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gcmVkaXJlY3QgdG8gYXR0ZW1wdCBvbiBhdHRlbXB0IHNlbGVjdGlvbiBjaGFuZ2Vcblx0XHRcdCQoICcjbGxtcy1xdWl6LWF0dGVtcHQtc2VsZWN0JyApLm9uKCAnY2hhbmdlJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciB2YWwgPSAkKCB0aGlzICkudmFsKCk7XG5cdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdmFsO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cblx0XHRcdC8vIHdhcm4gd2hlbiBxdWl6IGlzIHJ1bm5pbmcgYW5kIHVzZXIgdHJpZXMgdG8gbGVhdmUgdGhlIHBhZ2Vcblx0XHRcdCQoIHdpbmRvdyApLm9uKCAnYmVmb3JldW5sb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc2VsZi5zdGF0dXMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIExMTVMubDEwbi50cmFuc2xhdGUoICdBcmUgeW91IHN1cmUgeW91IHdpc2ggdG8gcXVpdCB0aGlzIHF1aXogYXR0ZW1wdD8nICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0Ly8gY29tcGxldGUgdGhlIHF1aXogYXR0ZW1wdCB3aGVuIHVzZXIgbGVhdmVzIGlmIHRoZSBxdWl6IGlzIHJ1bm5pbmdcblx0XHRcdCQoIHdpbmRvdyApLm9uKCAndW5sb2FkJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggc2VsZi5zdGF0dXMgKSB7XG5cdFx0XHRcdFx0c2VsZi5jb21wbGV0ZV9xdWl6KCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblxuXHRcdFx0JCggZG9jdW1lbnQgKS5vbiggJ2xsbXMtcG9zdC1hcHBlbmQtcXVlc3Rpb24nLCBzZWxmLnBvc3RfYXBwZW5kX3F1ZXN0aW9uICk7XG5cblx0XHRcdC8vIHJlZ2lzdGVyIHZhbGlkYXRvcnNcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAnY29udGVudCcsIHRoaXMudmFsaWRhdGUgKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAnY2hvaWNlJywgdGhpcy52YWxpZGF0ZV9jaG9pY2UgKTtcblx0XHRcdHRoaXMucmVnaXN0ZXJfdmFsaWRhdG9yKCAncGljdHVyZV9jaG9pY2UnLCB0aGlzLnZhbGlkYXRlX2Nob2ljZSApO1xuXHRcdFx0dGhpcy5yZWdpc3Rlcl92YWxpZGF0b3IoICd0cnVlX2ZhbHNlJywgdGhpcy52YWxpZGF0ZV9jaG9pY2UgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBZGQgYW4gZXJyb3IgbWVzc2FnZSB0byB0aGUgVUlcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgbXNnICBlcnJvciBtZXNzYWdlIHN0cmluZ1xuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHRhZGRfZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi4kY29udGFpbmVyLmZpbmQoICcubGxtcy1lcnJvcicgKS5yZW1vdmUoKTtcblx0XHRcdHZhciAkZXJyID0gJCggJzxwIGNsYXNzPVwibGxtcy1lcnJvclwiPicgKyBtc2cgKyAnPGEgaHJlZj1cIiNcIj48aSBjbGFzcz1cImZhIGZhLXRpbWVzLWNpcmNsZVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+PC9wPicgKTtcblx0XHRcdCRlcnIub24oICdjbGljaycsICdhJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0JGVyci5mYWRlT3V0KCAnMjAwJyApO1xuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQkZXJyLnJlbW92ZSgpO1xuXHRcdFx0XHR9LCAyMTAgKTtcblx0XHRcdH0gKTtcblx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICRlcnIgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBBbnN3ZXIgYSBRdWVzdGlvblxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkYnRuICAgalF1ZXJ5IG9iamVjdCBmb3IgdGhlIFwiTmV4dCBMZXNzb25cIiBidXR0b25cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAxLjAuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRhbnN3ZXJfcXVlc3Rpb246IGZ1bmN0aW9uKCAkYnRuICkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXG5cdFx0XHRcdCRxdWVzdGlvbiA9IHRoaXMuJGNvbnRhaW5lci5maW5kKCAnLmxsbXMtcXVlc3Rpb24td3JhcHBlcicgKSxcblx0XHRcdFx0dHlwZSA9ICRxdWVzdGlvbi5hdHRyKCAnZGF0YS10eXBlJyApLFxuXHRcdFx0XHR2YWxpZDtcblxuXHRcdFx0aWYgKCAhIHRoaXMudmFsaWRhdG9yc1sgdHlwZSBdICkge1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKCAnTm8gdmFsaWRhdG9yIHJlZ2lzdGVyZWQgZm9yIHF1ZXN0aW9uIHR5cGUgJyArIHR5cGUgKTtcblx0XHRcdFx0cmV0dXJuO1xuXG5cdFx0XHR9XG5cblx0XHRcdHZhbGlkID0gdGhpcy52YWxpZGF0b3JzWyB0eXBlIF0oICRxdWVzdGlvbiApO1xuXHRcdFx0aWYgKCAhIHZhbGlkIHx8IHRydWUgIT09IHZhbGlkLnZhbGlkIHx8ICF2YWxpZC5hbnN3ZXIgKSB7XG5cdFx0XHRcdHJldHVybiBzZWxmLmFkZF9lcnJvciggdmFsaWQudmFsaWQgKTtcblx0XHRcdH1cblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfYW5zd2VyX3F1ZXN0aW9uJyxcblx0XHRcdFx0XHRhbnN3ZXI6IHZhbGlkLmFuc3dlcixcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogc2VsZi5hdHRlbXB0X2tleSxcblx0XHRcdFx0XHRxdWVzdGlvbl9pZDogJHF1ZXN0aW9uLmF0dHIoICdkYXRhLWlkJyApLFxuXHRcdFx0XHRcdHF1ZXN0aW9uX3R5cGU6ICRxdWVzdGlvbi5hdHRyKCAnZGF0YS10eXBlJyApLFxuXHRcdFx0XHR9LFxuXHRcdFx0XHRiZWZvcmVTZW5kOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdHZhciBtc2cgPSAkYnRuLmhhc0NsYXNzKCAnbGxtcy1idXR0b24tcXVpei1jb21wbGV0ZScgKSA/IExMTVMubDEwbi50cmFuc2xhdGUoICdHcmFkaW5nIFF1aXouLi4nICkgOiBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZyBRdWVzdGlvbi4uLicgKTtcblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgbXNnICk7XG5cblx0XHRcdFx0XHRzZWxmLnVwZGF0ZV9wcm9ncmVzc19iYXIoICdpbmNyZW1lbnQnICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0c3VjY2VzczogZnVuY3Rpb24oIHIgKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdoaWRlJyApO1xuXG5cdFx0XHRcdFx0aWYgKCByLmRhdGEgJiYgci5kYXRhLmh0bWwgKSB7XG5cblx0XHRcdFx0XHRcdC8vIGxvYWQgaHRtbCBmcm9tIHRoZSBjYWNoZWQgcXVlc3Rpb25zIGlmIGl0IGV4aXN0cyBhbHJlYWR5XG5cdFx0XHRcdFx0XHRpZiAoIHIuZGF0YS5xdWVzdGlvbl9pZCAmJiBzZWxmLnF1ZXN0aW9uc1sgJ3EtJyArIHIuZGF0YS5xdWVzdGlvbl9pZCBdICkge1xuXG5cdFx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggc2VsZi5xdWVzdGlvbnNbICdxLScgKyByLmRhdGEucXVlc3Rpb25faWQgXSApO1xuXG5cdFx0XHRcdFx0XHQvLyBsb2FkIGh0bWwgZnJvbSBzZXJ2ZXIgaWYgdGhlIHF1ZXN0aW9uJ3MgbmV2ZXIgYmVlbiBzZWVuIGJlZm9yZVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCByLmRhdGEuaHRtbCApO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5kYXRhICYmIHIuZGF0YS5yZWRpcmVjdCApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi5yZWRpcmVjdCggci5kYXRhLnJlZGlyZWN0ICk7XG5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKCByLm1lc3NhZ2UgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgci5tZXNzYWdlICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHR2YXIgbXNnID0gTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uJyApO1xuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyBtc2cgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9XG5cblx0XHRcdH0gKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDb21wbGV0ZSB0aGUgcXVpelxuXHRcdCAqIENhbGxlZCB3aGVuIHRpbWVkIHF1aXp6ZXMgcmVhY2ggdGltZSBsaW1pdFxuXHRcdCAqICYgZHVyaW5nIHVubG9hZCBldmVudHMgdG8gcmVjb3JkIHRoZSBhdHRlbXB0IGFzIGFiYW5kb25lZFxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuOS4wXG5cdFx0ICovXG5cdFx0Y29tcGxldGVfcXVpejogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0TExNUy5BamF4LmNhbGwoIHtcblx0XHRcdFx0ZGF0YToge1xuXHRcdFx0XHRcdGFjdGlvbjogJ3F1aXpfZW5kJyxcblx0XHRcdFx0XHRhdHRlbXB0X2tleTogc2VsZi5hdHRlbXB0X2tleSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRzZWxmLnRvZ2dsZV9sb2FkZXIoICdzaG93JywgJ0dyYWRpbmcgUXVpei4uLicgKTtcblxuXHRcdFx0XHR9LFxuXHRcdFx0XHRzdWNjZXNzOiBmdW5jdGlvbiggciApIHtcblxuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ2hpZGUnICk7XG5cblx0XHRcdFx0XHRpZiAoIHIuZGF0YSAmJiByLmRhdGEucmVkaXJlY3QgKSB7XG5cblx0XHRcdFx0XHRcdHNlbGYucmVkaXJlY3QoIHIuZGF0YS5yZWRpcmVjdCApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggci5tZXNzYWdlICkge1xuXG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIHIubWVzc2FnZSArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0dmFyIG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicgKTtcblx0XHRcdFx0XHRcdHNlbGYuJGNvbnRhaW5lci5hcHBlbmQoICc8cD4nICsgbXNnICsgJzwvcD4nICk7XG5cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fVxuXG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0cmlldmUgdGhlIGluZGV4IG9mIGEgcXVlc3Rpb24gYnkgcXVlc3Rpb24gaWRcblx0XHQgKiBAcGFyYW0gICAgaW50ICAgcWlkICBXUCBQb3N0IElEIG9mIHRoZSBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICBpbnRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdGdldF9xdWVzdGlvbl9pbmRleDogZnVuY3Rpb24oIHFpZCApIHtcblxuXHRcdFx0cmV0dXJuIE9iamVjdC5rZXlzKCB0aGlzLnF1ZXN0aW9ucyApLmluZGV4T2YoICdxLScgKyBxaWQgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWRpcmVjdCBvbiBxdWl6IGNvbWxwZXRpb24gLyB0aW1lb3V0XG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIHVybCAgcmVkaXJlY3QgdXJsXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy45LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0cmVkaXJlY3Q6IGZ1bmN0aW9uKCB1cmwgKSB7XG5cblx0XHRcdHRoaXMudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCAnR3JhZGluZyBRdWl6Li4uJyApO1xuXHRcdFx0dGhpcy5zdGF0dXMgPSBudWxsO1xuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJuIHRvIHRoZSBwcmV2aW91cyBxdWVzdGlvblxuXHRcdCAqIEByZXR1cm4gICB2b2lkXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdCBcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRwcmV2aW91c19xdWVzdGlvbjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdHZhciBzZWxmID0gdGhpcztcblxuXHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnc2hvdycsIExMTVMubDEwbi50cmFuc2xhdGUoICdMb2FkaW5nIFF1ZXN0aW9uLi4uJyApICk7XG5cdFx0XHRzZWxmLnVwZGF0ZV9wcm9ncmVzc19iYXIoICdkZWNyZW1lbnQnICk7XG5cblx0XHRcdHZhciBpZHMgPSBPYmplY3Qua2V5cyggc2VsZi5xdWVzdGlvbnMgKSxcblx0XHRcdFx0Y3VyciA9IGlkcy5pbmRleE9mKCAncS0nICsgc2VsZi5jdXJyZW50X3F1ZXN0aW9uICksXG5cdFx0XHRcdHByZXZfaWQgPSBpZHNbMF07XG5cblx0XHRcdGlmICggY3VyciA+PSAxICkge1xuXHRcdFx0XHRwcmV2X2lkID0gaWRzWyBjdXJyIC0gMSBdO1xuXHRcdFx0fVxuXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblx0XHRcdFx0c2VsZi5sb2FkX3F1ZXN0aW9uKCBzZWxmLnF1ZXN0aW9uc1sgcHJldl9pZCBdICk7XG5cdFx0XHR9LCAxMDAgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBSZWdpc3RlciBxdWVzdGlvbiB0eXBlIHZhbGlkYXRvciBmdW5jdGlvbnNcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgICB0eXBlICBxdWVzdGlvbiB0eXBlIGlkXG5cdFx0ICogQHBhcmFtICAgIGZ1bmN0aW9uICAgZnVuYyAgY2FsbGJhY2sgZnVuY3Rpb24gdG8gdmFsaWRhdGUgdGhlIHF1ZXN0aW9uIHdpdGhcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0cmVnaXN0ZXJfdmFsaWRhdG9yOiBmdW5jdGlvbiggdHlwZSwgZnVuYyApIHtcblxuXHRcdFx0dGhpcy52YWxpZGF0b3JzWyB0eXBlIF0gPSBmdW5jO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFN0YXJ0IGEgUXVpeiB2aWEgQUpBWCBjYWxsXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0XHQgKiBAdmVyc2lvbiAgMy4yMS4wXG5cdFx0ICovXG5cdFx0c3RhcnRfcXVpejogZnVuY3Rpb24gKCkge1xuXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XG5cblx0XHRcdHRoaXMubG9hZF91aV9lbGVtZW50cygpO1xuXHRcdFx0dGhpcy4kdWkgPSAkKCAnI2xsbXMtcXVpei11aScgKTtcblx0XHRcdHRoaXMuJGJ1dHRvbnMgPSAkKCAnI2xsbXMtcXVpei1uYXYgYnV0dG9uJyApO1xuXHRcdFx0dGhpcy4kY29udGFpbmVyID0gJCggJyNsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlcicgKTtcblxuXHRcdFx0Ly8gYmluZCBzdW1iaXNzaW9uIGV2ZW50IGZvciBhbnN3ZXJpbmcgcXVlc3Rpb25zXG5cdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbiwgI2xsbXMtY29tcGxldGUtcXVpeicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5hbnN3ZXJfcXVlc3Rpb24oICQoIHRoaXMgKSApO1xuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyBiaW5kIHN1Ym1pc3Npb24gZXZlbnQgZm9yIG5hdmlnYXRpbmcgYmFja3dhcmRzXG5cdFx0XHQkKCAnI2xsbXMtcHJldi1xdWVzdGlvbicgKS5vbiggJ2NsaWNrJywgZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0c2VsZi5wcmV2aW91c19xdWVzdGlvbigpO1xuXHRcdFx0fSApO1xuXG5cdFx0XHRMTE1TLkFqYXguY2FsbCgge1xuXHRcdFx0XHRkYXRhOiB7XG5cdFx0XHRcdFx0YWN0aW9uOiAncXVpel9zdGFydCcsXG5cdFx0XHRcdFx0YXR0ZW1wdF9rZXk6ICQoICcjbGxtcy1hdHRlbXB0LWtleScgKS52YWwoKSxcblx0XHRcdFx0XHRsZXNzb25faWQgOiAkKCAnI2xsbXMtbGVzc29uLWlkJyApLnZhbCgpLFxuXHRcdFx0XHRcdHF1aXpfaWQgOiAkKCAnI2xsbXMtcXVpei1pZCcgKS52YWwoKSxcblx0XHRcdFx0fSxcblx0XHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRzZWxmLnN0YXR1cyA9IHRydWU7XG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotd3JhcHBlciwgI3F1aXotc3RhcnQtYnV0dG9uJyApLnJlbW92ZSgpO1xuXHRcdFx0XHRcdCQoICdodG1sLCBib2R5JyApLnN0b3AoKS5hbmltYXRlKCB7c2Nyb2xsVG9wOiAwIH0sIDUwMCApO1xuXHRcdFx0XHRcdHNlbGYudG9nZ2xlX2xvYWRlciggJ3Nob3cnLCBMTE1TLmwxMG4udHJhbnNsYXRlKCAnTG9hZGluZyBRdWl6Li4uJyApICk7XG5cblx0XHRcdFx0fSxcblx0XHRcdFx0ZXJyb3I6IGZ1bmN0aW9uKCByLCBzLCB0ICkge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCByLCBzLCB0ICk7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHN1Y2Nlc3M6IGZ1bmN0aW9uKCByICkge1xuXG5cdFx0XHRcdFx0c2VsZi50b2dnbGVfbG9hZGVyKCAnaGlkZScgKTtcblxuXHRcdFx0XHRcdGlmICggci5kYXRhICYmIHIuZGF0YS5odG1sICkge1xuXG5cdFx0XHRcdFx0XHQvLyBzdGFydCB0aGUgcXVpeiB0aW1lciB3aGVuIGEgdGltZSBsaW1pdCBpcyBzZXRcblx0XHRcdFx0XHRcdGlmICggci5kYXRhLnRpbWVfbGltaXQgKSB7XG5cdFx0XHRcdFx0XHRcdHNlbGYuc3RhcnRfcXVpel90aW1lciggci5kYXRhLnRpbWVfbGltaXQgKTtcblx0XHRcdFx0XHRcdH1cblxuXG5cdFx0XHRcdFx0XHRzZWxmLmF0dGVtcHRfa2V5ID0gci5kYXRhLmF0dGVtcHRfa2V5O1xuXHRcdFx0XHRcdFx0c2VsZi50b3RhbF9xdWVzdGlvbnMgPSByLmRhdGEudG90YWw7XG5cblx0XHRcdFx0XHRcdHNlbGYubG9hZF9xdWVzdGlvbiggci5kYXRhLmh0bWwgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIHIubWVzc2FnZSApIHtcblxuXHRcdFx0XHRcdFx0c2VsZi4kY29udGFpbmVyLmFwcGVuZCggJzxwPicgKyByLm1lc3NhZ2UgKyAnPC9wPicgKTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdHZhciBtc2cgPSBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nICk7XG5cdFx0XHRcdFx0XHRzZWxmLiRjb250YWluZXIuYXBwZW5kKCAnPHA+JyArIG1zZyArICc8L3A+JyApO1xuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSApO1xuXG5cdFx0XHQvLyB0aGlzIGZpeGVzIGFuIGlzc3VlIG9uIGlPUyBkZXZpY2VzIHdoZXJlIHRoZSBsYWJlbCByZXF1aXJlcyBhIGRvdWJsZSBjbGlja1xuXHRcdFx0Ly8gZHVlIHRvIHRoZSBwcmVzZW5jZSBvZiBhIGhvdmVyIGV2ZW50ICYgdGhlIHJlZ3VsYXIgbGFiZWwgY2xpY2tcblx0XHRcdHRoaXMuJHVpLm9uKCAndG91Y2hzdGFydCcsICdsaS5sbG1zLWNob2ljZSBsYWJlbCcsIGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0JCggdGhpcyApLmNsaWNrKCk7XG5cdFx0XHR9ICk7XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogU3RhcnQgUXVpeiBUaW1lclxuXHRcdCAqIEdldHMgbWludXRlcyBmcm9tIGhpZGRlbiBmaWVsZFxuXHRcdCAqIE5vdCB1c2VkIGFzIGFjdHVhbCBxdWl6IHRpbWVyLiBRdWl6IGlzIHRpbWVkIG9uIHRoZSBzZXJ2ZXIgZnJvbSB0aGUgcXVpeiBjbGFzc1xuXHRcdCAqIENhbGN1bGF0ZXMgbWludXRlcyB0byBtaWxsaXNlY29uZHMgYW5kIHRoZW4gY29udmVydHMgdG8gaG91cnMgLyBtaW51dGVzXG5cdFx0ICogV2hlbiB0aW1lIGxpbWl0IHJlYWNoZXMgMCBjYWxscyBjb21wbGV0ZV9xdWl6KCkgdG8gY29tcGxldGUgcXVpei5cblx0XHQgKiBAcmV0dXJuIENhbGxzIGdldF9jb3VudF9kb3duIGF0IGEgc2V0IGludGVydmFsIG9mIDEgc2Vjb25kXG5cdFx0ICogQHNpbmNlICAgIDEuMC4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHN0YXJ0X3F1aXpfdGltZXI6IGZ1bmN0aW9uKCB0b3RhbF9taW51dGVzICkge1xuXG5cdFx0XHQvLyBjcmVhdGUgYW5kIGFwcGVuZCB0aGUgVUkgZm9yIHRoZSBjb3VudGRvd24gY2xvY2tcblx0XHRcdHZhciAkZWwgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei10aW1lclwiIGlkPVwibGxtcy1xdWl6LXRpbWVyXCIgLz4nICksXG5cdFx0XHRcdG1zZyA9IExMTVMubDEwbi50cmFuc2xhdGUoICdUaW1lIFJlbWFpbmluZycgKTtcblxuXHRcdFx0JGVsLmFwcGVuZCggJzxpIGNsYXNzPVwiZmEgZmEtY2xvY2stb1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48c3BhbiBjbGFzcz1cInNjcmVlbi1yZWFkZXItdGV4dFwiPicgKyBtc2cgKyAnPC9zcGFuPicgKTtcblx0XHRcdCRlbC5hcHBlbmQoICc8ZGl2IGlkPVwibGxtcy10aWxlc1wiIGNsYXNzPVwibGxtcy10aWxlc1wiPjwvZGl2PicgKTtcblxuXHRcdFx0JCggJyNsbG1zLXF1aXotaGVhZGVyJyApLmFwcGVuZCggJGVsICk7XG5cblx0XHRcdC8vIHN0YXJ0IHRoZSB0aW1lclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxuXHRcdFx0XHR0YXJnZXRfZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgKCAoIHRvdGFsX21pbnV0ZXMgKiA2MCApICogMTAwMCApLCAvLyBzZXQgdGhlIGNvdW50ZG93biBkYXRlXG5cdFx0XHRcdHRpbWVfbGltaXQgPSAoICggdG90YWxfbWludXRlcyAqIDYwICkgKiAxMDAwICksXG5cdFx0XHRcdGNvdW50ZG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsbG1zLXRpbGVzJyksIC8vIGdldCB0YWcgZWxlbWVudFxuXHRcdFx0XHRkYXlzLCBob3VycywgbWludXRlcywgc2Vjb25kczsgLy8gdmFyaWFibGVzIGZvciB0aW1lIHVuaXRzXG5cblx0XHRcdC8vc2V0IGFjdHVhbCB0aW1lclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHNlbGYuY29tcGxldGVfcXVpeigpO1xuXHRcdFx0fSwgdGltZV9saW1pdCArIDEwMDAgKTtcblxuXHRcdFx0dGhpcy5nZXRDb3VudGRvd24oXG5cdFx0XHRcdHRvdGFsX21pbnV0ZXMsXG5cdFx0XHRcdHRhcmdldF9kYXRlLFxuXHRcdFx0XHR0aW1lX2xpbWl0LFxuXHRcdFx0XHRkYXlzLFxuXHRcdFx0XHRob3Vycyxcblx0XHRcdFx0bWludXRlcyxcblx0XHRcdFx0c2Vjb25kcyxcblx0XHRcdFx0Y291bnRkb3duXG5cdFx0XHQpO1xuXG5cdFx0XHQvLyBjYWxsIGdldF9jb3VudF9kb3duIGV2ZXJ5IDEgc2Vjb25kXG5cdFx0XHRzZXRJbnRlcnZhbCggZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRzZWxmLmdldENvdW50ZG93bihcblx0XHRcdFx0XHR0b3RhbF9taW51dGVzLFxuXHRcdFx0XHRcdHRhcmdldF9kYXRlLFxuXHRcdFx0XHRcdHRpbWVfbGltaXQsXG5cdFx0XHRcdFx0ZGF5cyxcblx0XHRcdFx0XHRob3Vycyxcblx0XHRcdFx0XHRtaW51dGVzLFxuXHRcdFx0XHRcdHNlY29uZHMsXG5cdFx0XHRcdFx0Y291bnRkb3duXG5cdFx0XHRcdCk7XG5cdFx0XHR9LCAxMDAwICk7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFRyaWdnZXIgZXZlbnRzXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIGV2ZW50ICBldmVudCB0byB0cmlnZ2VyXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuMFxuXHRcdCAqL1xuXHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xuXG5cdFx0XHQvLyB0cmlnZ2VyIHF1ZXN0aW9uIHN1Ym1pc3Npb24gZm9yIHRoZSBjdXJyZW50IHF1ZXN0aW9uXG5cdFx0XHRpZiAoICdhbnN3ZXJfcXVlc3Rpb24nID09PSBldmVudCApIHtcblxuXHRcdFx0XHRpZiAoIHRoaXMuZ2V0X3F1ZXN0aW9uX2luZGV4KCBzZWxmLmN1cnJlbnRfcXVlc3Rpb24gKSA9PT0gc2VsZi50b3RhbF9xdWVzdGlvbnMgKSB7XG5cblx0XHRcdFx0XHQkKCAnI2xsbXMtY29tcGxldGUtcXVpeicgKS50cmlnZ2VyKCAnY2xpY2snICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1uZXh0LXF1ZXN0aW9uJyApLnRyaWdnZXIoICdjbGljaycgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBMb2FkIHRoZSBIVE1MIG9mIGEgcXVlc3Rpb24gaW50byB0aGUgRE9NIGFuZCB0aGUgcXVlc3Rpb24gY2FjaGVcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgaHRtbCAgc3RyaW5nIG9mIGh0bWxcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjkuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHRsb2FkX3F1ZXN0aW9uOiBmdW5jdGlvbiggaHRtbCApIHtcblxuXHRcdFx0dmFyICRodG1sID0gJCggaHRtbCApLFxuXHRcdFx0XHRxaWQgPSAkaHRtbC5hdHRyKCAnZGF0YS1pZCcgKTtcblxuXHRcdFx0Ly8gY2FjaGUgdGhlIHF1ZXN0aW9uIEhUTUwgZm9yIGZhc3RlciByZXdpbmRzXG5cdFx0XHRpZiAoICF0aGlzLnF1ZXN0aW9uc1sgJ3EtJyArIHFpZCBdICkge1xuXHRcdFx0XHR0aGlzLnF1ZXN0aW9uc1sgJ3EtJyArIHFpZCBdID0gJGh0bWw7XG5cdFx0XHR9XG5cblx0XHRcdHRoaXMudXBkYXRlX3Byb2dyZXNzKCBxaWQgKTtcblxuXHRcdFx0dGhpcy5jdXJyZW50X3F1ZXN0aW9uID0gcWlkO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLnRyaWdnZXIoICdsbG1zLXByZS1hcHBlbmQtcXVlc3Rpb24nLCAkaHRtbCApO1xuXG5cdFx0XHR0aGlzLiRjb250YWluZXIuYXBwZW5kKCAkaHRtbCApO1xuXG5cdFx0XHQkKCBkb2N1bWVudCApLnRyaWdnZXIoICdsbG1zLXBvc3QtYXBwZW5kLXF1ZXN0aW9uJywgJGh0bWwgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBDb25zdHJ1Y3RzIHRoZSBxdWl6IFVJICYgYWRkcyB0aGUgZWxlbWVudHMgaW50byB0aGUgRE9NXG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi4wXG5cdFx0ICogQHZlcnNpb24gIDMuMTYuOVxuXHRcdCAqL1xuXHRcdGxvYWRfdWlfZWxlbWVudHM6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHR2YXIgJGh0bWwgPSAkKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei11aVwiIGlkPVwibGxtcy1xdWl6LXVpXCIgLz4nICksXG5cdFx0XHRcdCRoZWFkZXIgPSAkKCAnPGhlYWRlciBjbGFzcz1cImxsbXMtcXVpei1oZWFkZXJcIiBpZD1cImxsbXMtcXVpei1oZWFkZXJcIiAvPicpXG5cdFx0XHRcdCRmb290ZXIgPSAkKCAnPGZvb3RlciBjbGFzcz1cImxsbXMtcXVpei1uYXZcIiBpZD1cImxsbXMtcXVpei1uYXZcIiAvPicgKTtcblxuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGxhcmdlIGxsbXMtYnV0dG9uLWFjdGlvblwiIGlkPVwibGxtcy1uZXh0LXF1ZXN0aW9uXCIgbmFtZT1cImxsbXNfbmV4dF9xdWVzdGlvblwiIHR5cGU9XCJzdWJtaXRcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ05leHQgUXVlc3Rpb24nICkgKyAnPC9idXR0b24+JyApO1xuXHRcdFx0JGZvb3Rlci5hcHBlbmQoICc8YnV0dG9uIGNsYXNzPVwiYnV0dG9uIGxhcmdlIGxsbXMtYnV0dG9uLWFjdGlvbiBsbG1zLWJ1dHRvbi1xdWl6LWNvbXBsZXRlXCIgaWQ9XCJsbG1zLWNvbXBsZXRlLXF1aXpcIiBuYW1lPVwibGxtc19jb21wbGV0ZV9xdWl6XCIgdHlwZT1cInN1Ym1pdFwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnQ29tcGxldGUgUXVpeicgKSArICc8L2J1dHRvbj4nICk7XG5cdFx0XHQkZm9vdGVyLmFwcGVuZCggJzxidXR0b24gY2xhc3M9XCJidXR0b24gbGxtcy1idXR0b24tc2Vjb25kYXJ5XCIgaWQ9XCJsbG1zLXByZXYtcXVlc3Rpb25cIiBuYW1lPVwibGxtc19wcmV2X3F1ZXN0aW9uXCIgdHlwZT1cInN1Ym1pdFwiIHN0eWxlPVwiZGlzcGxheTpub25lO1wiPicgKyBMTE1TLmwxMG4udHJhbnNsYXRlKCAnUHJldmlvdXMgUXVlc3Rpb24nICkgKyAnPC9idXR0b24+JyApO1xuXG5cdFx0XHQkaGVhZGVyLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXByb2dyZXNzXCI+PGRpdiBjbGFzcz1cInByb2dyZXNzLWJhci1jb21wbGV0ZVwiPjwvZGl2PjwvZGl2PicgKTtcblx0XHRcdCRmb290ZXIuYXBwZW5kKCAnPGRpdiBjbGFzcz1cImxsbXMtcXVpei1jb3VudGVyXCIgaWQ9XCJsbG1zLXF1aXotY291bnRlclwiPjxzcGFuIGNsYXNzPVwibGxtcy1jdXJyZW50XCI+PC9zcGFuPjxzcGFuIGNsYXNzPVwibGxtcy1zZXBcIj4vPC9zcGFuPjxzcGFuIGNsYXNzPVwibGxtcy10b3RhbFwiPjwvc3Bhbj48L2Rpdj4nKVxuXG5cdFx0XHQkaHRtbC5hcHBlbmQoICRoZWFkZXIgKVxuXHRcdFx0XHQgLmFwcGVuZCggJzxkaXYgY2xhc3M9XCJsbG1zLXF1aXotcXVlc3Rpb24td3JhcHBlclwiIGlkPVwibGxtcy1xdWl6LXF1ZXN0aW9uLXdyYXBwZXJcIiAvPicgKVxuXHRcdFx0XHQgLmFwcGVuZCggJGZvb3RlciApO1xuXG5cdFx0XHQkKCAnI2xsbXMtcXVpei13cmFwcGVyJyApLmFmdGVyKCAkaHRtbCApO1xuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFBlcmZvcm0gYWN0aW9ucyBvbiBxdWVzdGlvbiBIVE1MIGFmdGVyIGl0J3MgYmVlbiBhcHBlbmRlZCB0byB0aGUgRE9NXG5cdFx0ICogQHBhcmFtICAgIG9iaiAgICAgIGV2ZW50ICBqcyBldmVudCBvYmplY3Rcblx0XHQgKiBAcGFyYW0gICAgb2JqICAgICAgaHRtbCAgIGpzIEhUTUwgb2JqZWN0XG5cdFx0ICogQHJldHVybiAgIHZvaWRcblx0XHQgKiBAc2luY2UgICAgMy4xNi42XG5cdFx0ICogQHZlcnNpb24gIDMuMTYuNlxuXHRcdCAqL1xuXHRcdHBvc3RfYXBwZW5kX3F1ZXN0aW9uOiBmdW5jdGlvbiggZXZlbnQsIGh0bWwgKSB7XG5cblx0XHRcdHZhciAkaHRtbCA9ICQoIGh0bWwgKTtcblxuXHRcdFx0aWYgKCAkaHRtbC5maW5kKCAnYXVkaW8nICkubGVuZ3RoICkge1xuXHRcdFx0XHR3cC5tZWRpYWVsZW1lbnQuaW5pdGlhbGl6ZSgpO1xuXHRcdFx0fVxuXG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFNob3cgb3IgaGlkZSB0aGUgXCJsb2FkaW5nXCIgc3Bpbm5yIHdpdGggYW4gb3B0aW9uIG1lc3NhZ2Vcblx0XHQgKiBAcGFyYW0gICAgc3RyaW5nICAgZGlzcGxheSAgc2hvd3xoaWRlXG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIG1zZyAgICAgIHRleHQgdG8gZGlzcGxheSB3aGVuIHNob3dpbmdcblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjkuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjZcblx0XHQgKi9cblx0XHR0b2dnbGVfbG9hZGVyOiBmdW5jdGlvbiggZGlzcGxheSwgbXNnICkge1xuXG5cdFx0XHRpZiAoICdzaG93JyA9PT0gZGlzcGxheSApIHtcblxuXHRcdFx0XHRtc2cgPSBtc2cgfHwgTExNUy5sMTBuLnRyYW5zbGF0ZSggJ0xvYWRpbmcuLi4nICk7XG5cblx0XHRcdFx0dGhpcy4kYnV0dG9ucy5hdHRyKCAnZGlzYWJsZWQnLCAnZGlzYWJsZWQnICk7XG5cblx0XHRcdFx0dGhpcy4kY29udGFpbmVyLmVtcHR5KCk7XG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdGFydCggdGhpcy4kY29udGFpbmVyICk7XG5cdFx0XHRcdHRoaXMuJGNvbnRhaW5lci5hcHBlbmQoICc8ZGl2IGNsYXNzPVwibGxtcy1xdWl6LWxvYWRpbmdcIj4nICsgTExNUy5sMTBuLnRyYW5zbGF0ZSggbXNnICkgKyAnPC9kaXY+JyApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdExMTVMuU3Bpbm5lci5zdG9wKCB0aGlzLiRjb250YWluZXIgKTtcblx0XHRcdFx0dGhpcy4kYnV0dG9ucy5yZW1vdmVBdHRyKCAnZGlzYWJsZWQnICk7XG5cdFx0XHRcdHRoaXMuJGNvbnRhaW5lci5maW5kKCAnLmxsbXMtcXVpei1sb2FkaW5nJyApLnJlbW92ZSgpO1xuXG5cdFx0XHR9XG5cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogVXBkYXRlIHRoZSBwcm9ncmVzcyBiYXIgYW5kIHRvZ2dsZSBidXR0b24gYXZhbGFiaWxpdHkgYmFzZWQgb24gcXVlc3Rpb24gdGhlIHF1ZXN0aW9uIGJlaW5nIHNob3duXG5cdFx0ICogQHBhcmFtICAgIHtbdHlwZV19ICAgcWlkICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHJldHVybiAgIHtbdHlwZV19XG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR1cGRhdGVfcHJvZ3Jlc3M6IGZ1bmN0aW9uKCBxaWQgKSB7XG5cblx0XHRcdHZhciBpbmRleCA9IHRoaXMuZ2V0X3F1ZXN0aW9uX2luZGV4KCBxaWQgKSxcblx0XHRcdFx0cHJvZ3Jlc3M7XG5cblx0XHRcdGlmICggLTEgPT09IGluZGV4ICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGluZGV4Kys7XG5cblx0XHRcdCQoICcjbGxtcy1xdWl6LWNvdW50ZXIgLmxsbXMtY3VycmVudCcgKS50ZXh0KCBpbmRleCApO1xuXHRcdFx0aWYgKCBpbmRleCA9PT0gMSApIHtcblx0XHRcdFx0JCggJyNsbG1zLXF1aXotY291bnRlciAubGxtcy10b3RhbCcgKS50ZXh0KCB0aGlzLnRvdGFsX3F1ZXN0aW9ucyApO1xuXHRcdFx0XHQkKCAnI2xsbXMtcXVpei1jb3VudGVyJyApLnNob3coKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gaGFuZGxlIHByZXYgcXVlc3Rpb25cblx0XHRcdGlmICggaW5kZXggPj0gMiApIHtcblx0XHRcdFx0JCggJyNsbG1zLXByZXYtcXVlc3Rpb24nICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0JCggJyNsbG1zLXByZXYtcXVlc3Rpb24nICkuaGlkZSgpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGluZGV4ID09PSB0aGlzLnRvdGFsX3F1ZXN0aW9ucyApIHtcblx0XHRcdFx0JCggJyNsbG1zLW5leHQtcXVlc3Rpb24nICkuaGlkZSgpO1xuXHRcdFx0XHQkKCAnI2xsbXMtY29tcGxldGUtcXVpeicgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKCAnI2xsbXMtbmV4dC1xdWVzdGlvbicgKS5zaG93KCk7XG5cdFx0XHRcdCQoICcjbGxtcy1jb21wbGV0ZS1xdWl6JyApLmhpZGUoKTtcblx0XHRcdH1cblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBJbmNyZWFzZSBwcm9ncmVzcyBiYXIgdWkgZWxtZW50XG5cdFx0ICogQHBhcmFtICAgIHN0cmluZyAgIGRpciAgdXBkYXRlIGRpcmVjdGlvbiBbaW5jcmVtZW50fGRlY3JlbWVudF1cblx0XHQgKiBAcmV0dXJuICAgdm9pZFxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dXBkYXRlX3Byb2dyZXNzX2JhcjogZnVuY3Rpb24oIGRpciApIHtcblxuXHRcdFx0dmFyIGluZGV4ID0gdGhpcy5nZXRfcXVlc3Rpb25faW5kZXgoIHRoaXMuY3VycmVudF9xdWVzdGlvbiApO1xuXHRcdFx0aWYgKCAnaW5jcmVtZW50JyA9PT0gZGlyICkge1xuXHRcdFx0XHRpbmRleCsrO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aW5kZXgtLTtcblx0XHRcdH1cblxuXHRcdFx0cHJvZ3Jlc3MgPSAoIGluZGV4IC8gdGhpcy50b3RhbF9xdWVzdGlvbnMgKSAqIDEwMDtcblx0XHRcdHRoaXMuJHVpLmZpbmQoICcucHJvZ3Jlc3MtYmFyLWNvbXBsZXRlJyApLmNzcyggJ3dpZHRoJywgcHJvZ3Jlc3MgKyAnJScgKTtcblxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBHZXQgQ291bnQgRG93blxuXHRcdCAqIENhbGxlZCBldmVyeSBzZWNvbmQgdG8gdXBkYXRlIHRoZSBvbiBzY3JlZW4gY291bnRkb3duIHRpbWVyXG5cdFx0ICogQ2hhbmdlcyBjb2xvciB0byB5ZWxsb3cgYXQgMS8yIG9mIHRvdGFsIHRpbWVcblx0XHQgKiBDaGFuZ2VzIGNvbG9yIHRvIHJlZCBhdCAxLzQgb2YgdG90YWwgdGltZVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBtaW51dGVzICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2RhdGVdfSB0YXJnZXRfZGF0ZSBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IHRpbWVfbGltaXQgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gZGF5cyAgICAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBob3VycyAgICAgICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHBhcmFtICB7W2ludF19IG1pbnV0ZXMgICAgIFtkZXNjcmlwdGlvbl1cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gc2Vjb25kcyAgICAgW2Rlc2NyaXB0aW9uXVxuXHRcdCAqIEBwYXJhbSAge1tpbnRdfSBjb3VudGRvd24gICBbZGVzY3JpcHRpb25dXG5cdFx0ICogQHJldHVybiBEaXNwbGF5cyB1cGRhdGVzIGhvdXJzLCBtaW51dGVzIG9uIHF1aXogdGltZXJcblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0IFx0ICogQHZlcnNpb24gIDEuMC4wXG5cdFx0ICovXG5cdFx0Z2V0Q291bnRkb3duOiBmdW5jdGlvbiggdG90YWxfbWludXRlcywgdGFyZ2V0X2RhdGUsIHRpbWVfbGltaXQsIGRheXMsIGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzLCBjb3VudGRvd24gKXtcblxuXHRcdFx0Ly8gZmluZCB0aGUgYW1vdW50IG9mIFwic2Vjb25kc1wiIGJldHdlZW4gbm93IGFuZCB0YXJnZXRcblx0XHRcdHZhciBjdXJyZW50X2RhdGUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gKCB0YXJnZXRfZGF0ZSAtIGN1cnJlbnRfZGF0ZSApIC8gMTAwMDtcblxuXHRcdFx0aWYgKCBzZWNvbmRzX2xlZnQgPj0gMCApIHtcblxuXHRcdFx0XHRpZiAoICggc2Vjb25kc19sZWZ0ICogMTAwMCApIDwgKCB0aW1lX2xpbWl0IC8gMiApICkgIHtcblxuXHRcdFx0XHRcdCQoICcjbGxtcy1xdWl6LXRpbWVyJyApLmFkZENsYXNzKCAnY29sb3ItaGFsZicgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAoIHNlY29uZHNfbGVmdCAqIDEwMDAgKSA8ICggdGltZV9saW1pdCAvIDQgKSApICB7XG5cblx0XHRcdFx0XHQkKCAnI2xsbXMtcXVpei10aW1lcicgKS5yZW1vdmVDbGFzcyggJ2NvbG9yLWhhbGYnICk7XG5cdFx0XHRcdFx0JCggJyNsbG1zLXF1aXotdGltZXInICkuYWRkQ2xhc3MoICdjb2xvci1lbXB0eScgKTtcblxuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGF5cyA9IHRoaXMucGFkKCBwYXJzZUludChzZWNvbmRzX2xlZnQgLyA4NjQwMCkgKTtcblx0XHRcdFx0c2Vjb25kc19sZWZ0ID0gc2Vjb25kc19sZWZ0ICUgODY0MDA7XG5cdFx0XHRcdGhvdXJzID0gdGhpcy5wYWQoIHBhcnNlSW50KHNlY29uZHNfbGVmdCAvIDM2MDApICk7XG5cdFx0XHRcdHNlY29uZHNfbGVmdCA9IHNlY29uZHNfbGVmdCAlIDM2MDA7XG5cdFx0XHRcdG1pbnV0ZXMgPSB0aGlzLnBhZCggcGFyc2VJbnQoIHNlY29uZHNfbGVmdCAvIDYwICkgKTtcblx0XHRcdFx0c2Vjb25kcyA9IHRoaXMucGFkKCBwYXJzZUludCggc2Vjb25kc19sZWZ0ICUgNjAgKSApO1xuXG5cdFx0XHRcdC8vIGZvcm1hdCBjb3VudGRvd24gc3RyaW5nICsgc2V0IHRhZyB2YWx1ZVxuXHRcdFx0XHRjb3VudGRvd24uaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPVwiaG91cnNcIj4nICsgaG91cnMgKyAnPC9zcGFuPjo8c3BhbiBjbGFzcz1cIm1pbnV0ZXNcIj4nICsgbWludXRlcyArICc8L3NwYW4+OjxzcGFuIGNsYXNzPVwic2Vjb25kc1wiPicgKyBzZWNvbmRzICsgJzwvc3Bhbj4nO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBQYWQgTnVtYmVyXG5cdFx0ICogcGFkcyBudW1iZXIgd2l0aCAwIGlmIHNpbmdsZSBkaWdpdC5cblx0XHQgKiBAcGFyYW0gIHtbaW50XX0gbiBbbnVtYmVyXVxuXHRcdCAqIEByZXR1cm4ge1tzdHJpbmddfSBbcGFkZGVkIG51bWJlcl1cblx0XHQgKiBAc2luY2UgICAgMS4wLjBcblx0IFx0ICogQHZlcnNpb24gIDEuMC4wXG5cdFx0ICovXG5cdFx0cGFkOiBmdW5jdGlvbihuKSB7XG5cdFx0XHRyZXR1cm4gKG4gPCAxMCA/ICcwJyA6ICcnKSArIG47XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIEJhc2ljIHZhbGlkYXRpb24gbWV0aG9kIHdoaWNoIHBlcmZvcm1zIG5vIHZhbGlkYXRpb24gYW5kIHJldHVybnMgYSB2YWxpYXRpb24gb2JqZWN0XG5cdFx0ICogaW4gdGhlIGZvcm1hdCByZXF1aXJlZCBieSB0aGUgYXBwbGljYXRpb25cblx0XHQgKiBAcGFyYW0gICAgb2JqICAgJHF1ZXN0aW9uICBqUXVlcnkgc2VsZWN0b3Igb2YgdGhlIHF1ZXN0aW9uXG5cdFx0ICogQHJldHVybiAgIG9ialxuXHRcdCAqIEBzaW5jZSAgICAzLjE2LjBcblx0XHQgKiBAdmVyc2lvbiAgMy4xNi4wXG5cdFx0ICovXG5cdFx0dmFsaWRhdGU6IGZ1bmN0aW9uKCAkcXVlc3Rpb24gKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRhbnN3ZXI6IFtdLFxuXHRcdFx0XHR2YWxpZDogdHJ1ZSxcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIFZhbGlkYXRlcyBhIGNob2ljZSBxdWVzdGlvbiB0byBlbnN1cmUgdGhlcmUncyBhdCBsZWFzdCBvbmUgY2hlY2tlZCBpbnB1dFxuXHRcdCAqIEBwYXJhbSAgICBvYmogICAkcXVlc3Rpb24gIGpRdWVyeSBzZWxlY3RvciBvZiB0aGUgcXVlc3Rpb25cblx0XHQgKiBAcmV0dXJuICAgb2JqXG5cdFx0ICogQHNpbmNlICAgIDMuMTYuMFxuXHRcdCAqIEB2ZXJzaW9uICAzLjE2LjBcblx0XHQgKi9cblx0XHR2YWxpZGF0ZV9jaG9pY2U6IGZ1bmN0aW9uKCAkcXVlc3Rpb24gKSB7XG5cblx0XHRcdHZhciByZXQgPSB3aW5kb3cubGxtcy5xdWl6emVzLnZhbGlkYXRlKCAkcXVlc3Rpb24gKSxcblx0XHRcdFx0Y2hlY2tlZCA9ICRxdWVzdGlvbi5maW5kKCAnaW5wdXQ6Y2hlY2tlZCcgKTtcblxuXHRcdFx0aWYgKCAhY2hlY2tlZC5sZW5ndGggKSB7XG5cdFx0XHRcdHJldC52YWxpZCA9IExMTVMubDEwbi50cmFuc2xhdGUoICdZb3UgbXVzdCBzZWxlY3QgYW4gYW5zd2VyIHRvIGNvbnRpbnVlLicgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNoZWNrZWQuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0LmFuc3dlci5wdXNoKCAkKCB0aGlzICkudmFsKCkgKTtcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0fSxcblxuXHR9O1xuXG5cdHF1aXouYmluZCgpO1xuXG5cdHdpbmRvdy5sbG1zID0gd2luZG93LmxsbXMgfHwge307XG5cdHdpbmRvdy5sbG1zLnF1aXp6ZXMgPSBxdWl6O1xuXG59ICkoIGpRdWVyeSApO1xuIl19
