/*!
 * Vidbg v1.1.1 (https://github.com/blakewilson/vidbg)
 * Vidbg By Blake Wilson
 * Edited in Fix for Safari issue
 * @license Licensed Under MIT (https://github.com/blakewilson/vidbg/blob/master/LICENSE)
 */
!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):e.jQuery)}(this,function($){"use strict";function e(e){var t={},i,o,r,n,s,a,d;for(s=e.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),d=0,a=s.length;d<a&&(o=s[d],-1===o.search(/^(http|https|ftp):\/\//)&&-1!==o.search(":"));d++)i=o.indexOf(":"),r=o.substring(0,i),n=o.substring(i+1),n||(n=void 0),"string"==typeof n&&(n="true"===n||"false"!==n&&n),"string"==typeof n&&(n=isNaN(n)?n:+n),t[r]=n;return null==r&&null==n?e:t}function t(e){e=""+e;var t=e.split(/\s+/),i="50%",o="50%",r,n,s;for(s=0,r=t.length;s<r;s++)n=t[s],"left"===n?i="0%":"right"===n?i="100%":"top"===n?o="0%":"bottom"===n?o="100%":"center"===n?0===s?i="50%":o="50%":0===s?i=n:o=n;return{x:i,y:o}}function i(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,o){return t+t+i+i+o+o});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}function o(t,i,o){this.$element=$(t),"string"==typeof i&&(i=e(i)),o?"string"==typeof o&&(o=e(o)):o={},this.settings=$.extend({},n,o),this.path=i;try{this.init()}catch(e){if(e.message!==s)throw e}}var r="vidbg",n={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",overlay:!1,overlayColor:"#000",overlayAlpha:.3,resizing:!0},s="Not implemented";o.prototype.init=function(){var e=this,o=e.path,r=o,n="",a=e.$element,d=e.settings,p=t(d.position),c,u,l;u=e.$wrapper=$('<div class="vidbg-container">').css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-repeat":"no-repeat","background-position":p.x+" "+p.y}),"object"==typeof o&&(o.poster?r=o.poster:o.mp4?r=o.mp4:o.webm&&(r=o.webm)),u.css("background-image","url("+r+")"),"static"===a.css("position")&&a.css("position","relative"),a.css("z-index","1"),a.is("body")&&u.css({position:"fixed"}),a.prepend(u),"object"==typeof o?(o.mp4&&(n+='<source src="'+o.mp4+'" type="video/mp4">'),o.webm&&(n+='<source src="'+o.webm+'" type="video/webm">'),c=e.$video=$("<video>"+n+"</video>")):c=e.$video=$('<video><source src="'+o+'" type="video/mp4"><source src="'+o+'" type="video/webm"></video>');try{c.prop({autoplay:d.autoplay,loop:d.loop,volume:d.volume,muted:d.muted,defaultMuted:d.muted,playbackRate:d.playbackRate,defaultPlaybackRate:d.playbackRate})}catch(e){throw new Error(s)}c.css({margin:"auto",position:"absolute","z-index":-1,top:p.y,left:p.x,"-webkit-transform":"translate(-"+p.x+", -"+p.y+")","-ms-transform":"translate(-"+p.x+", -"+p.y+")","-moz-transform":"translate(-"+p.x+", -"+p.y+")",transform:"translate(-"+p.x+", -"+p.y+")","max-width":"none",visibility:"hidden",opacity:0}).one("canplaythrough.vidbg",function(){e.resize(),-1==navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Chrome")||isMobile_kt_slider.any()||c.css({visibility:"visible",opacity:1})}).one("playing.vidbg",function(){c.css({visibility:"visible",opacity:1}),u.css("background-image","none")}),a.on("resize.vidbg",function(){d.resizing&&e.resize()}),u.append(c),l=e.$overlay=$('<div class="vidbg-overlay">').css({position:"absolute",top:0,left:0,right:0,bottom:0,background:"rgba("+i(d.overlayColor).r+", "+i(d.overlayColor).g+", "+i(d.overlayColor).b+", "+d.overlayAlpha+")"}),d.overlay&&u.append(l)},o.prototype.getVideoObject=function(){return this.$video[0]},o.prototype.resize=function(){if(this.$video){var e=this.$wrapper,t=this.$video,i=t[0],o=i.videoHeight,r=i.videoWidth,n=e.height(),s=e.width();s/r>n/o?t.css({width:s+2,height:"auto"}):t.css({width:"auto",height:n+2})}},o.prototype.destroy=function(){delete $.vidbg.lookup[this.index],this.$video&&this.$video.off("vidbg"),this.$element.off("vidbg").removeData("vidbg"),this.$wrapper.remove()},$.vidbg={lookup:[]},$.fn.vidbg=function(e,t){var i;return this.each(function(){i=$.data(this,"vidbg"),i&&i.destroy(),i=new o(this,e,t),i.index=$.vidbg.lookup.push(i)-1,$.data(this,"vidbg",i)}),this},$(document).ready(function(){var e=$(window);e.on("resize.vidbg",function(){for(var e=$.vidbg.lookup.length,t=0,i;t<e;t++)(i=$.vidbg.lookup[t])&&i.settings.resizing&&i.resize()}),e.on("unload.vidbg",function(){return!1}),$(document).find("[data-vidbg-bg]").each(function(e,t){var i=$(t),o=i.data("vidbg-options"),r=i.data("vidbg-bg");i.vidbg(r,o)})})});