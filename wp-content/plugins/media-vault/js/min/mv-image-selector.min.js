!function(_){"use strict";var e,i,t=_("#mgjp_mv_ir_wrap"),m=_("#mgjp_mv_ir_preview"),a=_("#mgjp_mv_ir_id"),p=_('<p><span class="button button-primary" id="mgjp_mv_ir_select_btn">'+mgjp_mv_options_media.ir_select_btn+"</span></p>"),r=_('<p><span class="button" id="mgjp_mv_ir_restore_default">'+mgjp_mv_options_media.ir_restore_btn+"</span></p>");i=[p],0<a.val()&&(i=[p.children().text(mgjp_mv_options_media.ir_select_btn2).parent()]),mgjp_mv_options_media.ir_default!==a.val()&&i.push(r),t.append(i).on("click","#mgjp_mv_ir_select_btn",function(i){return i.preventDefault(),e?(e.open(),void 0):(e=wp.media.frames.mvCustomIR=wp.media({id:"mgjp_mv_select_placeholder_modal",title:mgjp_mv_options_media.ir_modal_title,library:{type:"image"},button:{text:mgjp_mv_options_media.ir_modal_btn}}),e.on("select",function(){var i=e.state().get("selection").toJSON();_.get(ajaxurl,{action:"mgjp_mv_get_attachment_image",id:i[0].id,size:mgjp_mv_options_media.ir_size,args:mgjp_mv_options_media.ir_preview_args},function(e){-1!==e&&0!==e&&e&&(a.val(i[0].id),m.hide().html(e).fadeIn(300),1>_("#mgjp_mv_ir_restore_default").length&&mgjp_mv_options_media.ir_default!==i[0].id?t.append(r):mgjp_mv_options_media.ir_default===i[0].id&&_("#mgjp_mv_ir_restore_default").parent().detach())})}),e.open(),void 0)}).on("click","#mgjp_mv_ir_restore_default",function(){_.post(ajaxurl,{action:"mgjp_mv_restore_default_placeholder_image",nonce:mgjp_mv_options_media.ir_restore_nonce,size:mgjp_mv_options_media.ir_size,args:mgjp_mv_options_media.ir_preview_args},function(e){-1!==e&&0!==e&&e&&(e=JSON.parse(e),a.val(e.id),m.hide().html(e.img).fadeIn(300),_("#mgjp_mv_ir_restore_default").parent().detach(),mgjp_mv_options_media.ir_default=e.id)})})}(jQuery);