jQuery(document).ready(function(e){function t(){var t=this;t={displayChecked:function(e,t,i,a){var n=i?!e.checked:e.checked;a?n?t.attr("disabled","disabled"):t.removeAttr("disabled"):n?t.show():t.hide()},isEmpty:function(t){return t=e.trim(t),!t||0===t.length},isNumber:function(i){return i=e.trim(i),!t.isEmpty(i)&&!isNaN(i)},getMceContent:function(t){var i=tinymce.editors[t];return void 0==i||i.isHidden()?e("#"+t).val():i.getContent()},ajaxPost:function(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}};var a=function(){e(".wpProQuiz_tab_wrapper a").click(function(){var t=e(this),i=t.data("tab"),a=t.siblings(".button-primary").removeClass("button-primary").addClass("button-secondary");return t.removeClass("button-secondary").addClass("button-primary"),e(a.data("tab")).hide("fast"),e(i).show("fast"),e(document).trigger({type:"changeTab",tabId:i}),!1})},n={gobalSettings:function(){var i={categoryDelete:function(i,a){var n={categoryId:i};t.ajaxPost("categoryDelete",n,function(t){t.err||(e('select[name="category'+a+'"] option[value="'+i+'"]').remove(),e('select[name="category'+a+'"]').change())})},categoryEdit:function(i,a,n){var o={categoryId:i,categoryName:e.trim(a)};return t.isEmpty(a)?void alert(wpProQuizLocalize.category_no_name):void t.ajaxPost("categoryEdit",o,function(t){t.err||(e('select[name="category'+n+'"] option[value="'+i+'"]').text(o.categoryName),e('select[name="category'+n+'"]').change())})},changeTimeFormat:function(t,i){"0"!=i.val()&&e('input[name="'+t+'"]').val(i.val())},templateDelete:function(i,a){var n={templateId:i,type:a};t.ajaxPost("templateDelete",n,function(t){t.err||(a?(e('select[name="templateQuestion"] option[value="'+i+'"]').remove(),e('select[name="templateQuestion"]').change()):(e('select[name="templateQuiz"] option[value="'+i+'"]').remove(),e('select[name="templateQuiz"]').change()))})},templateEdit:function(i,a,n){if(t.isEmpty(a))return void alert(wpProQuizLocalize.category_no_name);var o={templateId:i,name:e.trim(a),type:n};t.ajaxPost("templateEdit",o,function(t){t.err||(n?(e('select[name="templateQuestion"] option[value="'+i+'"]').text(o.name),e('select[name="templateQuestion"]').change()):(e('select[name="templateQuiz"] option[value="'+i+'"]').text(o.name),e('select[name="templateQuiz"]').change()))})}},a=function(){e('select[name="category"]').change(function(){e('input[name="categoryEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="categoryDelete"]').click(function(){var t=e('select[name="category"] option:selected').val();i.categoryDelete(t,"")}),e('input[name="categoryEdit"]').click(function(){var t=e('select[name="category"] option:selected').val(),a=e('input[name="categoryEditText"]').val();i.categoryEdit(t,a,"")}),e('select[name="categoryQuiz"]').change(function(){e('input[name="categoryQuizEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="categoryQuizDelete"]').click(function(){var t=e('select[name="categoryQuiz"] option:selected').val();i.categoryDelete(t,"Quiz")}),e('input[name="categoryQuizEdit"]').click(function(){var t=e('select[name="categoryQuiz"] option:selected').val(),a=e('input[name="categoryQuizEditText"]').val();i.categoryEdit(t,a,"Quiz")}),e("#statistic_time_format_select").change(function(){i.changeTimeFormat("statisticTimeFormat",e(this))}),e(document).bind("changeTab",function(t){switch(e("#problemInfo").hide("fast"),t.tabId){case"#problemContent":e("#problemInfo").show("fast");break;case"#emailSettingsTab":}}),e('input[name="email[html]"]').change(function(){return void 0==switchEditors?!1:void(this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html"))}).change(),e('input[name="userEmail[html]"]').change(function(){return void 0==switchEditors?!1:void(this.checked?switchEditors.go("userEmailEditor","tmce"):switchEditors.go("userEmailEditor","html"))}).change(),e('select[name="templateQuiz"]').change(function(){e('input[name="templateQuizEditText"]').val(e(this).find(":selected").text())}).change(),e('select[name="templateQuestion"]').change(function(){e('input[name="templateQuestionEditText"]').val(e(this).find(":selected").text())}).change(),e('input[name="templateQuizDelete"]').click(function(){var t=e('select[name="templateQuiz"] option:selected').val();i.templateDelete(t,0)}),e('input[name="templateQuestionDelete"]').click(function(){var t=e('select[name="templateQuestion"] option:selected').val();i.templateDelete(t,1)}),e('input[name="templateQuizEdit"]').click(function(){var t=e('select[name="templateQuiz"] option:selected').val(),a=e('input[name="templateQuizEditText"]').val();i.templateEdit(t,a,0)}),e('input[name="templateQuestionEdit"]').click(function(){var t=e('select[name="templateQuestion"] option:selected').val(),a=e('input[name="templateQuestionEditText"]').val();i.templateEdit(t,a,1)})};a()},questionEdit:function(){var i=this,a=e.noop(),n={answerChildren:e(".answer_felder > div"),pointsModus:e('input[name="answerPointsActivated"]'),gPoints:e('input[name="points"]')};i={generateArrayIndex:function(){var t=e('input[name="answerType"]:checked').val();t="single"==t||"multiple"==t?"classic_answer":t,e(".answerList").each(function(){var i=e(this).parent().attr("class");e(this).children().each(function(a,n){e(this).find('[name^="answerData"]').each(function(){var e=this.name,n=e.search(/\](\[\w+\])+$/),o=t==i?a:"none";n>0&&(this.name="answerData["+o+e.substring(n,e.length))})})})},globalValidate:function(){if(t.isEmpty(t.getMceContent("question")))return alert(wpProQuizLocalize.no_question_msg),!1;if(n.pointsModus.is(":checked")){if("free_answer"==e('input[name="answerType"]:checked').val())return alert(wpProQuizLocalize.dif_points),!1}else{var i=n.gPoints.val();if(!t.isNumber(i)||1>i)return alert(wpProQuizLocalize.no_nummber_points),!1}return a()===!1?!1:!0},answerRemove:function(){var t=e(this).parent();return t.parent().children().length<2?!1:(t.remove(),!1)},addCategory:function(){var i=e.trim(e('input[name="categoryAdd"]').val());if(!t.isEmpty(i)){var a={categoryName:i};t.ajaxPost("categoryAdd",a,function(t){if(t.err)return void e("#categoryMsgBox").text(t.err).show("fast").delay(2e3).hide("fast");var i=e(document.createElement("option")).val(t.categoryId).text(t.categoryName).attr("selected","selected");e('select[name="category"]').append(i).change()})}},addMediaClick:function(){if("function"!=typeof tb_show)return!1;var t=e(this).closest("li"),i=t.find('input[name="answerData[][html]"]:eq(0)'),a=t.find(".wpProQuiz_text:eq(0)");window.org_send_to_editor=window.send_to_editor;var n=tb_remove;window.send_to_editor=function(t){var n=e("img",t)[0].outerHTML;a.val(a.val()+n),i.attr("checked",!0),tb_remove(),window.send_to_editor=window.org_send_to_editor},window.tb_remove=function(){window.send_to_editor=window.org_send_to_editor,tb_remove=n,tb_remove()},tb_show("","media-upload.php?type=image&TB_iframe=true")}};var o={classic_answer:function(){var i=0,a=0,o=0;return e(".classic_answer .answerList").children().each(function(){var n=e(this);if(!t.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())){i++,n.find('input[name="answerData[][correct]"]:checked').length&&a++;var r=n.find('input[name="answerData[][points]"]').val();t.isNumber(r)&&r>=0&&o++}}),i?a||e('input[name="disableCorrect"]').is(":checked")&&e('input[name="answerPointsDiffModusActivated"]').is(":checked")&&e('input[name="answerPointsActivated"]').is(":checked")&&"single"==e('input[name="answerType"]:checked').val()?o!=i&&n.pointsModus.is(":checked")?(alert(wpProQuizLocalize.no_nummber_points_new),!1):!0:(alert(wpProQuizLocalize.no_correct_msg),!1):(alert(wpProQuizLocalize.no_answer_msg),!1)},free_answer:function(){return t.isEmpty(e('.free_answer textarea[name="answerData[][answer]"]').val())?(alert(wpProQuizLocalize.no_answer_msg),!1):!0},cloze_answer:function(){return t.isEmpty(t.getMceContent("cloze"))?(alert(wpProQuizLocalize.no_answer_msg),!1):!0},sort_answer:function(){var i=0,a=0;return e(".sort_answer .answerList").children().each(function(){var n=e(this);if(!t.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())){i++;var o=n.find('input[name="answerData[][points]"]').val();t.isNumber(o)&&o>=0&&a++}}),i?a!=i&&n.pointsModus.is(":checked")?(alert(wpProQuizLocalize.no_nummber_points_new),!1):!0:(alert(wpProQuizLocalize.no_answer_msg),!1)},matrix_sort_answer:function(){var i=0,a=0,o=!0,r=0;return e(".matrix_sort_answer .answerList").children().each(function(){var n=e(this),c=n.find('input[name="answerData[][points]"]').val();t.isEmpty(n.find('textarea[name="answerData[][answer]"]').val())?t.isEmpty(n.find('textarea[name="answerData[][sort_string]"]').val())||(r++,t.isNumber(c)&&c>=0&&a++):(i++,r++,t.isEmpty(n.find('textarea[name="answerData[][sort_string]"]').val())&&(o=!1),t.isNumber(c)&&c>=0&&a++)}),i?o?a!=r&&n.pointsModus.is(":checked")?(alert(wpProQuizLocalize.no_nummber_points_new),!1):!0:(alert(wpProQuizLocalize.no_sort_element_criterion),!1):(alert(wpProQuizLocalize.no_answer_msg),!1)},assessment_answer:function(){return t.isEmpty(t.getMceContent("assessment"))?(alert(wpProQuizLocalize.no_answer_msg),!1):!0}},r=function(){e("#wpProQuiz_tip").change(function(){t.displayChecked(this,e("#wpProQuiz_tipBox"))}).change(),e("#wpProQuiz_correctSameText").change(function(){t.displayChecked(this,e("#wpProQuiz_incorrectMassageBox"),!0)}).change(),e('input[name="answerType"]').click(function(){n.answerChildren.hide();var t=this.value;if("single"==t?(e("#singleChoiceOptions").show(),e('input[name="disableCorrect"]').change()):(e("#singleChoiceOptions").hide(),e(".classic_answer .wpProQuiz_classCorrect").parent().parent().show()),"single"==t||"multiple"==t){var i="single"==t?"radio":"checkbox";t="classic_answer",e(".wpProQuiz_classCorrect").each(function(){e("<input type="+i+" />").attr({name:this.name,value:this.value,checked:this.checked}).addClass("wpProQuiz_classCorrect wpProQuiz_checkbox").insertBefore(this)}).remove()}a=void 0!=o[t]?o[t]:e.noop(),e("."+t).show()}),e('input[name="answerType"]:checked').click(),e(".deleteAnswer").click(i.answerRemove),e(".addAnswer").click(function(){var t=e(this).siblings("ul"),a=t.find("li:eq(0)").clone();return a.find(".wpProQuiz_checkbox").removeAttr("checked"),a.find(".wpProQuiz_text").val(""),a.find(".wpProQuiz_points").val(1),a.find(".deleteAnswer").click(i.answerRemove),a.find(".addMedia").click(i.addMediaClick),a.appendTo(t),!1}),e(".sort_answer ul, .classic_answer ul, .matrix_sort_answer ul").sortable({handle:".wpProQuiz_move"}),e("#saveQuestion").click(function(){return i.globalValidate()?(i.generateArrayIndex(),!0):!1}),e(n.pointsModus).change(function(){t.displayChecked(this,e(".wpProQuiz_answerPoints")),t.displayChecked(this,e("#wpProQuiz_showPointsBox")),t.displayChecked(this,n.gPoints,!1,!0),t.displayChecked(this,e('input[name="answerPointsDiffModusActivated"]'),!0,!0),this.checked?(e('input[name="answerPointsDiffModusActivated"]').change(),e('input[name="disableCorrect"]').change()):(e(".classic_answer .wpProQuiz_classCorrect").parent().parent().show(),e('input[name="disableCorrect"]').attr("disabled","disabled"))}).change(),e('select[name="category"]').change(function(){var t=e(this),i=e("#categoryAddBox").hide();"-1"==t.val()&&i.show()}).change(),e("#categoryAddBtn").click(function(){i.addCategory()}),e(".addMedia").click(i.addMediaClick),e('input[name="answerPointsDiffModusActivated"]').change(function(){t.displayChecked(this,e('input[name="disableCorrect"]'),!0,!0),this.checked?e('input[name="disableCorrect"]').change():e(".classic_answer .wpProQuiz_classCorrect").parent().parent().show()}).change(),e('input[name="disableCorrect"]').change(function(){t.displayChecked(this,e(".classic_answer .wpProQuiz_classCorrect").parent().parent(),!0)}).change(),e("#clickPointDia").click(function(){return e(".pointDia").toggle("fast"),!1}),e('input[name="template"]').click(function(a){return"0"==e('select[name="templateSaveList"]').val()&&t.isEmpty(e('input[name="templateName"]').val())?(alert(wpProQuizLocalize.temploate_no_name),a.preventDefault(),!1):void i.generateArrayIndex()}),e('select[name="templateSaveList"]').change(function(){var t=e('input[name="templateName"]');"0"==e(this).val()?t.show():t.hide()}).change()},c=function(){n.answerChildren.hide(),r()};c()},statistic:function(){var i=this,a=e("#quizId").val(),n="users",o={currentPage:e("#wpProQuiz_currentPage"),pageLeft:e("#wpProQuiz_pageLeft"),pageRight:e("#wpProQuiz_pageRight"),testSelect:e("#testSelect")};i={loadStatistic:function(e,i){var a={userId:e};t.ajaxPost("statisticLoad",a,function(e){})},loadUsersStatistic:function(){},loadUsersStatistic_:function(n,o){var r={userId:n,quizId:a,testId:o};i.toggleLoadBox(!1),t.ajaxPost("statisticLoad",r,function(t){e.each(t.question,function(){var t=e("#wpProQuiz_tr_"+this.questionId);i.setStatisticData(t,this)}),e.each(t.category,function(t,a){var n=e("#wpProQuiz_ctr_"+t);i.setStatisticData(n,a)}),e("#testSelect option:gt(0)").remove();var a=e("#testSelect");e.each(t.tests,function(){var i=e(document.createElement("option"));i.val(this.id),i.text(this.date),t.testId==this.id&&i.attr("selected",!0),a.append(i)}),i.parseFormData(t.formData),e("#userSelect").val(n),e("#testSelect").val(o),i.toggleLoadBox(!0)})},parseFormData:function(t){var i=e("#wpProQuiz_form_box");return null==t?void i.hide():(e.each(t,function(t,i){e("#form_id_"+t).text(i)}),void i.show())},setStatisticData:function(e,t){e.find(".wpProQuiz_cCorrect").text(t.correct),e.find(".wpProQuiz_cIncorrect").text(t.incorrect),e.find(".wpProQuiz_cTip").text(t.hint),e.find(".wpProQuiz_cPoints").text(t.points),e.find(".wpProQuiz_cResult").text(t.result),e.find(".wpProQuiz_cTime").text(t.questionTime),e.find(".wpProQuiz_cCreateTime").text(t.date)},toggleLoadBox:function(t){var i=e("#wpProQuiz_loadData"),a=e("#wpProQuiz_content");t?(i.hide(),a.show()):(a.hide(),i.show())},reset:function(n){var r=e("#userSelect").val();if(confirm(wpProQuizLocalize.reset_statistics_msg)){var c={quizId:a,userId:r,testId:o.testSelect.val(),type:n};i.toggleLoadBox(!1),t.ajaxPost("statisticReset",c,function(){i.loadUsersStatistic()})}},loadStatisticOverview:function(n){var r={quizId:a,pageLimit:e("#wpProQuiz_pageLimit").val(),onlyCompleted:Number(e("#wpProQuiz_onlyCompleted").is(":checked")),page:o.currentPage.val(),nav:Number(n)};i.toggleLoadBox(!1),t.ajaxPost("statisticLoadOverview",r,function(t){var a=e("#wpProQuiz_statistics_overview_data"),n=a.children(),o=n.first().clone();n.slice(1).remove(),e.each(t.items,function(){var t=o.clone();i.setStatisticData(t,this),t.find("a").text(this.userName).data("userId",this.userId).click(function(){return e("#userSelect").val(e(this).data("userId")),e("#wpProQuiz_typeUser").click(),!1}),t.show().appendTo(a)}),o.remove(),i.toggleLoadBox(!0),void 0!=t.page&&i.handleNav(t.page)})},handleNav:function(t){for(var a=e("#wpProQuiz_currentPage").empty(),n=1;t>=n;n++)e(document.createElement("option")).val(n).text(n).appendTo(a);i.checkNavBar()},checkNavBar:function(){var e=o.currentPage.val();1==e?o.pageLeft.hide():o.pageLeft.show(),e==o.currentPage.children().length?o.pageRight.hide():o.pageRight.show()},refresh:function(){"users"==n?i.loadUsersStatistic():"formOverview"==n?i.loadFormsOverview(!0):i.loadStatisticOverview(!0)},loadFormsOverview:function(n){var o={quizId:a,pageLimit:e("#wpProQuiz_fromPageLimit").val(),onlyUser:e("#wpProQuiz_formUser").val(),page:e("#wpProQuiz_formCurrentPage").val(),nav:Number(n)};i.toggleLoadBox(!1),t.ajaxPost("statisticLoadFormOverview",o,function(t){var a=e("#wpProQuiz_statistics_form_data"),n=a.children(),o=n.first().clone();n.slice(1).remove(),e.each(t.items,function(){var t=o.clone();i.setStatisticData(t,this),t.find("a").text(this.userName).data("userId",this.userId).data("testId",this.testId).click(function(){return i.switchTabOnLoad("users"),i.loadUsersStatistic_(e(this).data("userId"),e(this).data("testId")),!1}),t.show().appendTo(a)}),o.remove(),i.toggleLoadBox(!0),void 0!=t.page&&i.handleFormNav(t.page)})},handleFormNav:function(t){for(var a=e("#wpProQuiz_formCurrentPage").empty(),n=1;t>=n;n++)e(document.createElement("option")).val(n).text(n).appendTo(a);i.checkFormNavBar()},checkFormNavBar:function(){var t=e("#wpProQuiz_formCurrentPage").val();1==t?e("#wpProQuiz_formPageLeft").hide():e("#wpProQuiz_formPageLeft").show(),t==e("#wpProQuiz_formCurrentPage").children().length?e("#wpProQuiz_formPageRight").hide():e("#wpProQuiz_formPageRight").show()},switchTabOnLoad:function(t){e(".wpProQuiz_tab").removeClass("button-primary").addClass("button-secondary"),e(".wpProQuiz_tabContent").hide();var i=e("#wpProQuiz_typeOverview");"users"==t?(n="users",e("#wpProQuiz_tabUsers").show(),i=e("#wpProQuiz_typeUser")):"formOverview"==t?(n="formOverview",e("#wpProQuiz_tabFormOverview").show(),i=e("#wpProQuiz_typeForm")):(n="overview",e("#wpProQuiz_tabOverview").show()),i.removeClass("button-secondary").addClass("button-primary")}};var r=function(){e("#userSelect, #testSelect").change(function(){i.loadUsersStatistic()}),e(".wpProQuiz_update").click(function(){i.refresh()}),e("#wpProQuiz_reset").click(function(){i.reset(0)}),e("#wpProQuiz_resetUser").click(function(){i.reset(1)}),e(".wpProQuiz_resetComplete").click(function(){i.reset(2)}),e(".wpProQuiz_tab").click(function(){var t=e(this);return e(".wpProQuiz_tab").removeClass("button-primary").addClass("button-secondary"),t.removeClass("button-secondary").addClass("button-primary"),e(".wpProQuiz_tabContent").hide(),"wpProQuiz_typeUser"==t.attr("id")?(n="users",e("#wpProQuiz_tabUsers").show(),i.loadUsersStatistic()):"wpProQuiz_typeForm"==t.attr("id")?(n="formOverview",e("#wpProQuiz_tabFormOverview").show(),i.loadFormsOverview(!0)):(n="overview",e("#wpProQuiz_tabOverview").show(),i.loadStatisticOverview(!0)),!1}),e("#wpProQuiz_onlyCompleted").change(function(){o.currentPage.val(1),i.loadStatisticOverview(!0)}),e("#wpProQuiz_pageLimit").change(function(){o.currentPage.val(1),i.loadStatisticOverview(!0)}),o.pageLeft.click(function(){o.currentPage.val(Number(o.currentPage.val())-1),i.loadStatisticOverview(!1),i.checkNavBar()}),o.pageRight.click(function(){o.currentPage.val(Number(o.currentPage.val())+1),i.loadStatisticOverview(!1),i.checkNavBar()}),o.currentPage.change(function(){i.loadStatisticOverview(!1),i.checkNavBar()}),e("#wpProQuiz_formUser, #wpProQuiz_fromPageLimit").change(function(){e("#wpProQuiz_formCurrentPage").val(1),i.loadFormsOverview(!0)}),e("#wpProQuiz_formPageLeft").click(function(){e("#wpProQuiz_formCurrentPage").val(Number(o.currentPage.val())-1),i.loadFormsOverview(!1),i.checkFormNavBar()}),e("#wpProQuiz_formPageRight").click(function(){e("#wpProQuiz_formCurrentPage").val(Number(o.currentPage.val())+1),i.loadFormsOverview(!1),i.checkFormNavBar()}),e("#wpProQuiz_formCurrentPage").change(function(){i.loadFormsOverview(!1),i.checkFormNavBar()}),i.loadUsersStatistic()};r()},statisticNew:function(){var a=e("#quizId").val(),n=null,o=null,r={data:{quizId:a,users:-1,pageLimit:100,dateFrom:0,dateTo:0,generateNav:0},changeFilter:function(){var t=function(e){var t=e.datepicker("getDate");return null===t?0:t.getTime()/1e3};return e.extend(this.data,{users:e("#wpProQuiz_historyUser").val(),pageLimit:e("#wpProQuiz_historyPageLimit").val(),dateFrom:t(e("#datepickerFrom")),dateTo:t(e("#datepickerTo")),generateNav:1}),this.data}},c={data:{pageLimit:100,onlyCompleted:0,generateNav:0,quizId:a},changeFilter:function(){e.extend(this.data,{pageLimit:e("#wpProQuiz_overviewPageLimit").val(),onlyCompleted:Number(e("#wpProQuiz_overviewOnlyCompleted").is(":checked")),generateNav:1})}},s={deleteUserStatistic:function(i,n){if(!confirm(wpProQuizLocalize.reset_statistics_msg))return!1;var o={refId:i,userId:n,quizId:a,type:0};t.ajaxPost("statisticResetNew",o,function(){e("#wpProQuiz_user_overlay").hide(),r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()})},deleteAll:function(){if(!confirm(wpProQuizLocalize.reset_statistics_msg))return!1;var e={quizId:a,type:1};t.ajaxPost("statisticResetNew",e,function(){r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()})}},u={loadHistoryAjax:function(){var i=e.extend({page:r.data.generateNav?1:n.getCurrentPage()},r.data);u.loadBox(!0);var a=e("#wpProQuiz_historyLoadContext").hide();t.ajaxPost("statisticLoadHistory",i,function(t){a.html(t.html).show(),t.navi&&n.setNumPage(t.navi),r.data.generateNav=0,a.find(".user_statistic").click(function(){return u.loadUserAjax(0,e(this).data("ref_id"),!1),!1}),a.find(".wpProQuiz_delete").click(function(){return s.deleteUserStatistic(e(this).parents("tr").find(".user_statistic").data("ref_id"),0),!1}),u.loadBox(!1)})},loadUserAjax:function(i,n,o){e("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var r=e("#wpProQuiz_user_content").hide(),c={quizId:a,userId:i,refId:n,avg:Number(o)};t.ajaxPost("statisticLoadUser",c,function(t){r.html(t.html),r.find(".wpProQuiz_update").click(function(){return u.loadUserAjax(i,n,o),!1}),r.find("#wpProQuiz_resetUserStatistic").click(function(){s.deleteUserStatistic(n,i)}),r.find(".statistic_data").click(function(){return e(this).parents("tr").next().toggle("fast"),!1}),e("#wpProQuiz_loadUserData").hide(),r.show()})},loadBox:function(t,i){t?e("#wpProQuiz_loadDataHistory").show():e("#wpProQuiz_loadDataHistory").hide()},loadOverviewAjax:function(){var i=e.extend({page:c.data.generateNav?1:o.getCurrentPage()},c.data);e("#wpProQuiz_loadDataOverview").show();var a=e("#wpProQuiz_overviewLoadContext").hide();t.ajaxPost("statisticLoadOverviewNew",i,function(t){a.html(t.html).show(),t.navi&&o.setNumPage(t.navi),c.data.generateNav=0,a.find(".user_statistic").click(function(){return u.loadUserAjax(e(this).data("user_id"),0,!0),!1}),a.find(".wpProQuiz_delete").click(function(){return s.deleteUserStatistic(0,e(this).parents("tr").find(".user_statistic").data("user_id")),!1}),e("#wpProQuiz_loadDataOverview").hide()})}},l=function(){n=new i(e("#historyNavigation"),{onChange:function(){u.loadHistoryAjax()}}),o=new i(e("#overviewNavigation"),{onChange:function(){u.loadOverviewAjax()}}),e("#datepickerFrom").datepicker({closeText:wpProQuizLocalize.closeText,currentText:wpProQuizLocalize.currentText,monthNames:wpProQuizLocalize.monthNames,monthNamesShort:wpProQuizLocalize.monthNamesShort,dayNames:wpProQuizLocalize.dayNames,dayNamesShort:wpProQuizLocalize.dayNamesShort,dayNamesMin:wpProQuizLocalize.dayNamesMin,dateFormat:wpProQuizLocalize.dateFormat,firstDay:wpProQuizLocalize.firstDay,changeMonth:!0,onClose:function(t){e("#datepickerTo").datepicker("option","minDate",t)}}),e("#datepickerTo").datepicker({closeText:wpProQuizLocalize.closeText,currentText:wpProQuizLocalize.currentText,monthNames:wpProQuizLocalize.monthNames,monthNamesShort:wpProQuizLocalize.monthNamesShort,dayNames:wpProQuizLocalize.dayNames,dayNamesShort:wpProQuizLocalize.dayNamesShort,dayNamesMin:wpProQuizLocalize.dayNamesMin,dateFormat:wpProQuizLocalize.dateFormat,firstDay:wpProQuizLocalize.firstDay,changeMonth:!0,onClose:function(t){e("#datepickerFrom").datepicker("option","maxDate",t)}}),e("#filter").click(function(){r.changeFilter(),u.loadHistoryAjax()}),e("#wpProQuiz_overlay_close").click(function(){e("#wpProQuiz_user_overlay").hide()}),e("#wpProQuiz_tabHistory .wpProQuiz_update").click(function(){return r.changeFilter(),u.loadHistoryAjax(),!1}),e("#wpProQuiz_tabOverview .wpProQuiz_update").click(function(){return c.changeFilter(),u.loadOverviewAjax(),!1}),e(".wpProQuiz_resetComplete").click(function(){return s.deleteAll(),!1}),e("#overviewFilter").click(function(){c.changeFilter(),u.loadOverviewAjax()}),r.changeFilter(),u.loadHistoryAjax(),c.changeFilter(),u.loadOverviewAjax()};l()}},o=function(){a();var t=e.noop;e(".wpProQuiz_questionEdit").length?t=n.questionEdit:e(".wpProQuiz_globalSettings").length?t=n.gobalSettings:e(".wpProQuiz_statistics").length?t=n.statistic:e(".wpProQuiz_statisticsNew").length&&(t=n.statisticNew),t(),e(".wpProQuiz_demoImgBox a").mouseover(function(t){var i=e(this),a=e(document).width(),n=i.siblings().outerWidth(!0);if(t.pageX+n>a){var o=a-(t.pageX+n+30);e(this).next().css("left",o+"px")}e(this).next().show()}).mouseout(function(){e(this).next().hide()}).click(function(){return!1})};o()}function i(t,i){var a={onChange:null},n={contain:null,pageLeft:null,pageRight:null,currentPage:null},o=function(){var e=n.currentPage.children().length,t=Number(n.currentPage.val());n.pageLeft.hide(),n.pageRight.hide(),t>1&&n.pageLeft.show(),e>=t+1&&n.pageRight.show()},r=function(){e.extend(n,{contain:t,pageLeft:t.find(".navigationLeft"),pageRight:t.find(".navigationRight"),currentPage:t.find(".navigationCurrentPage")}),e.extend(a,i),n.pageLeft.click(function(){n.currentPage.val(Number(n.currentPage.val())-1),o(),a.onChange&&a.onChange(n.currentPage.val())}),n.pageRight.click(function(){n.currentPage.val(Number(n.currentPage.val())+1),o(),a.onChange&&a.onChange(n.currentPage.val())}),n.currentPage.change(function(){o(),a.onChange&&a.onChange(n.currentPage.val())})};this.getCurrentPage=function(){return n.currentPage.val()},this.setNumPage=function(t){n.currentPage.empty();for(var i=1;t>=i;i++)e(document.createElement("option")).val(i).text(i).appendTo(n.currentPage);o()},r()}e.fn.wpProQuiz_preview=function(){var t={openPreview:function(t){window.open(e(t).attr("href"),"wpProQuizPreview","width=900,height=900")}},i=function(){e(".wpProQuiz_prview").click(function(e){t.openPreview(this),e.preventDefault()})};i()},e.fn.wpProQuiz_quizOverall=function(){},e.fn.wpProQuiz_quizEdit=function(){function t(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}var i={addCategory:function(){var i=e.trim(e('input[name="categoryAdd"]').val());if(!a(i)){var n={categoryName:i,type:"quiz"};t("categoryAdd",n,function(t){if(t.err)return void e("#categoryMsgBox").text(t.err).show("fast").delay(2e3).hide("fast");var i=e(document.createElement("option")).val(t.categoryId).text(t.categoryName).attr("selected","selected");e('select[name="category"]').append(i).change()})}},addResult:function(){e("#resultList").children().each(function(){if("none"==e(this).css("display")){var t=e(this),i=t.find('textarea[name="resultTextGrade[text][]"]'),a=i.attr("id"),n=!0;return t.find('input[name="resultTextGrade[prozent][]"]').val("0"),t.find('input[name="resultTextGrade[activ][]"]').val("1").keyup(),void 0==tinymce.editors[a]||tinymce.editors[a].isHidden()||(n=!1),void 0==switchEditors||n||(switchEditors.go(a,"toggle"),switchEditors.go(a,"toggle")),void 0!=tinymce.editors[a]?tinymce.editors[a].setContent(""):i.val(""),void 0==tinymce.editors[a]||n||tinyMCE.execCommand("mceRemoveControl",!1,a),t.parent().children(":visible").last().after(t),void 0==tinymce.editors[a]||n||tinyMCE.execCommand("mceAddControl",!1,a),e(this).show(),void 0==switchEditors||n||switchEditors.go(a,"toggle"),!1}})},deleteResult:function(t){e(t).parent().parent().hide(),e(t).siblings('input[name="resultTextGrade[activ][]"]').val("0")},changeResult:function(t){var a=e(t);return i.validResultInput(a.val())?(a.siblings(".resultProzent").text(a.val()),a.removeAttr("style"),!0):(a.css("background-color","#FF9696"),!1)},validResultInput:function(e){return a(e)?!1:(e=e.replace(/\,/,"."),!isNaN(e)&&Number(e)<=100&&Number(e)>=0?null!=e.match(/\./)?e.split(".")[1].length<3:!0:!1)},validInput:function(){if(a(e("#wpProQuiz_title").val()))return alert(wpProQuizLocalize.no_title_msg),!1;var t="";if(t=void 0==tinymce.editors.text||tinymce.editors.text.isHidden()?e('textarea[name="text"]').val():tinymce.editors.text.getContent(),a(t))return alert(wpProQuizLocalize.no_quiz_start_msg),!1;if(e("#wpProQuiz_resultGradeEnabled:checked").length){var n=!0;if(e("#resultList").children().each(function(){return e(this).is(":visible")&&!i.validResultInput(e(this).find('input[name="resultTextGrade[prozent][]"]').val())?(n=!1,!1):void 0}),!n)return alert(wpProQuizLocalize.fail_grade_result),!1}return!0},resetLock:function(){t("resetLock",{quizId:e('input[name="ajax_quiz_id"]').val()},function(){e("#resetLockMsg").show("fast").delay(2e3).hide("fast")})},generateFormIds:function(){var t=0;e("#form_table tbody > tr").each(function(){e(this).find('[name^="form[]"]').each(function(){var i=e(this).attr("name").substr(6);e(this).attr("name","form["+t+"]"+i)}),++t})},updateFormIds:function(){var t=-1,i=e(".emailFormVariables option:selected").val(),n=e(".formVariables").empty(),o=e(".emailFormVariables").empty().append('<option value="-1"></option>');e(".emailFormVariables").data("default")>-1&&(i=e(".emailFormVariables").data("default"),e(".emailFormVariables").data("default",-1)),e("#form_table tbody > tr").each(function(){e(this).children().first().text(t);var i=e(this).find(".formFieldName").val(),r=e(this).find('[name="form[][type]"] option:selected'),c=e(this).find('[name="form[][fieldname]"]').val();1!=e(this).find('input[name="form[][form_delete]"]').val()&&(t>=0&&!a(i)&&n.append(e("<li><span>$form{"+t+"}</span> - "+i+"</li>")),4==r.val()&&o.append(e('<option value="'+t+'">'+c+"</option>")),t++)}),e('.emailFormVariables option[value="'+i+'"]').prop("selected",!0)}},a=function(t){return t=e.trim(t),!t||0===t.length},n=function(){e("#statistics_on").change(function(){this.checked?e("#statistics_ip_lock_tr").show():e("#statistics_ip_lock_tr").hide()}),e(".addResult").click(function(){i.addResult()}),e(".deleteResult").click(function(e){i.deleteResult(this)}),e('input[name="resultTextGrade[prozent][]"]').keyup(function(e){i.changeResult(this)}).keydown(function(e){13==e.which&&e.preventDefault()}),e("#wpProQuiz_resultGradeEnabled").change(function(){this.checked?(e("#resultGrade").show(),e("#resultNormal").hide()):(e("#resultGrade").hide(),e("#resultNormal").show())}),e("#wpProQuiz_save").click(function(t){i.validInput()?i.generateFormIds():t.preventDefault(),e('select[name="prerequisiteList[]"] option').attr("selected","selected")}),e('input[name="template"]').click(function(t){return"0"==e('select[name="templateSaveList"]').val()&&a(e('input[name="templateName"]').val())?(alert(wpProQuizLocalize.temploate_no_name),t.preventDefault(),!1):(i.generateFormIds(),void e('select[name="prerequisiteList[]"] option').attr("selected","selected"))}),e('select[name="templateSaveList"]').change(function(){var t=e('input[name="templateName"]');"0"==e(this).val()?t.show():t.hide()}).change(),e('input[name="quizRunOnce"]').change(function(t){this.checked?(e("#wpProQuiz_quiz_run_once_type").show(),e('input[name="quizRunOnceType"]:checked').change()):e("#wpProQuiz_quiz_run_once_type").hide()}),e('input[name="quizRunOnceType"]').change(function(t){!this.checked||"1"!=this.value&&"3"!=this.value?e("#wpProQuiz_quiz_run_once_cookie").hide():e("#wpProQuiz_quiz_run_once_cookie").show()}),e('input[name="resetQuizLock"]').click(function(e){return i.resetLock(),!1}),e(".wpProQuiz_demoBox a").mouseover(function(t){var i=e(this),a=e("#poststuff").width(),n=i.siblings().outerWidth(!0);if(t.pageX+n>a){var o=jQuery(document).width()-i.parent().offset().left-n-30;e(this).next().css("left",o+"px")}e(this).next().show()}).mouseout(function(){e(this).next().hide()}).click(function(){return!1}),e('input[name="showMaxQuestion"]').change(function(){this.checked?e("#wpProQuiz_showMaxBox").show():e("#wpProQuiz_showMaxBox").hide()}),e("#btnPrerequisiteAdd").click(function(){e('select[name="quizList"] option:selected').removeAttr("selected").appendTo('select[name="prerequisiteList[]"]')}),e("#btnPrerequisiteDelete").click(function(){e('select[name="prerequisiteList[]"] option:selected').removeAttr("selected").appendTo('select[name="quizList"]')}),e('input[name="prerequisite"]').change(function(){this.checked?e("#prerequisiteBox").show():e("#prerequisiteBox").hide()}).change(),e('input[name="toplistDataAddMultiple"]').change(function(){this.checked?e("#toplistDataAddBlockBox").show():e("#toplistDataAddBlockBox").hide()}).change(),e('input[name="toplistActivated"]').change(function(){this.checked?e("#toplistBox > tr:gt(0)").show():e("#toplistBox > tr:gt(0)").hide();
}).change(),e('input[name="showReviewQuestion"]').change(function(){this.checked?e(".wpProQuiz_reviewQuestionOptions").show():e(".wpProQuiz_reviewQuestionOptions").hide()}).change(),e("#statistics_on").change(),e("#wpProQuiz_resultGradeEnabled").change(),e('input[name="quizRunOnce"]').change(),e('input[name="quizRunOnceType"]:checked').change(),e('input[name="showMaxQuestion"]').change(),e("#form_add").click(function(){e("#form_table tbody > tr:eq(0)").clone(!0).appendTo("#form_table tbody").show(),i.updateFormIds()}),e('input[name="form_delete"]').click(function(){var t=e(this).parents("tr");"0"!=t.find('input[name="form[][form_id]"]').val()?(t.find('input[name="form[][form_delete]"]').val(1),t.hide()):t.remove(),i.updateFormIds()}),e("#form_table tbody").sortable({handle:".form_move",update:i.updateFormIds}),e(".form_move").click(function(){return!1}),e('select[name="form[][type]"]').change(function(){switch(Number(e(this).val())){case 7:case 8:e(this).siblings(".editDropDown").show();break;default:e(this).siblings(".editDropDown, .dropDownEditBox").hide()}}).change(),e(".editDropDown").click(function(){return e(".dropDownEditBox").not(e(this).siblings(".dropDownEditBox").toggle()).hide(),!1}),e(".dropDownEditBox input").click(function(){e(this).parent().hide()}),e('.formFieldName, select[name="form[][type]"]').change(function(){i.updateFormIds()}),e('select[name="category"]').change(function(){var t=e(this),i=e("#categoryAddBox").hide();"-1"==t.val()&&i.show()}).change(),e("#categoryAddBtn").click(function(){i.addCategory()}),e('input[name="emailNotification"]').change(function(){var t=e("#adminEmailSettings tr:gt(0)");e('input[name="emailNotification"]:checked').val()>0?t.show():t.hide()}).change(),e('input[name="userEmailNotification"]').change(function(){var t=e("#userEmailSettings tr:gt(0)");e('input[name="userEmailNotification"]:checked').val()>0?t.show():t.hide()}).change(),i.updateFormIds(),e('input[name="email[html]"]').change(function(){return void 0==switchEditors?!1:void(this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html"))}),e('input[name="adminEmail[html]"]').change(function(){return void 0==switchEditors?!1:void(this.checked?switchEditors.go("adminEmailEditor","tmce"):switchEditors.go("adminEmailEditor","html"))}),e('input[name="userEmail[html]"]').change(function(){return void 0==switchEditors?!1:void(this.checked?switchEditors.go("userEmailEditor","tmce"):switchEditors.go("userEmailEditor","html"))}),setTimeout(function(){e('input[name="userEmail[html]"]').change(),e('input[name="email[html]"]').change()},1e3)};n()},e.fn.wpProQuiz_statistics=function(){var t="wpProQuiz_typeAnonymeUser",i=!0,a={loadStatistics:function(t){var i=window.location.pathname+window.location.search,n=i.replace("admin.php","admin-ajax.php")+"&action=load_statistics",o={action:"wp_pro_quiz_load_statistics",userId:t};e("#wpProQuiz_loadData").show(),e("#wpProQuiz_statistics_content, #wpProQuiz_statistics_overview").hide(),e.post(n,o,a.setStatistics,"json")},setStatistics:function(i){var a=e(".wpProQuiz_statistics_table"),n=a.find("tbody");if("wpProQuiz_typeOverview"!=t){var o=function(e,t,i){e.find(".wpProQuiz_cCorrect").text(t.cCorrect+" ("+t.pCorrect+"%)"),e.find(".wpProQuiz_cIncorrect").text(t.cIncorrect+" ("+t.pIncorrect+"%)"),e.find(".wpProQuiz_cTip").text(t.cTip),e.find(".wpProQuiz_cPoints").text(t.cPoints),1==i&&a.find(".wpProQuiz_cResult").text(t.result+"%")};o(a,i.clear,!1),e.each(i.items,function(e,t){o(n.find("#wpProQuiz_tr_"+t.id),t,!1)}),o(a.find("tfoot"),i.global,!0),e("#wpProQuiz_loadData").hide(),e("#wpProQuiz_statistics_content, .wpProQuiz_statistics_table").show()}},loadOverview:function(){e(".wpProQuiz_statistics_table, #wpProQuiz_statistics_content, #wpProQuiz_statistics_overview").hide(),e("#wpProQuiz_loadData").show();var n=window.location.pathname+window.location.search,o=n.replace("admin.php","admin-ajax.php")+"&action=load_statistics",r={action:"wp_pro_quiz_load_statistics",overview:!0,pageLimit:e("#wpProQuiz_pageLimit").val(),onlyCompleted:Number(e("#wpProQuiz_onlyCompleted").is(":checked")),page:e("#wpProQuiz_currentPage").val(),generatePageNav:Number(i)};e.post(o,r,function(n){if(e("#wpProQuiz_statistics_overview_data").empty(),"wpProQuiz_typeOverview"==t){var o=e('<tr><th><a href="#">---</a></th><th class="wpProQuiz_points">---</th><th class="wpProQuiz_cCorrect" style="color: green;">---</th><th class="wpProQuiz_cIncorrect" style="color: red;">---</th><th class="wpProQuiz_cTip">---</th><th class="wpProQuiz_cResult" style="font-weight: bold;">---</th></tr>');e.each(n.items,function(t,i){var a=o.clone();a.find("a").text(i.userName).data("userId",i.userId).click(function(){return e("#userSelect").val(e(this).data("userId")),e("#wpProQuiz_typeRegisteredUser").click(),!1}),i.completed?(a.find(".wpProQuiz_points").text(i.cPoints),a.find(".wpProQuiz_cCorrect").text(i.cCorrect+" ("+i.pCorrect+"%)"),a.find(".wpProQuiz_cIncorrect").text(i.cIncorrect+" ("+i.pIncorrect+"%)"),a.find(".wpProQuiz_cTip").text(i.cTip),a.find(".wpProQuiz_cResult").text(i.result+"%")):a.find("th").removeAttr("style"),e("#wpProQuiz_statistics_overview_data").append(a)}),void 0!=n.page&&(a.setPageNav(n.page),i=!1),e("#wpProQuiz_loadData").hide(),e("#wpProQuiz_statistics_overview").show()}},"json")},loadFormOverview:function(){e("#wpProQuiz_tabFormOverview").show()},changeTab:function(i){t=i,"wpProQuiz_typeRegisteredUser"==i?a.loadStatistics(e("#userSelect").val()):"wpProQuiz_typeAnonymeUser"==i?a.loadStatistics(0):"wpProQuiz_typeForm"==i?a.loadFormOverview():a.loadOverview()},resetStatistic:function(i){var n="wpProQuiz_typeRegisteredUser"==t?e("#userSelect").val():0,o=window.location.pathname+window.location.search,r=o.replace("admin.php","admin-ajax.php")+"&action=reset",c={action:"wp_pro_quiz_statistics",userId:n,complete:i};e.post(r,c,function(e){a.changeTab(t)})},setPageNav:function(t){t=Math.ceil(t/e("#wpProQuiz_pageLimit").val()),e("#wpProQuiz_currentPage").empty();for(var i=1;t>=i;i++)e(document.createElement("option")).val(i).text(i).appendTo(e("#wpProQuiz_currentPage"));e("#wpProQuiz_pageLeft, #wpProQuiz_pageRight").hide(),e("#wpProQuiz_currentPage option").length>1&&e("#wpProQuiz_pageRight").show()}},n=function(){e(".wpProQuiz_tab").click(function(t){var i=e(this);return i.hasClass("button-primary")?!1:("wpProQuiz_typeRegisteredUser"==i.attr("id")?e("#wpProQuiz_userBox").show():e("#wpProQuiz_userBox").hide(),e(".wpProQuiz_tab").removeClass("button-primary").addClass("button-secondary"),i.removeClass("button-secondary").addClass("button-primary"),a.changeTab(i.attr("id")),!1)}),e("#userSelect").change(function(){a.changeTab("wpProQuiz_typeRegisteredUser")}),e(".wpProQuiz_update").click(function(){return a.changeTab(t),!1}),e("#wpProQuiz_reset").click(function(){var e=confirm(wpProQuizLocalize.reset_statistics_msg);return e&&a.resetStatistic(!1),!1}),e(".wpProQuiz_resetComplete").click(function(){var e=confirm(wpProQuizLocalize.reset_statistics_msg);return e&&a.resetStatistic(!0),!1}),e("#wpProQuiz_pageLimit, #wpProQuiz_onlyCompleted").change(function(){return e("#wpProQuiz_currentPage").val(0),i=!0,a.changeTab(t),!1}),e("#wpProQuiz_currentPage").change(function(){e("#wpProQuiz_pageLeft, #wpProQuiz_pageRight").hide(),1==e("#wpProQuiz_currentPage option").length||(e("#wpProQuiz_currentPage option:first-child:selected").length?e("#wpProQuiz_pageRight").show():e("#wpProQuiz_currentPage option:last-child:selected").length?e("#wpProQuiz_pageLeft").show():e("#wpProQuiz_pageLeft, #wpProQuiz_pageRight").show()),a.changeTab(t)}),e("#wpProQuiz_pageRight").click(function(){return e("#wpProQuiz_currentPage option:selected").next().attr("selected","selected"),e("#wpProQuiz_currentPage").change(),!1}),e("#wpProQuiz_pageLeft").click(function(){return e("#wpProQuiz_currentPage option:selected").prev().attr("selected","selected"),e("#wpProQuiz_currentPage").change(),!1}),a.changeTab("wpProQuiz_typeAnonymeUser")};n()},e.fn.wpProQuiz_toplist=function(){function t(t,i,a){var n={action:"wp_pro_quiz_admin_ajax",func:t,data:i};e.post(ajaxurl,n,a,"json")}var i={sort:e("#wpProQuiz_sorting"),pageLimit:e("#wpProQuiz_pageLimit"),currentPage:e("#wpProQuiz_currentPage"),loadDataBox:e("#wpProQuiz_loadData"),pageLeft:e("#wpProQuiz_pageLeft"),pageRight:e("#wpProQuiz_pageRight"),dataBody:e("#wpProQuiz_toplistTable tbody"),rowClone:e("#wpProQuiz_toplistTable tbody tr:eq(0)").clone(),content:e("#wpProQuiz_content")},a={loadData:function(a){var n=this,o={sort:i.sort.val(),limit:i.pageLimit.val(),page:i.currentPage.val(),quizId:e('input[name="ajax_quiz_id"]').val()};void 0!=a&&e.extend(o,a),i.loadDataBox.show(),i.content.hide(),t("adminToplist",o,function(e){n.handleDataRequest(e.data),void 0!=e.nav&&n.handleNav(e.nav),i.loadDataBox.hide(),i.content.show()})},handleNav:function(t){i.currentPage.empty();for(var a=1;a<=t.pages;a++)e(document.createElement("option")).val(a).text(a).appendTo(i.currentPage);this.checkNav()},handleDataRequest:function(t){var a=this;i.dataBody.empty(),e.each(t,function(e,t){var a=i.rowClone.clone().children();a.eq(0).children().val(t.id),a.eq(1).find("strong").text(t.name),a.eq(1).find(".inline_editUsername").val(t.name),a.eq(2).find(".wpProQuiz_email").text(t.email),a.eq(2).find("input").val(t.email),a.eq(3).text(t.type),a.eq(4).text(t.date),a.eq(5).text(t.points),a.eq(6).text(t.result),a.parent().show().appendTo(i.dataBody)}),t.length||e(document.createElement("td")).attr("colspan","7").text(wpProQuizLocalize.no_data_available).css({"font-weight":"bold","text-align":"center",padding:"5px"}).appendTo(document.createElement("tr")).appendTo(i.dataBody),e(".wpProQuiz_delete").click(function(){if(confirm(wpProQuizLocalize.confirm_delete_entry)){var t=new Array(e(this).closest("tr").find('input[name="checkedData[]"]').val());a.loadData({a:"delete",toplistIds:t})}return!1}),e(".wpProQuiz_edit").click(function(){var t=e(this).closest("tr");return t.find(".row-actions").hide(),t.find(".inline-edit").show(),t.find(".wpProQuiz_username, .wpProQuiz_email").hide(),t.find(".inline_editUsername, .inline_editEmail").show(),!1}),e(".inline_editSave").click(function(){var t=e(this).closest("tr"),i=t.find(".inline_editUsername").val(),n=t.find(".inline_editEmail").val();return a.isEmpty(i)||a.isEmpty(n)?(alert(wpProQuizLocalize.not_all_fields_completed),!1):(a.loadData({a:"edit",toplistId:t.find('input[name="checkedData[]"]').val(),name:i,email:n}),!1)}),e(".inline_editCancel").click(function(){var t=e(this).closest("tr");return t.find(".row-actions").show(),t.find(".inline-edit").hide(),t.find(".wpProQuiz_username, .wpProQuiz_email").show(),t.find(".inline_editUsername, .inline_editEmail").hide(),t.find(".inline_editUsername").val(t.find(".wpProQuiz_username").text()),t.find(".inline_editEmail").val(t.find(".wpProQuiz_email").text()),!1})},checkNav:function(){var e=i.currentPage.val();1==e?i.pageLeft.hide():i.pageLeft.show(),e==i.currentPage.children().length?i.pageRight.hide():i.pageRight.show()},isEmpty:function(t){return t=e.trim(t),!t||0===t.length}},n=function(){i.sort.change(function(){a.loadData()}),i.pageLimit.change(function(){a.loadData({nav:1})}),i.currentPage.change(function(){a.checkNav(),a.loadData()}),i.pageLeft.click(function(){i.currentPage.val(Number(i.currentPage.val())-1),a.checkNav(),a.loadData()}),i.pageRight.click(function(){i.currentPage.val(Number(i.currentPage.val())+1),a.checkNav(),a.loadData()}),e("#wpProQuiz_deleteAll").click(function(){a.loadData({a:"deleteAll"})}),e("#wpProQuiz_action").click(function(){var t=e("#wpProQuiz_actionName").val();if("0"!=t){var i=e('input[name="checkedData[]"]:checked').map(function(){return e(this).val()}).get();a.loadData({a:t,toplistIds:i})}}),e("#wpProQuiz_checkedAll").change(function(){this.checked?e('input[name="checkedData[]"]').attr("checked","checked"):e('input[name="checkedData[]"]').removeAttr("checked","checked")}),a.loadData({nav:1})};n()},e(".wpProQuiz_quizOverall").length&&e(".wpProQuiz_quizOverall").wpProQuiz_preview(),e(".wpProQuiz_quizOverall").length&&e(".wpProQuiz_quizOverall").wpProQuiz_quizOverall(),e(".wpProQuiz_quizEdit").length&&e(".wpProQuiz_quizEdit").wpProQuiz_quizEdit(),e(".wpProQuiz_toplist").length&&e(".wpProQuiz_toplist").wpProQuiz_toplist(),t()});