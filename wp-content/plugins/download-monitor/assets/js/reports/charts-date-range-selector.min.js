jQuery.fn.extend({dlm_reports_date_range:function(a,b,c){return new DLM_Reports_Date_Range_Selector(this,a,b,c),this}});var DLM_Reports_Date_Range_Selector=function(a,b,c,d){this.container=a,this.startDate=new Date(b),this.endDate=new Date(c),this.url=d,this.el=null,this.opened=!1,this.startDateInput=null,this.endDateInput=null,this.setup=function(){var a=this;this.container.click(function(){return a.toggleDisplay(),!1})},this.setup()};DLM_Reports_Date_Range_Selector.prototype.toggleDisplay=function(){this.opened?this.hide():this.display()},DLM_Reports_Date_Range_Selector.prototype.display=function(){this.opened||(this.opened=!0,this.el=this.createElement(),this.container.append(this.el))},DLM_Reports_Date_Range_Selector.prototype.hide=function(){this.opened=!1,this.el.remove()},DLM_Reports_Date_Range_Selector.prototype.apply=function(){var a=new Date(this.startDateInput.val()),b=new Date(this.endDateInput.val()),c=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),d=b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate();this.hide(),window.location.replace(this.url+"&date_from="+c+"&date_to="+d)},DLM_Reports_Date_Range_Selector.prototype.createElement=function(){var a=this,b=jQuery("<div>").addClass("dlm_rdrs_overlay"),c=jQuery("<div>").addClass("dlm_rdrs_date").attr("id","dlm_rdrs_date_start"),d=jQuery("<div>").addClass("dlm_rdrs_date").attr("id","dlm_rdrs_date_end");this.startDateInput=jQuery("<input>").attr("type","hidden"),this.endDateInput=jQuery("<input>").attr("type","hidden");var e=jQuery("<div>").addClass("dlm_rdrs_actions"),f=jQuery("<a>").addClass("button").html("Apply").click(function(){return a.apply(),!1});return e.append(f),b.append(c).append(d).append(e).append(this.startDateInput).append(this.endDateInput),c.datepicker({inline:!0,altField:this.startDateInput,dateFormat:"yy-m-dd",defaultDate:this.startDate}),d.datepicker({inline:!0,altField:this.endDateInput,dateFormat:"yy-m-dd",defaultDate:this.endDate}),b.click(function(){return!1}),b};