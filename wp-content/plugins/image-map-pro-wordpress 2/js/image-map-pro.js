!function(t,e,i,o){function s(e,i){this.element=e,this.settings=t.extend(!0,{},u,i),this.root=t(e),this.wrap=o,this.ui=o,this.shapeContainer=o,this.shapeSvgContainer=o,this.fullscreenTooltipsContainer=o,this.visibleTooltip=o,this.visibleTooltipIndex=o,this.highlightedShape=o,this.highlightedShapeIndex=o,this.clickedShape=o,this.clickedShapeIndex=o,this.bodyOverflow=o,this.initTimeout=o,this.touch=!1,this.fullscreenTooltipVisible=!1,this.init()}function a(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function n(t,e,i,o,s,a){return t>=i&&t<=i+s&&e>=o&&e<=o+a}function l(t,e,i){for(var o=!1,s=0,a=i.length-1;s<i.length;a=s++){var n=i[s][0],l=i[s][1],r=i[a][0],p=i[a][1],h=l>e!=p>e&&t<(r-n)*(e-l)/(p-l)+n;h&&(o=!o)}return o}function r(t,e,i,o,s,a){var n=(t-i)*(t-i),l=s*s,r=(e-o)*(e-o),p=a*a;return n/l+r/p<=1}function p(e,o,s,a){return e<0&&(e=0),o<0&&(o=0),e>t(i).width()-s&&(e=t(i).width()-s),o>t(i).height()-a&&(o=t(i).height()-a),{x:e,y:o}}function h(t){for(var e,i,o=t.length;0!==o;)i=Math.floor(Math.random()*o),o-=1,e=t[o],t[o]=t[i],t[i]=e;return t}function d(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}var g=o;t.imageMapProInitialized=function(t){},t.imageMapProEventHighlightedShape=function(t,e){},t.imageMapProEventUnhighlightedShape=function(t,e){},t.imageMapProEventClickedShape=function(t,e){},t.imageMapProEventOpenedTooltip=function(t,e){},t.imageMapProEventClosedTooltip=function(t){},t.imageMapProHighlightShape=function(e,i){var o=t('[data-shape-title="'+i+'"]').data("index");f[e].highlightedShapeIndex!=o&&(f[e].highlightedShape&&f[e].unhighlightShape(),f[e].manuallyHighlightedShape=!0,f[e].highlightShape(o,!1))},t.imageMapProUnhighlightShape=function(t){f[t].highlightedShape&&f[t].unhighlightShape()},t.imageMapProOpenTooltip=function(e,i){var o=t('[data-shape-title="'+i+'"]').data("index");f[e].manuallyShownTooltip=!0,f[e].showTooltip(o),f[e].updateTooltipPosition(o)},t.imageMapProHideTooltip=function(t){f[t].hideTooltip()},t.imageMapProReInitMap=function(t){f[t].init()},t.imageMapProIsMobile=function(){return d()};var c="imageMapPro",u=t.imageMapProEditorDefaults,m=t.imageMapProShapeDefaults,f=new Array;MutationObserver=e.MutationObserver||e.WebKitMutationObserver;var y;t.extend(s.prototype,{init:function(){var i=this;i.parseSettings(),f[this.settings.general.name]=this,this.id=100*Math.random();for(var o=0;o<i.settings.spots.length;o++){var s=i.settings.spots[o],a=t.extend(!0,{},m);s=t.extend(!0,a,s),i.settings.spots[o]=t.extend(!0,{},s),i.settings.spots[o].title&&0!=i.settings.spots[o].title.length||(i.settings.spots[o].title=i.settings.spots[o].id)}i.root.addClass("imp-initialized"),i.root.attr("data-image-map-pro-id",i.settings.id),i.root.html('<div class="imp-wrap"></div>'),i.wrap=i.root.find(".imp-wrap");var n=new Image;n.src=i.settings.image.url,i.loadImage(n,function(){},function(){var e="";e+='<img src="'+i.settings.image.url+'">',i.wrap.html(e),i.centerImageMap(),i.adjustSize(),i.drawShapes(),i.addTooltips(),i.initFullscreen(),i.events(),i.animateShapesLoop(),t.imageMapProInitialized(i.settings.general.name)}),t(e).on("resize",function(){i.visibleTooltip&&i.updateTooltipPosition(i.highlightedShapeIndex)})},parseSettings:function(){this.settings.general.image_url&&(this.settings.image.url=this.settings.general.image_url)},loadImage:function(e,i,s){e.complete&&e.naturalWidth!==o&&e.naturalHeight!==o?s():(i(),t(e).on("load",function(){t(e).off("load"),s()}))},centerImageMap:function(){var t=this;1==parseInt(t.settings.general.center_image_map,10)&&t.wrap.css({margin:"0 auto"})},adjustSize:function(){var i=this;if(1==parseInt(i.settings.runtime.is_fullscreen,10)){var o=t(e).width()/t(e).height(),s=i.settings.general.width/i.settings.general.height;return s<o?(i.settings.general.width=t(e).height()*s,i.settings.general.height=t(e).height()):(i.settings.general.width=t(e).width(),i.settings.general.height=t(e).width()/s),void i.wrap.css({width:i.settings.general.width,height:i.settings.general.height})}if(1==parseInt(i.settings.general.responsive,10)){if(1==parseInt(i.settings.general.preserve_quality,10)){i.settings.general.naturalWidth||i.settings.general.width;i.wrap.css({"max-width":i.settings.general.naturalWidth})}}else i.wrap.css({width:i.settings.general.width,height:i.settings.general.height})},drawShapes:function(){for(var t=this,e=0;e<t.settings.spots.length;e++){var i=t.settings.spots[e];if(i.x=parseFloat(i.x),i.y=parseFloat(i.y),i.width=parseFloat(i.width),i.height=parseFloat(i.height),i.default_style.stroke_width=parseInt(i.default_style.stroke_width),i.mouseover_style.stroke_width=parseInt(i.mouseover_style.stroke_width),"poly"==i.type)for(var o=0;o<i.points.length;o++)i.points[o].x=parseFloat(i.points[o].x),i.points[o].y=parseFloat(i.points[o].y)}t.settings.general.width=parseInt(t.settings.general.width),t.settings.general.height=parseInt(t.settings.general.height),t.wrap.prepend('<div class="imp-shape-container"></div>'),t.shapeContainer=t.wrap.find(".imp-shape-container");var s="",n=!1,l=t.settings.general.width,r=t.settings.general.height;1==parseInt(t.settings.general.responsive,10)&&(l=t.settings.general.naturalWidth,r=t.settings.general.naturalHeight);for(var p='<svg class="hs-poly-svg" viewBox="0 0 '+l+" "+r+'" preserveAspectRatio="none">',e=0;e<t.settings.spots.length;e++){var i=t.settings.spots[e];if("spot"==i.type)if(1==parseInt(i.default_style.use_icon,10)){var h="",d=i.width<44?44:i.width,g=i.height<44?44:i.height;h+="left: "+i.x+"%;",h+="top: "+i.y+"%;",h+="width: "+d+"px;",h+="height: "+g+"px;";var c=-g/2,u=-d/2;if(1==parseInt(i.default_style.icon_is_pin,10)&&(c=-g,i.height<44&&(c=-g/2-i.height/2)),h+="margin-left: "+u+"px;",h+="margin-top: "+c+"px;",h+="background-image: url("+i.default_style.icon_url+")",h+="background-position: center;",h+="background-repeat: no-repeat;","fade"==t.settings.general.pageload_animation&&(h+="opacity: 0;"),"grow"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";",h+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",1==parseInt(i.default_style.icon_is_pin,10)&&(h+="transform-origin: 50% 100%;-moz-transform-origin: 50% 100%;-webkit-transform-origin: 50% 100%;")),"none"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";"),s+='<div class="imp-shape imp-shape-spot" id="'+i.id+'" data-shape-title="'+i.title+'" style="'+h+'" data-index='+e+">","library"==i.default_style.icon_type?(s+='   <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" viewBox="'+i.default_style.icon_svg_viewbox+'" xml:space="preserve" width="'+i.width+'px" height="'+i.height+'px">',s+='       <path style="fill:'+i.default_style.icon_fill+'" d="'+i.default_style.icon_svg_path+'"></path>',s+="   </svg>"):s+='<img src="'+i.default_style.icon_url+'" style="width: '+i.width+"px; height: "+i.height+'px">',1==parseInt(i.default_style.icon_shadow,10)){var m="";m+="width: "+i.width+"px;",m+="height: "+i.height+"px;",m+="top: "+i.height/2+"px;",s+='<div style="'+m+'" class="imp-shape-icon-shadow"></div>'}s+="</div>"}else{var h="",f=a(i.default_style.background_color)||{r:0,b:0,g:0},y=a(i.default_style.border_color)||{r:0,b:0,g:0};h+="left: "+i.x+"%;",h+="top: "+i.y+"%;",h+="width: "+i.width+"px;",h+="height: "+i.height+"px;",h+="margin-left: -"+i.width/2+"px;",h+="margin-top: -"+i.height/2+"px;",h+="border-radius: "+i.default_style.border_radius+"px;",h+="background: rgba("+f.r+", "+f.g+", "+f.b+", "+i.default_style.background_opacity+");",h+="border-width: "+i.default_style.border_width+"px;",h+="border-style: "+i.default_style.border_style+";",h+="border-color: rgba("+y.r+", "+y.g+", "+y.b+", "+i.default_style.border_opacity+");","fade"==t.settings.general.pageload_animation&&(h+="opacity: 0;"),"grow"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";",h+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";"),s+='<div class="imp-shape imp-shape-spot" id="'+i.id+'" data-shape-title="'+i.title+'" style="'+h+'" data-index='+e+"></div>"}if("rect"==i.type){var h="",f=a(i.default_style.background_color)||{r:0,b:0,g:0},y=a(i.default_style.border_color)||{r:0,b:0,g:0};h+="left: "+i.x+"%;",h+="top: "+i.y+"%;",h+="width: "+i.width+"%;",h+="height: "+i.height+"%;",h+="border-radius: "+i.default_style.border_radius+"px;",h+="background: rgba("+f.r+", "+f.g+", "+f.b+", "+i.default_style.background_opacity+");",h+="border-width: "+i.default_style.border_width+"px;",h+="border-style: "+i.default_style.border_style+";",h+="border-color: rgba("+y.r+", "+y.g+", "+y.b+", "+i.default_style.border_opacity+");","fade"==t.settings.general.pageload_animation&&(h+="opacity: 0;"),"grow"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";",h+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";"),s+='<div class="imp-shape imp-shape-rect" id="'+i.id+'" data-shape-title="'+i.title+'" style="'+h+'" data-index='+e+"></div>"}if("oval"==i.type){var h="",f=a(i.default_style.background_color)||{r:0,b:0,g:0},y=a(i.default_style.border_color)||{r:0,b:0,g:0};h+="left: "+i.x+"%;",h+="top: "+i.y+"%;",h+="width: "+i.width+"%;",h+="height: "+i.height+"%;",h+="border-radius: 50% 50%;",h+="background: rgba("+f.r+", "+f.g+", "+f.b+", "+i.default_style.background_opacity+");",h+="border-width: "+i.default_style.border_width+"px;",h+="border-style: "+i.default_style.border_style+";",h+="border-color: rgba("+y.r+", "+y.g+", "+y.b+", "+i.default_style.border_opacity+");","fade"==t.settings.general.pageload_animation&&(h+="opacity: 0;"),"grow"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";",h+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);"),"none"==t.settings.general.pageload_animation&&(h+="opacity: "+i.default_style.opacity+";"),s+='<div class="imp-shape imp-shape-oval" id="'+i.id+'" data-shape-title="'+i.title+'" style="'+h+'" data-index='+e+"></div>"}if("poly"==i.type){n=!0;var _=a(i.default_style.fill)||{r:0,b:0,g:0},v=a(i.default_style.stroke_color)||{r:0,b:0,g:0},b="";if(b+="width: 100%;",b+="height: 100%;",b+="fill: rgba("+_.r+", "+_.g+", "+_.b+", "+i.default_style.fill_opacity+");",b+="stroke: rgba("+v.r+", "+v.g+", "+v.b+", "+i.default_style.stroke_opacity+");",b+="stroke-width: "+i.default_style.stroke_width+"px;",b+="stroke-dasharray: "+i.default_style.stroke_dasharray+";",b+="stroke-linecap: "+i.default_style.stroke_linecap+";","fade"==t.settings.general.pageload_animation&&(b+="opacity: 0;"),"grow"==t.settings.general.pageload_animation){b+="opacity: "+i.default_style.opacity+";",b+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);";var w=i.x+i.width/2,k=i.y+i.height/2;b+="transform-origin: "+w+"% "+k+"%;-moz-transform-origin: "+w+"% "+k+"%;-webkit-transform-origin: "+w+"% "+k+"%;"}"none"==t.settings.general.pageload_animation&&(b+="opacity: "+i.default_style.opacity+";");var x=l*(i.width/100),S=r*(i.height/100);p+='           <polygon class="imp-shape imp-shape-poly" style="'+b+'" data-index='+e+' id="'+i.id+'" data-shape-title="'+i.title+'" points="',i.vs=new Array;for(var o=0;o<i.points.length;o++){var T=l*(i.x/100)+i.points[o].x/100*x,I=r*(i.y/100)+i.points[o].y/100*S;p+=T+","+I+" ",i.vs.push([T,I])}p+='           "></polygon>'}}p+="</svg>",n?t.shapeContainer.html(s+p):t.shapeContainer.html(s)},addTooltips:function(){var e=this;if("always"==e.settings.tooltips.fullscreen_tooltips||"mobile-only"==e.settings.tooltips.fullscreen_tooltips&&d()){e.fullscreenTooltipsContainer||(t('.imp-fullscreen-tooltips-container[data-image-map-id="'+e.settings.id+'"]').remove(),t("body").prepend('<div class="imp-fullscreen-tooltips-container" data-image-map-id="'+e.settings.id+'"></div>'),e.fullscreenTooltipsContainer=t('.imp-fullscreen-tooltips-container[data-image-map-id="'+e.settings.id+'"]'));for(var i="",o=0;o<e.settings.spots.length;o++){var s=e.settings.spots[o];s.tooltip_content.plain_text=s.tooltip_content.plain_text.replace(/\n/g,"<br>");var n="",l=a(s.tooltip_style.background_color)||{r:0,b:0,g:0};if(n+="padding: "+s.tooltip_style.padding+"px;",n+="background: rgba("+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+");","none"==e.settings.tooltips.tooltip_animation&&(n+="opacity: 0;"),"fade"==e.settings.tooltips.tooltip_animation&&(n+="opacity: 0;",n+="transition-property: opacity;-moz-transition-property: opacity;-webkit-transition-property: opacity;"),"grow"==e.settings.tooltips.tooltip_animation&&(n+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",n+="transition-property: transform;-moz-transition-property: -moz-transform;-webkit-transition-property: -webkit-transform;",n+="transform-origin: 50% 50%;-moz-transform-origin: 50% 50%;-webkit-transform-origin: 50% 50%;"),i+='<div class="imp-fullscreen-tooltip" style="'+n+'" data-index="'+o+'">',i+='   <div class="imp-tooltip-close-button" data-index="'+o+'"><i class="fa fa-times" aria-hidden="true"></i></div>',"plain-text"==s.tooltip_content.content_type){var n="";n+="color: "+s.tooltip_content.plain_text_color+";",i+='<div class="imp-tooltip-plain-text" style="'+n+'">'+s.tooltip_content.plain_text+"</div>"}else i+=s.tooltip_content.squares_json?t.squaresRendererRenderObject(s.tooltip_content.squares_json):t.squaresRendererRenderObject(s.tooltip_content.squares_settings);i+="</div>"}e.fullscreenTooltipsContainer.html(i)}else{for(var i="",o=0;o<e.settings.spots.length;o++){var s=e.settings.spots[o];s.tooltip_content.plain_text=s.tooltip_content.plain_text.replace(/\n/g,"<br>");var n="",l=a(s.tooltip_style.background_color)||{r:0,b:0,g:0},r="poly"==s.type?"imp-tooltip-buffer-large":"";if(n+="border-radius: "+s.tooltip_style.border_radius+"px;",n+="padding: "+s.tooltip_style.padding+"px;",n+="background: rgba("+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+");","none"==e.settings.tooltips.tooltip_animation&&(n+="opacity: 0;"),"fade"==e.settings.tooltips.tooltip_animation&&(n+="opacity: 0;",n+="transition-property: opacity;-moz-transition-property: opacity;-webkit-transition-property: opacity;"),"grow"==e.settings.tooltips.tooltip_animation&&(n+="transform: scale(0, 0);-moz-transform: scale(0, 0);-webkit-transform: scale(0, 0);",n+="transition-property: transform;-moz-transition-property: -moz-transform;-webkit-transition-property: -webkit-transform;","top"==s.tooltip_style.position&&(n+="transform-origin: 50% 100%;-moz-transform-origin: 50% 100%;-webkit-transform-origin: 50% 100%;"),"bottom"==s.tooltip_style.position&&(n+="transform-origin: 50% 0%;-moz-transform-origin: 50% 0%;-webkit-transform-origin: 50% 0%;"),"left"==s.tooltip_style.position&&(n+="transform-origin: 100% 50%;-moz-transform-origin: 100% 50%;-webkit-transform-origin: 100% 50%;"),"right"==s.tooltip_style.position&&(n+="transform-origin: 0% 50%;-moz-transform-origin: 0% 50%;-webkit-transform-origin: 0% 50%;")),i+='<div class="imp-tooltip" style="'+n+'" data-index="'+o+'">',"top"==s.tooltip_style.position&&(i+='   <div class="hs-arrow hs-arrow-bottom" style="border-top-color: rgba('+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+');"></div>',0==parseInt(e.settings.tooltips.sticky_tooltips,10)&&(i+='   <div class="imp-tooltip-buffer imp-tooltip-buffer-bottom '+r+'"></div>')),"bottom"==s.tooltip_style.position&&(i+='   <div class="hs-arrow hs-arrow-top" style="border-bottom-color: rgba('+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+');"></div>',0==parseInt(e.settings.tooltips.sticky_tooltips,10)&&(i+='   <div class="imp-tooltip-buffer imp-tooltip-buffer-top '+r+'"></div>')),"left"==s.tooltip_style.position&&(i+='   <div class="hs-arrow hs-arrow-right" style="border-left-color: rgba('+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+');"></div>',0==parseInt(e.settings.tooltips.sticky_tooltips,10)&&(i+='   <div class="imp-tooltip-buffer imp-tooltip-buffer-right '+r+'"></div>')),"right"==s.tooltip_style.position&&(i+='   <div class="hs-arrow hs-arrow-left" style="border-right-color: rgba('+l.r+", "+l.g+", "+l.b+", "+s.tooltip_style.background_opacity+');"></div>',0==parseInt(e.settings.tooltips.sticky_tooltips,10)&&(i+='   <div class="imp-tooltip-buffer imp-tooltip-buffer-left '+r+'"></div>')),"plain-text"==s.tooltip_content.content_type){var n="";n+="color: "+s.tooltip_content.plain_text_color+";",i+='<div class="imp-tooltip-plain-text" style="'+n+'">'+s.tooltip_content.plain_text+"</div>"}else i+=s.tooltip_content.squares_json?t.squaresRendererRenderObject(s.tooltip_content.squares_json):t.squaresRendererRenderObject(s.tooltip_content.squares_settings);i+="</div>"}e.wrap.prepend(i)}},initFullscreen:function(){var t=this;if(1==parseInt(t.settings.fullscreen.enable_fullscreen_mode,10)){var e="";e+="background: "+t.settings.fullscreen.fullscreen_button_color+"; ",e+="color: "+t.settings.fullscreen.fullscreen_button_text_color+"; ";var i='<i class="fa fa-arrows-alt" aria-hidden="true"></i>';1==parseInt(t.settings.runtime.is_fullscreen,10)&&(i='<i class="fa fa-times" aria-hidden="true"></i>');var o="Go Fullscreen";1==parseInt(t.settings.runtime.is_fullscreen,10)&&(o="Close Fullscreen");var s="";"icon"==t.settings.fullscreen.fullscreen_button_type&&(s+=i),"text"==t.settings.fullscreen.fullscreen_button_type&&(s+=o),"icon_and_text"==t.settings.fullscreen.fullscreen_button_type&&(s+=i+" "+o);var a="";"icon"==t.settings.fullscreen.fullscreen_button_type&&(a+="imp-fullscreen-button-icon-only");var n="";n+='<div style="'+e+'" class="'+a+" imp-fullscreen-button imp-fullscreen-button-position-"+t.settings.fullscreen.fullscreen_button_position+'">',n+=s,n+="</div>",t.wrap.append('<div class="imp-ui"></div>'),t.ui=t.wrap.find(".imp-ui"),t.ui.append(n);var l=t.ui.find(".imp-fullscreen-button");1!=parseInt(t.settings.fullscreen.fullscreen_button_position,10)&&4!=parseInt(t.settings.fullscreen.fullscreen_button_position,10)||l.css({"margin-left":-l.outerWidth()/2}),1==parseInt(t.settings.fullscreen.start_in_fullscreen_mode,10)&&0==t.settings.runtime.is_fullscreen&&t.toggleFullscreen()}},measureTooltipSize:function(t){if(!("always"==this.settings.tooltips.fullscreen_tooltips||"mobile"==this.settings.tooltips.fullscreen_tooltips&&d())){var e=this.settings.spots[t],i=this.wrap.find('.imp-tooltip[data-index="'+t+'"]');0==parseInt(e.tooltip_style.auto_width,10)&&i.css({width:e.tooltip_style.width}),i.data("imp-measured-width",i.outerWidth()),i.data("imp-measured-height",i.outerHeight())}},animateShapesLoop:function(){if("none"!=this.settings.general.pageload_animation)for(var t=750/this.settings.spots.length,e=h(this.settings.spots.slice()),i=0;i<e.length;i++)this.animateShape(e[i],t*i)},animateShape:function(e,i){var o=this,s=t("#"+e.id);setTimeout(function(){"fade"==o.settings.general.pageload_animation&&s.css({opacity:e.default_style.opacity}),"grow"==o.settings.general.pageload_animation&&s.css({transform:"scale(1, 1)","-moz-transform":"scale(1, 1)","-webkit-transform":"scale(1, 1)"})},i)},events:function(){var e=this;this.wrap.off("mousemove"),this.wrap.on("mousemove",function(t){e.touch||e.handleEventMove(t)}),this.wrap.off("mouseup"),this.wrap.on("mouseup",function(t){e.touch||e.handleEventEnd(t)}),this.wrap.off("touchstart"),this.wrap.on("touchstart",function(t){e.touch=!0,e.handleEventMove(t)}),this.wrap.off("touchmove"),this.wrap.on("touchmove",function(t){e.handleEventMove(t)}),this.wrap.off("touchend"),this.wrap.on("touchend",function(t){e.handleEventEnd(t)}),t(i).off("mousemove."+this.settings.id),t(i).on("mousemove."+this.settings.id,function(i){e.touch||e.manuallyHighlightedShape||e.manuallyShownTooltip||0==t(i.target).closest(".imp-wrap").length&&0==t(i.target).closest(".imp-fullscreen-tooltips-container").length&&(e.visibleTooltip&&e.hideTooltip(),e.clickedShape&&e.unclickShape(),e.highlightedShape&&e.unhighlightShape())}),t(i).off("touchstart."+this.settings.id),t(i).on("touchstart."+this.settings.id,function(i){e.manuallyHighlightedShape||e.manuallyShownTooltip||0==t(i.target).closest(".imp-wrap").length&&0==t(i.target).closest(".imp-fullscreen-tooltips-container").length&&(e.visibleTooltip&&e.hideTooltip(),e.clickedShape&&e.unclickShape(),e.highlightedShape&&e.unhighlightShape())}),t(i).off("click."+this.settings.id,".imp-tooltip-close-button"),t(i).on("click."+this.settings.id,".imp-tooltip-close-button",function(){e.hideTooltip(),e.clickedShape&&e.unclickShape(),e.highlightedShape&&e.unhighlightShape()}),1==parseInt(this.settings.general.late_initialization,10)?y||(y=new MutationObserver(function(i,o){clearTimeout(e.initTimeout),e.initTimeout=setTimeout(function(){for(var o=0;o<i.length;o++)if(0==t(i[o].target).closest(".imp-initialized").length&&!t(i[o].target).hasClass("imp-initialized")){e.init();break}},50)}),y.observe(i,{subtree:!0,attributes:!0})):y&&(y.disconnect(),y=o),t(i).off("click."+this.settings.id,'[data-image-map-pro-id="'+this.settings.id+'"] .imp-fullscreen-button'),t(i).on("click."+this.settings.id,'[data-image-map-pro-id="'+this.settings.id+'"] .imp-fullscreen-button',function(){e.toggleFullscreen()}),t(i).on("mouseover","[data-imp-highlight-shape-on-mouseover]",function(){var i=t(this).data("imp-highlight-shape-on-mouseover"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.manuallyHighlightedShape=!0,e.highlightShape(s,!0)}}),t(i).on("mouseout","[data-imp-highlight-shape-on-mouseover]",function(){var i=(t(this).data("imp-highlight-shape-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.unhighlightShape()}),t(i).on("click","[data-imp-highlight-shape-on-click]",function(){var i=t(this).data("imp-highlight-shape-on-click"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.highlightedShape&&e.unhighlightShape(),e.manuallyHighlightedShape=!0,e.highlightShape(s,!0)}}),t(i).on("mouseover","[data-imp-unhighlight-shape-on-mouseover]",function(){var i=(t(this).data("imp-unhighlight-shape-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.highlightedShape&&e.unhighlightShape()}),t(i).on("mouseover","[data-imp-unhighlight-shape-on-click]",function(){var i=(t(this).data("imp-unhighlight-shape-on-click"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.highlightedShape&&e.unhighlightShape()}),t(i).on("mouseover","[data-imp-open-tooltip-on-mouseover]",function(){var i=t(this).data("imp-open-tooltip-on-mouseover"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.manuallyShownTooltip=!0,e.showTooltip(s),e.updateTooltipPosition(s)}}),t(i).on("mouseout","[data-imp-open-tooltip-on-mouseover]",function(){var i=(t(this).data("imp-open-tooltip-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.hideTooltip()}),t(i).on("click","[data-imp-open-tooltip-on-click]",function(){var i=t(this).data("imp-open-tooltip-on-click"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.manuallyShownTooltip=!0,e.showTooltip(s),e.updateTooltipPosition(s)}}),t(i).on("mouseover","[data-imp-close-tooltip-on-mouseover]",function(){var i=(t(this).data("imp-close-tooltip-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.hideTooltip()}),t(i).on("click","[data-imp-close-tooltip-on-click]",function(){var i=(t(this).data("imp-close-tooltip-on-click"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||e.hideTooltip()}),t(i).on("mouseover","[data-imp-trigger-shape-on-mouseover]",function(){var i=t(this).data("imp-trigger-shape-on-mouseover"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.manuallyHighlightedShape=!0,e.manuallyShownTooltip=!0,e.highlightShape(s,!0),e.showTooltip(s),e.updateTooltipPosition(s)}}),t(i).on("mouseout","[data-imp-trigger-shape-on-mouseover]",function(){var i=(t(this).data("imp-trigger-shape-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||(e.unhighlightShape(),e.hideTooltip())}),t(i).on("click","[data-imp-trigger-shape-on-click]",function(){var i=t(this).data("imp-trigger-shape-on-click"),o=t(this).data("imp-image-map-name");if(!o||o==e.settings.general.name){var s=t('[data-shape-title="'+i+'"]').data("index");e.highlightedShape&&e.unhighlightShape(),e.manuallyHighlightedShape=!0,e.manuallyShownTooltip=!0,e.highlightShape(s,!0),e.showTooltip(s),e.updateTooltipPosition(s)}}),t(i).on("mouseover","[data-imp-untrigger-shape-on-mouseover]",function(){var i=(t(this).data("imp-untrigger-shape-on-mouseover"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||(e.highlightedShape&&e.unhighlightShape(),e.hideTooltip())}),t(i).on("mouseover","[data-imp-untrigger-shape-on-click]",function(){var i=(t(this).data("imp-untrigger-shape-on-click"),t(this).data("imp-image-map-name"));i&&i!=e.settings.general.name||(e.highlightedShape&&e.unhighlightShape(),e.hideTooltip())})},disableEvents:function(){this.wrap.off("mousemove"),this.wrap.off("mouseup"),this.wrap.off("touchstart"),this.wrap.off("touchmove"),this.wrap.off("touchend"),t(i).off("mousemove."+this.settings.id),t(i).off("touchstart."+this.settings.id),t(i).off("click."+this.settings.id,".imp-tooltip-close-button"),t(i).off("click."+this.settings.id,".imp-fullscreen-button")},handleEventMove:function(e){if(!this.fullscreenTooltipVisible&&(0==t(e.target).closest(".imp-tooltip").length&&!t(e.target).hasClass("imp-tooltip")||0!=parseInt(this.settings.tooltips.sticky_tooltips,10))){(this.manuallyHighlightedShape||this.manuallyShownTooltip)&&(this.manuallyHighlightedShape=!1,this.manuallyShownTooltip=!1);var i=this.getEventRelativeCoordinates(e),o=this.matchShapeToCoords(i);o!=-1&&o!=this.highlightedShapeIndex?(this.highlightedShape&&this.unhighlightShape(),this.highlightShape(o,!0)):o==-1&&this.highlightedShape&&this.highlightedShapeIndex!=this.clickedShapeIndex&&this.unhighlightShape(),this.highlightedShape&&this.visibleTooltipIndex!=this.highlightedShapeIndex?"show-tooltip"==this.highlightedShape.actions.mouseover&&(this.visibleTooltip&&this.hideTooltip(),this.clickedShape&&this.unclickShape(),this.showTooltip(this.highlightedShapeIndex),this.updateTooltipPosition(o,e)):!this.visibleTooltip||this.highlightedShape||this.clickedShape||this.visibleTooltip&&this.hideTooltip(),this.visibleTooltip&&this.highlightedShape&&1==parseInt(this.settings.tooltips.sticky_tooltips,10)&&"show-tooltip"==this.highlightedShape.actions.mouseover&&this.updateTooltipPosition(this.highlightedShapeIndex,e)}},handleEventEnd:function(e){if((0==t(e.target).closest(".imp-tooltip").length||t(e.target).hasClass("imp-tooltip-buffer"))&&!this.fullscreenTooltipVisible){(this.manuallyHighlightedShape||this.manuallyShownTooltip)&&(this.manuallyHighlightedShape=!1,this.manuallyShownTooltip=!1);var i=this.getEventRelativeCoordinates(e),o=this.matchShapeToCoords(i);o!=-1&&o!=this.clickedShapeIndex?(this.clickedShape&&this.unclickShape(),this.clickShape(o,e)):o==-1&&this.clickedShape&&this.unclickShape()}},getEventRelativeCoordinates:function(t){var e,i;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=o.pageX,i=o.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e=t.pageX,i=t.pageY);return e-=this.wrap.offset().left,i-=this.wrap.offset().top,e=e/this.wrap.width()*100,i=i/this.wrap.height()*100,{x:e,y:i}},getEventCoordinates:function(t){var e,i;if("touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"touchcancel"==t.type){var o=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e=o.pageX,i=o.pageY}else"mousedown"!=t.type&&"mouseup"!=t.type&&"mousemove"!=t.type&&"mouseover"!=t.type&&"mouseout"!=t.type&&"mouseenter"!=t.type&&"mouseleave"!=t.type||(e=t.pageX,i=t.pageY);return{x:e,y:i}},matchShapeToCoords:function(t){for(var e=this.settings.spots.length-1;e>=0;e--){var i=this.settings.spots[e];if("poly"==i.type){var o=t.x/100*this.wrap.width(),s=t.y/100*this.wrap.height();if(o=o*this.settings.general.width/this.wrap.width(),s=s*this.settings.general.height/this.wrap.height(),l(o,s,i.vs))return e}if("spot"==i.type){var a=i.width<44?44:i.width,p=i.height<44?44:i.height,o=t.x/100*this.wrap.width(),s=t.y/100*this.wrap.height(),h=i.x/100*this.wrap.width()-a/2,d=i.y/100*this.wrap.height()-p/2,g=a,c=p;if(1==parseInt(i.default_style.icon_is_pin,10)&&1==parseInt(i.default_style.use_icon,10)&&(d-=p/2,i.height<44&&(d+=i.height/2)),n(o,s,h,d,g,c))return e}if("rect"==i.type&&n(t.x,t.y,i.x,i.y,i.width,i.height))return e;if("oval"==i.type){var o=t.x,s=t.y,u=i.x+i.width/2,m=i.y+i.height/2,h=i.width/2,d=i.height/2;if(r(o,s,u,m,h,d))return e}}return-1},applyMouseoverStyles:function(t){var e=this,i=e.settings.spots[t],o=this.wrap.find("#"+i.id),s="";if("spot"==i.type&&0==parseInt(i.default_style.use_icon,10)){var n=a(i.mouseover_style.background_color)||{r:0,b:0,g:0},l=a(i.mouseover_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"px;",s+="height: "+i.height+"px;",s+="margin-left: -"+i.width/2+"px;",s+="margin-top: -"+i.height/2+"px;",s+="opacity: "+i.mouseover_style.opacity+";",s+="border-radius: "+i.mouseover_style.border_radius+"px;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.mouseover_style.background_opacity+");",s+="border-width: "+i.mouseover_style.border_width+"px;",s+="border-style: "+i.mouseover_style.border_style+";",s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.mouseover_style.border_opacity+");"}if("spot"==i.type&&1==parseInt(i.default_style.use_icon,10)){var r=i.width<44?44:i.width,p=i.height<44?44:i.height;s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+r+"px;",s+="height: "+p+"px;";var h=-p/2,d=-r/2;1==parseInt(i.default_style.icon_is_pin,10)&&(h=-p,i.height<44&&(h=-p/2-i.height/2)),s+="margin-left: "+d+"px;",s+="margin-top: "+h+"px;",s+="opacity: "+i.mouseover_style.opacity+";"}if("spot"==i.type&&1==parseInt(i.default_style.use_icon,10)&&"library"==i.default_style.icon_type&&o.find("path").attr("style","fill:"+i.mouseover_style.icon_fill),"rect"==i.type){var n=a(i.mouseover_style.background_color)||{r:0,b:0,g:0},l=a(i.mouseover_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"%;",s+="height: "+i.height+"%;",s+="opacity: "+i.mouseover_style.opacity+";",s+="border-radius: "+i.mouseover_style.border_radius+"px;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.mouseover_style.background_opacity+");",s+="border-width: "+i.mouseover_style.border_width+"px;",s+="border-style: "+i.mouseover_style.border_style+";",s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.mouseover_style.border_opacity+");"}if("oval"==i.type){var n=a(i.mouseover_style.background_color)||{r:0,b:0,g:0},l=a(i.mouseover_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"%;",s+="height: "+i.height+"%;",s+="opacity: "+i.mouseover_style.opacity+";",s+="border-radius: 50% 50%;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.mouseover_style.background_opacity+");",s+="border-width: "+i.mouseover_style.border_width+"px;",s+="border-style: "+i.mouseover_style.border_style+";",
s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.mouseover_style.border_opacity+");"}if("poly"==i.type){var g=a(i.mouseover_style.fill)||{r:0,b:0,g:0},c=a(i.mouseover_style.stroke_color)||{r:0,b:0,g:0};s+="opacity: "+i.mouseover_style.opacity+";",s+="fill: rgba("+g.r+", "+g.g+", "+g.b+", "+i.mouseover_style.fill_opacity+");",s+="stroke: rgba("+c.r+", "+c.g+", "+c.b+", "+i.mouseover_style.stroke_opacity+");",s+="stroke-width: "+i.mouseover_style.stroke_width+"px;",s+="stroke-dasharray: "+i.mouseover_style.stroke_dasharray+";",s+="stroke-linecap: "+i.mouseover_style.stroke_linecap+";"}o.attr("style",s)},applyDefaultStyles:function(t){var e=this,i=e.settings.spots[t],o=this.wrap.find("#"+i.id),s="";if("spot"==i.type&&0==parseInt(i.default_style.use_icon,10)){var n=a(i.default_style.background_color)||{r:0,b:0,g:0},l=a(i.default_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"px;",s+="height: "+i.height+"px;",s+="margin-left: -"+i.width/2+"px;",s+="margin-top: -"+i.height/2+"px;",s+="opacity: "+i.default_style.opacity+";",s+="border-radius: "+i.default_style.border_radius+"px;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.default_style.background_opacity+");",s+="border-width: "+i.default_style.border_width+"px;",s+="border-style: "+i.default_style.border_style+";",s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.default_style.border_opacity+");"}if("spot"==i.type&&1==parseInt(i.default_style.use_icon,10)){var r=i.width<44?44:i.width,p=i.height<44?44:i.height;s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+r+"px;",s+="height: "+p+"px;";var h=-p/2,d=-r/2;1==parseInt(i.default_style.icon_is_pin,10)&&(h=-p,i.height<44&&(h=-p/2-i.height/2)),s+="margin-left: "+d+"px;",s+="margin-top: "+h+"px;",s+="opacity: "+i.default_style.opacity+";"}if("spot"==i.type&&1==parseInt(i.default_style.use_icon,10)&&"library"==i.default_style.icon_type&&o.find("path").attr("style","fill:"+i.default_style.icon_fill),"rect"==i.type){var n=a(i.default_style.background_color)||{r:0,b:0,g:0},l=a(i.default_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"%;",s+="height: "+i.height+"%;",s+="opacity: "+i.default_style.opacity+";",s+="border-radius: "+i.default_style.border_radius+"px;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.default_style.background_opacity+");",s+="border-width: "+i.default_style.border_width+"px;",s+="border-style: "+i.default_style.border_style+";",s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.default_style.border_opacity+");"}if("oval"==i.type){var n=a(i.default_style.background_color)||{r:0,b:0,g:0},l=a(i.default_style.border_color)||{r:0,b:0,g:0};s+="left: "+i.x+"%;",s+="top: "+i.y+"%;",s+="width: "+i.width+"%;",s+="height: "+i.height+"%;",s+="opacity: "+i.default_style.opacity+";",s+="border-radius: 50% 50%;",s+="background: rgba("+n.r+", "+n.g+", "+n.b+", "+i.default_style.background_opacity+");",s+="border-width: "+i.default_style.border_width+"px;",s+="border-style: "+i.default_style.border_style+";",s+="border-color: rgba("+l.r+", "+l.g+", "+l.b+", "+i.default_style.border_opacity+");"}if("poly"==i.type){var g=a(i.default_style.fill)||{r:0,b:0,g:0},c=a(i.default_style.stroke_color)||{r:0,b:0,g:0};s+="opacity: "+i.default_style.opacity+";",s+="fill: rgba("+g.r+", "+g.g+", "+g.b+", "+i.default_style.fill_opacity+");",s+="stroke: rgba("+c.r+", "+c.g+", "+c.b+", "+i.default_style.stroke_opacity+");",s+="stroke-width: "+i.default_style.stroke_width+"px;",s+="stroke-dasharray: "+i.default_style.stroke_dasharray+";",s+="stroke-linecap: "+i.default_style.stroke_linecap+";"}o.attr("style",s)},highlightShape:function(e,i){this.applyMouseoverStyles(e),this.highlightedShapeIndex=e,this.highlightedShape=this.settings.spots[e],i&&t.imageMapProEventHighlightedShape(this.settings.general.name,this.highlightedShape.title)},unhighlightShape:function(){this.applyDefaultStyles(this.highlightedShapeIndex),t.imageMapProEventUnhighlightedShape(this.settings.general.name,this.highlightedShape.title),this.highlightedShapeIndex=o,this.highlightedShape=o},clickShape:function(e,i){"show-tooltip"==this.settings.spots[e].actions.click&&(this.applyMouseoverStyles(e),this.showTooltip(e),this.updateTooltipPosition(e,i),this.clickedShapeIndex=e,this.clickedShape=this.settings.spots[e]),"follow-link"==this.settings.spots[e].actions.click&&(0==t("#imp-temp-link").length&&t("body").append('<a href="" id="imp-temp-link" target="_blank"></a>'),t("#imp-temp-link").attr("href",this.settings.spots[e].actions.link),1==parseInt(this.settings.spots[e].actions.open_link_in_new_window,10)?t("#imp-temp-link").attr("target","_blank"):t("#imp-temp-link").removeAttr("target"),t("#imp-temp-link")[0].click()),t.imageMapProEventClickedShape(this.settings.general.name,this.settings.spots[e].id)},unclickShape:function(){this.applyDefaultStyles(this.clickedShapeIndex),"show-tooltip"==this.clickedShape.actions.click&&this.hideTooltip(),this.clickedShapeIndex=o,this.clickedShape=o},showTooltip:function(e){if("mobile-only"==this.settings.tooltips.fullscreen_tooltips&&d()||"always"==this.settings.tooltips.fullscreen_tooltips){this.visibleTooltip=t('.imp-fullscreen-tooltip[data-index="'+e+'"]'),this.visibleTooltipIndex=e,this.fullscreenTooltipsContainer.show();var i=this;setTimeout(function(){i.visibleTooltip.addClass("imp-tooltip-visible")},20),this.fullscreenTooltipVisible=!0,this.bodyOverflow=t("body").css("overflow"),t("body").css({overflow:"hidden"})}else t(".imp-tooltip-visible").removeClass("imp-tooltip-visible"),this.visibleTooltip=this.wrap.find('.imp-tooltip[data-index="'+e+'"]'),this.visibleTooltipIndex=e,this.visibleTooltip.addClass("imp-tooltip-visible"),this.measureTooltipSize(e);t.imageMapProEventOpenedTooltip(this.settings.general.name,this.settings.spots[e].title)},hideTooltip:function(){if(t(".imp-tooltip-visible").removeClass("imp-tooltip-visible"),this.visibleTooltip=o,this.visibleTooltipIndex=o,"mobile-only"==this.settings.tooltips.fullscreen_tooltips&&d()||"always"==this.settings.tooltips.fullscreen_tooltips){var e=this;setTimeout(function(){e.fullscreenTooltipsContainer.hide()},200),this.fullscreenTooltipVisible=!1,t("body").css({overflow:this.bodyOverflow})}t.imageMapProEventClosedTooltip(this.settings.general.name)},updateTooltipPosition:function(i,o){if(!this.fullscreenTooltipVisible){var s,a,n,l,r,h,d,g,c,u,m=20;if(s=this.visibleTooltip,a=this.visibleTooltip.data("imp-measured-width"),n=this.visibleTooltip.data("imp-measured-height"),u=this.settings.spots[i],1==parseInt(this.settings.tooltips.sticky_tooltips,10)&&"show-tooltip"==u.actions.mouseover&&o){var f=this.getEventCoordinates(o);g=f.x,c=f.y,l=g-this.wrap.offset().left,r=c-this.wrap.offset().top,h=0,d=0}else"spot"==u.type?(h=u.width,d=u.height,l=Math.round(10*u.x)/10/100*this.wrap.width()-h/2,r=Math.round(10*u.y)/10/100*this.wrap.height()-d/2):(h=u.width/100*this.wrap.width(),d=u.height/100*this.wrap.height(),l=Math.round(10*u.x)/10/100*this.wrap.width(),r=Math.round(10*u.y)/10/100*this.wrap.height());var y,_;"left"==u.tooltip_style.position&&(y=l-a-m,_=r+d/2-n/2),"right"==u.tooltip_style.position&&(y=l+h+m,_=r+d/2-n/2),"top"==u.tooltip_style.position&&(y=l+h/2-a/2,_=r-n-m),"bottom"==u.tooltip_style.position&&(y=l+h/2-a/2,_=r+d+m),"spot"==u.type&&1==parseInt(u.default_style.icon_is_pin,10)&&"spot"==u.type&&1==parseInt(u.default_style.use_icon,10)&&(_-=d/2);var v={x:y,y:_};if(1==parseInt(this.settings.tooltips.constrain_tooltips,10)){var b=this.wrap.offset().left-t(e).scrollLeft(),w=this.wrap.offset().top-t(e).scrollTop();v=p(y+b,_+w,a,n),v.x-=b,v.y-=w}s.css({left:v.x,top:v.y})}},toggleFullscreen:function(){if(0==parseInt(this.settings.runtime.is_fullscreen,10)){t("body").addClass("imp-fullscreen-mode");var e=t.extend(!0,{},this.settings);e.runtime.is_fullscreen=1,e.id="999999",e.general.responsive=0;var i="";i+="background: "+this.settings.fullscreen.fullscreen_background,t("body").append('<div id="imp-fullscreen-wrap" style="'+i+'"><div id="image-map-pro-'+e.id+'"></div></div>'),t("#image-map-pro-"+e.id).imageMapPro(e),this.disableEvents(),g=this}else t("body").removeClass("imp-fullscreen-mode"),t("#imp-fullscreen-wrap").remove(),this.disableEvents(),g.events()}}),t.fn[c]=function(e){return this.each(function(){t.data(this,"plugin_"+c,new s(this,e))})}}(jQuery,window,document);