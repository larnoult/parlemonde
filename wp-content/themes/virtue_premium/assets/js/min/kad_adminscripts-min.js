!function(e){"use strict";function t(t,s){this.element=e(t),this.settings=e.extend({},i,s),this.settings.emptyIcon&&this.settings.iconsPerPage--,this.iconPicker=e("<div/>",{class:"icons-selector",style:"position: relative",html:'<div class="selector"><span class="selected-icon"><i class="fip-icon-block"></i></span><span class="selector-button"><i class="fip-icon-down-dir"></i></span></div><div class="selector-popup" style="display: none;">'+(this.settings.hasSearch?'<div class="selector-search"><input type="text" name="" value="" placeholder="Search icon" class="icons-search-input"/><i class="fip-icon-search"></i></div>':"")+'<div class="selector-category"><select name="" class="icon-category-select" style="display: none"></select></div><div class="fip-icons-container"></div><div class="selector-footer" style="display:none;"><span class="selector-pages">1/2</span><span class="selector-arrows"><span class="selector-arrow-left" style="display:none;"><i class="fip-icon-left-dir"></i></span><span class="selector-arrow-right"><i class="fip-icon-right-dir"></i></span></span></div></div>'}),this.iconContainer=this.iconPicker.find(".fip-icons-container"),this.searchIcon=this.iconPicker.find(".selector-search i"),this.iconsSearched=[],this.isSearch=!1,this.totalPage=1,this.currentPage=1,this.currentIcon=!1,this.iconsCount=0,this.open=!1,this.searchValues=[],this.availableCategoriesSearch=[],this.triggerEvent=null,this.backupSource=[],this.backupSearch=[],this.isCategorized=!1,this.selectCategory=this.iconPicker.find(".icon-category-select"),this.selectedCategory=!1,this.availableCategories=[],this.unCategorizedKey=null,this.init()}var i={theme:"fip-grey",source:!1,emptyIcon:!0,emptyIconValue:"",iconsPerPage:20,hasSearch:!0,searchSource:!1,useAttribute:!1,attributeName:"data-icon",convertToHex:!0,allCategoryText:"From all categories",unCategorizedText:"Uncategorized"};t.prototype={init:function(){this.iconPicker.addClass(this.settings.theme),this.iconPicker.css({left:-9999}).appendTo("body");var t=this.iconPicker.outerHeight(),i=this.iconPicker.outerWidth();if(this.iconPicker.css({left:""}),this.element.before(this.iconPicker),this.element.css({visibility:"hidden",top:0,position:"relative",zIndex:"-1",left:"-"+i+"px",display:"inline-block",height:t+"px",width:i+"px",padding:"0",margin:"0 -"+i+"px 0 0",border:"0 none",verticalAlign:"top"}),!this.element.is("select")){var s=function(){for(var e=3,t=document.createElement("div"),i=t.all||[];t.innerHTML="<!--[if gt IE "+ ++e+"]><br><![endif]-->",i[0];);return e>4?e:!e}(),n=document.createElement("div");this.triggerEvent=9!==s&&"oninput"in n?["input","keyup"]:["keyup"]}!this.settings.source&&this.element.is("select")?(this.settings.source=[],this.settings.searchSource=[],this.element.find("optgroup").length?(this.isCategorized=!0,this.element.find("optgroup").each(e.proxy(function(t,i){var s=this.availableCategories.length,n=e("<option />");n.attr("value",s),n.html(e(i).attr("label")),this.selectCategory.append(n),this.availableCategories[s]=[],this.availableCategoriesSearch[s]=[],e(i).find("option").each(e.proxy(function(t,i){var n=e(i).val(),a=e(i).html();n&&n!==this.settings.emptyIconValue&&(this.settings.source.push(n),this.availableCategories[s].push(n),this.searchValues.push(a),this.availableCategoriesSearch[s].push(a))},this))},this)),this.element.find("> option").length&&this.element.find("> option").each(e.proxy(function(t,i){var s=e(i).val(),n=e(i).html();return!s||""===s||s==this.settings.emptyIconValue||(null===this.unCategorizedKey&&(this.unCategorizedKey=this.availableCategories.length,this.availableCategories[this.unCategorizedKey]=[],this.availableCategoriesSearch[this.unCategorizedKey]=[],e("<option />").attr("value",this.unCategorizedKey).html(this.settings.unCategorizedText).appendTo(this.selectCategory)),this.settings.source.push(s),this.availableCategories[this.unCategorizedKey].push(s),this.searchValues.push(n),void this.availableCategoriesSearch[this.unCategorizedKey].push(n))},this))):this.element.find("option").each(e.proxy(function(t,i){var s=e(i).val(),n=e(i).html();s&&(this.settings.source.push(s),this.searchValues.push(n))},this)),this.backupSource=this.settings.source.slice(0),this.backupSearch=this.searchValues.slice(0),this.loadCategories()):this.initSourceIndex(),this.loadIcons(),this.selectCategory.on("change keyup",e.proxy(function(t){if(!1===this.isCategorized)return!1;var i=e(t.currentTarget),s=i.val();if("all"===i.val())this.settings.source=this.backupSource,this.searchValues=this.backupSearch;else{var n=parseInt(s,10);this.availableCategories[n]&&(this.settings.source=this.availableCategories[n],this.searchValues=this.availableCategoriesSearch[n])}this.resetSearch(),this.loadIcons()},this)),this.iconPicker.find(".selector-button").click(e.proxy(function(){this.toggleIconSelector()},this)),this.iconPicker.find(".selector-arrow-right").click(e.proxy(function(t){this.currentPage<this.totalPage&&(this.iconPicker.find(".selector-arrow-left").show(),this.currentPage=this.currentPage+1,this.renderIconContainer()),this.currentPage===this.totalPage&&e(t.currentTarget).hide()},this)),this.iconPicker.find(".selector-arrow-left").click(e.proxy(function(t){this.currentPage>1&&(this.iconPicker.find(".selector-arrow-right").show(),this.currentPage=this.currentPage-1,this.renderIconContainer()),1===this.currentPage&&e(t.currentTarget).hide()},this)),this.iconPicker.find(".icons-search-input").keyup(e.proxy(function(t){var i=e(t.currentTarget).val();return""===i?void this.resetSearch():(this.searchIcon.removeClass("fip-icon-search"),this.searchIcon.addClass("fip-icon-cancel"),this.isSearch=!0,this.currentPage=1,this.iconsSearched=[],e.grep(this.searchValues,e.proxy(function(e,t){return e.toLowerCase().search(i.toLowerCase())>=0?(this.iconsSearched[this.iconsSearched.length]=this.settings.source[t],!0):void 0},this)),void this.renderIconContainer())},this)),this.iconPicker.find(".selector-search").on("click",".fip-icon-cancel",e.proxy(function(){this.iconPicker.find(".icons-search-input").focus(),this.resetSearch()},this)),this.iconContainer.on("click",".fip-box",e.proxy(function(t){this.setSelectedIcon(e(t.currentTarget).find("i").attr("data-fip-value")),this.toggleIconSelector()},this)),this.iconPicker.click(function(e){return e.stopPropagation(),!1}),e("html").click(e.proxy(function(){this.open&&this.toggleIconSelector()},this))},initSourceIndex:function(){if("object"==typeof this.settings.source){if(e.isArray(this.settings.source))this.isCategorized=!1,this.selectCategory.html("").hide(),this.settings.source=e.map(this.settings.source,function(e){return"function"==typeof e.toString?e.toString():e}),this.searchValues=e.isArray(this.settings.searchSource)?e.map(this.settings.searchSource,function(e){return"function"==typeof e.toString?e.toString():e}):this.settings.source.slice(0);else{var t=e.extend(!0,{},this.settings.source);this.settings.source=[],this.searchValues=[],this.availableCategoriesSearch=[],this.selectedCategory=!1,this.availableCategories=[],this.unCategorizedKey=null,this.isCategorized=!0,this.selectCategory.html("");for(var i in t){var s=this.availableCategories.length,n=e("<option />");n.attr("value",s),n.html(i),this.selectCategory.append(n),this.availableCategories[s]=[],this.availableCategoriesSearch[s]=[];for(var a in t[i]){var o=t[i][a],r=this.settings.searchSource&&this.settings.searchSource[i]&&this.settings.searchSource[i][a]?this.settings.searchSource[i][a]:o;"function"==typeof o.toString&&(o=o.toString()),o&&o!==this.settings.emptyIconValue&&(this.settings.source.push(o),this.availableCategories[s].push(o),this.searchValues.push(r),this.availableCategoriesSearch[s].push(r))}}}this.backupSource=this.settings.source.slice(0),this.backupSearch=this.searchValues.slice(0),this.loadCategories()}},loadCategories:function(){!1!==this.isCategorized&&(e('<option value="all">'+this.settings.allCategoryText+"</option>").prependTo(this.selectCategory),this.selectCategory.show().val("all").trigger("change"))},loadIcons:function(){this.iconContainer.html('<i class="fip-icon-spin3 animate-spin loading"></i>'),this.settings.source instanceof Array&&this.renderIconContainer()},renderIconContainer:function(){var t,i=[];if(i=this.isSearch?this.iconsSearched:this.settings.source,this.iconsCount=i.length,this.totalPage=Math.ceil(this.iconsCount/this.settings.iconsPerPage),this.totalPage>1?this.iconPicker.find(".selector-footer").show():this.iconPicker.find(".selector-footer").hide(),this.iconPicker.find(".selector-pages").html(this.currentPage+"/"+this.totalPage+" <em>("+this.iconsCount+")</em>"),t=(this.currentPage-1)*this.settings.iconsPerPage,this.settings.emptyIcon)this.iconContainer.html('<span class="fip-box"><i class="fip-icon-block" data-fip-value="fip-icon-block"></i></span>');else{if(i.length<1)return void this.iconContainer.html('<span class="icons-picker-error"><i class="fip-icon-block" data-fip-value="fip-icon-block"></i></span>');this.iconContainer.html("")}i=i.slice(t,t+this.settings.iconsPerPage);for(var s,n=0;s=i[n++];){var a=s;e.grep(this.settings.source,e.proxy(function(e,t){return e===s&&(a=this.searchValues[t],!0)},this)),e("<span/>",{html:'<i data-fip-value="'+s+'" '+(this.settings.useAttribute?this.settings.attributeName+'="'+(this.settings.convertToHex?"&#x"+parseInt(s,10).toString(16)+";":s)+'"':'class="'+s+'"')+"></i>",class:"fip-box",title:a}).appendTo(this.iconContainer)}this.settings.emptyIcon||this.element.val()&&-1!==e.inArray(this.element.val(),this.settings.source)?-1===e.inArray(this.element.val(),this.settings.source)?this.setSelectedIcon():this.setSelectedIcon(this.element.val()):this.setSelectedIcon(i[0])},setHighlightedIcon:function(){this.iconContainer.find(".current-icon").removeClass("current-icon"),this.currentIcon&&this.iconContainer.find('[data-fip-value="'+this.currentIcon+'"]').parent("span").addClass("current-icon")},setSelectedIcon:function(e){if("fip-icon-block"===e&&(e=""),this.settings.useAttribute?e?this.iconPicker.find(".selected-icon").html("<i "+this.settings.attributeName+'="'+(this.settings.convertToHex?"&#x"+parseInt(e,10).toString(16)+";":e)+'"></i>'):this.iconPicker.find(".selected-icon").html('<i class="fip-icon-block"></i>'):this.iconPicker.find(".selected-icon").html('<i class="'+(e||"fip-icon-block")+'"></i>'),this.element.val(""===e?this.settings.emptyIconValue:e).trigger("change"),null!==this.triggerEvent)for(var t in this.triggerEvent)this.element.trigger(this.triggerEvent[t]);this.currentIcon=e,this.setHighlightedIcon()},toggleIconSelector:function(){this.open=this.open?0:1,this.iconPicker.find(".selector-popup").slideToggle(300),this.iconPicker.find(".selector-button i").toggleClass("fip-icon-down-dir"),this.iconPicker.find(".selector-button i").toggleClass("fip-icon-up-dir"),this.open&&this.iconPicker.find(".icons-search-input").focus().select()},resetSearch:function(){this.iconPicker.find(".icons-search-input").val(""),this.searchIcon.removeClass("fip-icon-cancel"),this.searchIcon.addClass("fip-icon-search"),this.iconPicker.find(".selector-arrow-left").hide(),this.currentPage=1,this.isSearch=!1,this.renderIconContainer(),this.totalPage>1&&this.iconPicker.find(".selector-arrow-right").show()}},e.fn.fontIconPicker=function(i){return this.each(function(){e.data(this,"fontIconPicker")||e.data(this,"fontIconPicker",new t(this,i))}),this.setIcons=e.proxy(function(t,i){void 0===t&&(t=!1),void 0===i&&(i=!1),this.each(function(){e.data(this,"fontIconPicker").settings.source=t,e.data(this,"fontIconPicker").settings.searchSource=i,e.data(this,"fontIconPicker").initSourceIndex(),e.data(this,"fontIconPicker").resetSearch(),e.data(this,"fontIconPicker").loadIcons()})},this),this.destroyPicker=e.proxy(function(){this.each(function(){e.data(this,"fontIconPicker")&&(e.data(this,"fontIconPicker").iconPicker.remove(),e.data(this,"fontIconPicker").element.css({visibility:"",top:"",position:"",zIndex:"",left:"",display:"",height:"",width:"",padding:"",margin:"",border:"",verticalAlign:""}),e.removeData(this,"fontIconPicker"))})},this),this.refreshPicker=e.proxy(function(s){s||(s=i),this.destroyPicker(),this.each(function(){e.data(this,"fontIconPicker")||e.data(this,"fontIconPicker",new t(this,s))})},this),this}}(jQuery),jQuery(document).ready(function(){function e(e){jQuery(e).find("select.kad_icomoon").fontIconPicker({emptyIcon:!0,iconsPerPage:25})}function t(e){jQuery(e).find(".kad-widget-colorpicker").wpColorPicker({change:_.throttle(function(){jQuery(this).trigger("change")},3e3)})}function i(i,s){t(s),e(s)}function s(i,s){t(".so-content.panel-dialog"),e(".so-content.panel-dialog")}jQuery("#widgets-right .widget:has(select.kad_icomoon)").each(function(){e(jQuery(this))}),jQuery("#widgets-right .widget:has(.kad-widget-colorpicker)").each(function(){t(jQuery(this))}),jQuery(document).on("widget-added widget-updated",i),jQuery(document).on("panelsopen",s)}),jQuery(document).ready(function($){$("select#kadence-shortcodes").select2().on("select2-open",function(){$("body").addClass("kt-select-mask")}).on("select2:open",function(){$("body").addClass("kt-select-mask"),$(".wp-admin .mfp-wrap.kt-mfp-shortcode").removeAttr("tabindex")}).on("select2-close",function(){$("body").removeClass("kt-select-mask")}).on("select2:close",function(){$("body").removeClass("kt-select-mask")}),$("select.kad-sc-select").select2().on("select2-open",function(){$("body").addClass("kt-select-mask")}).on("select2:open",function(){$("body").addClass("kt-select-mask")}).on("select2-close",function(){$("body").removeClass("kt-select-mask")}).on("select2:close",function(){$("body").removeClass("kt-select-mask")}),$("select.kad-icon-select").fontIconPicker({emptyIcon:!0,iconsPerPage:25})}),function($){"use strict";$.imgupload=$.imgupload||{},$(document).ready(function(){$.imgupload()}),$.imgupload=function(){$("body").on({click:function(e){var t=$(this).closest(".kad_img_upload_widget");if("undefined"!=typeof wp&&wp.media){e.preventDefault();var i,s=$(this);if(i)return void i.open();i=wp.media({multiple:!1,library:{type:"image"}}),i.on("select",function(){var e=i.state().get("selection").first();i.close(),t.find(".kad_custom_media_url").val(e.attributes.url),t.find(".kad_custom_media_id").val(e.attributes.id);var s=e.attributes.url;s=void 0!==e.attributes.sizes&&void 0!==e.attributes.sizes.thumbnail?e.attributes.sizes.thumbnail.url:e.attributes.icon,t.find(".kad_custom_media_image").attr("src",s),t.find(".kad_custom_media_url").trigger("change")}),i.open()}}},".kad_custom_media_upload")}}(jQuery),function($){"use strict";$.imgupload2=$.imgupload2||{},$(document).ready(function(){$.imgupload2()}),$.imgupload2=function(){$("body").on({click:function(e){var t=$(this).closest(".panels-admin-dialog");if("undefined"!=typeof wp&&wp.media){e.preventDefault();var i,s=$(this);if(i)return void i.open();i=wp.media({multiple:!1,library:{type:"image"}}),i.on("select",function(){var e=i.state().get("selection").first();i.close(),t.find('input[data-style-field="background_image"]').val(e.attributes.url)}),i.open()}}},".kad_custom_background_upload")}}(jQuery),function($){"use strict";$.virtuegallery=$.virtuegallery||{},$(document).ready(function(){$.virtuegallery()}),$.virtuegallery=function(){$("body").on({click:function(e){var t=$(this).closest(".kad_widget_image_gallery");if("clear-gallery"===e.currentTarget.id){var i=t.find(".gallery_values").val("");return t.find(".gallery_images").html(""),void t.find(".gallery_values").trigger("change")}if("undefined"!=typeof wp&&wp.media&&wp.media.gallery){e.preventDefault();var s=$(this),n=t.find(".gallery_values").val();wp.media.view.Settings.Gallery=wp.media.view.Settings.Gallery.extend({template:function(e){}});var a;if(n)a='[gallery ids="'+n+'"]',r=wp.media.gallery.edit(a);else var o={frame:"post",state:"gallery",multiple:!0},r=wp.media.editor.open("gallery_values",o);return r.state("gallery-edit").on("update",function(e){r.detach(),t.find(".gallery_images").html("");var i,s="",n,a,o=e.models.map(function(e){return i=e.toJSON(),n=void 0!==i.sizes.thumbnail?i.sizes.thumbnail.url:i.url,a=i.id,s='<a class="of-uploaded-image edit-kt-meta-gal" data-attachment-id="'+a+'" href="#"><img class="gallery-widget-image" src="'+n+'" /></a>',t.find(".gallery_images").append(s),e.id});t.find(".gallery_values").val(o.join(",")),t.find(".gallery_values").trigger("change")}),!1}}},".gallery-attachments")}}(jQuery),function($){"use strict";$.virtue_attachment_gallery=$.virtue_attachment_gallery||{},$(document).ready(function(){$.virtue_attachment_gallery()}),$.virtue_attachment_gallery=function(){$("body").on({click:function(e){var t=$(this).closest(".kad_widget_image_gallery"),i=$(this).data("attachment-id");if("undefined"!=typeof wp&&wp.media&&wp.media.gallery){e.preventDefault(),wp.media.view.Settings.Gallery=wp.media.view.Settings.Gallery.extend({template:function(e){}});var s=$(this),n=t.find(".gallery_values").val(),a='[gallery ids="'+n+'"]';return wp.media.gallery.edit(a).state("gallery-edit").on("update",function(e){t.find(".gallery_images").html("");var i,s="",n,a,o=e.models.map(function(e){return i=e.toJSON(),n=void 0!==i.sizes.thumbnail?i.sizes.thumbnail.url:i.url,a=i.id,s='<a class="of-uploaded-image edit-kt-meta-gal" data-attachment-id="'+a+'" href="#"><img class="gallery-widget-image" src="'+n+'" /></a>',t.find(".gallery_images").append(s),e.id});t.find(".gallery_values").val(o.join(",")),t.find(".gallery_values").trigger("change")}),!1}}},".edit-kt-meta-gal")}}(jQuery),function($){$(document).on("click",".kadence-tabs-widget-toggle",function(){$(this).toggleClass("dashicons-minus dashicons-plus"),$(this).closest(".kadence-tabs-widget").find(".kadence-tabs-widget-content").toggle()}),$(document).on("change",".js-kadence-tabs-widget-title",function(){$(this).closest(".kadence-tabs-widget").find(".kadence-tabs-widget-header-title").text($(this).val())})}(jQuery),window.KTTabs={Models:{},ListViews:{},Views:{},Utils:{}},_.extend(KTTabs.Models,{Tab:Backbone.Model.extend({defaults:{title:"",builder_id:"",panels_data:""}})}),KTTabs.Views.Abstract=Backbone.View.extend({initialize:function(e){return this.templateHTML=e.templateHTML,this},render:function(){return this.$el.html(Mustache.render(this.templateHTML,this.model.attributes)),this},destroy:function(e){e.preventDefault(),this.remove(),this.model.trigger("destroy")}}),_.extend(KTTabs.Views,{Tab:KTTabs.Views.Abstract.extend({className:"kadence-widget-single-tab",events:{"click .js-kadence-remove-tab":"destroy"},render:function(){return this.model.set("panels_data",JSON.stringify(this.model.get("panels_data"))),this.$el.html(Mustache.render(this.templateHTML,this.model.attributes)),this}})}),KTTabs.ListViews.Abstract=Backbone.View.extend({initialize:function(e){return this.widgetId=e.widgetId,this.itemsModel=e.itemsModel,this.itemView=e.itemView,this.itemTemplate=e.itemTemplate,this.$items=this.$(e.itemsClass),this.items=new Backbone.Collection([],{model:this.itemsModel}),this.listenTo(this.items,"add",this.appendOne),this},addNew:function(e){e.preventDefault();var t=this.getMaxId();return this.items.add(new this.itemsModel({id:t+1})),this},getMaxId:function(){if(this.items.isEmpty())return-1;var e=this.items.max(function(e){return parseInt(e.id,10)});return parseInt(e.id,10)},appendOne:function(e){var t=new this.itemView({model:e,templateHTML:jQuery(this.itemTemplate+this.widgetId).html()}).render();return"__i__"!==this.widgetId.slice(-5)&&this.$items.append(t.el),this}}),_.extend(KTTabs.ListViews,{Tabs:KTTabs.ListViews.Abstract.extend({events:{"click .js-kadence-add-tab":"addNew"},appendOne:function(e){e.attributes.builder_id=_.uniqueId("layout-builder-");var t=new this.itemView({model:e,templateHTML:jQuery(this.itemTemplate+this.widgetId).html()}).render();return"__i__"!==this.widgetId.slice(-5)&&this.$items.append(t.el),void 0===jQuery.fn.soPanelsSetupBuilderWidget||jQuery("body").hasClass("wp-customizer")||jQuery("#siteorigin-page-builder-widget-"+e.attributes.builder_id).soPanelsSetupBuilderWidget(),this}})}),_.extend(KTTabs.Utils,{repopulateGeneric:function(e,t,i,s){var n=new e(t);_(i).isObject()&&(i=_(i).values()),n.items.add(i,{parse:!0})},repopulateTabs:function(e,t){var i={el:"#tabs-"+t,widgetId:t,itemsClass:".tabs",itemTemplate:"#js-kadence-tab-",itemsModel:KTTabs.Models.Tab,itemView:KTTabs.Views.Tab};this.repopulateGeneric(KTTabs.ListViews.Tabs,i,e,t)}});